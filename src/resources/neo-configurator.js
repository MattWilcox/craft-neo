(()=>{"use strict";var t={n:e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},d:(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const e=jQuery;var n=t.n(e);n().fn.insertAt=function(t,e){return this.each((function(){0===t?e.prepend(this):e.children().eq(t-1).after(this)}))};const i=Garnish;var a=t.n(i);const o=Craft;var s,r=t.n(o),l=new Uint8Array(16);function c(){if(!s&&!(s="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return s(l)}const d=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const u=function(t){return"string"==typeof t&&d.test(t)};for(var h=[],p=0;p<256;++p)h.push((p+256).toString(16).substr(1));const f=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(h[t[e+0]]+h[t[e+1]]+h[t[e+2]]+h[t[e+3]]+"-"+h[t[e+4]]+h[t[e+5]]+"-"+h[t[e+6]]+h[t[e+7]]+"-"+h[t[e+8]]+h[t[e+9]]+"-"+h[t[e+10]]+h[t[e+11]]+h[t[e+12]]+h[t[e+13]]+h[t[e+14]]+h[t[e+15]]).toLowerCase();if(!u(n))throw TypeError("Stringified UUID is invalid");return n};const m=function(t,e,n){var i=(t=t||{}).random||(t.rng||c)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){n=n||0;for(var a=0;a<16;++a)e[n+a]=i[a];return e}return f(i)};function g(t){return function(t){if(Array.isArray(t))return v(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}const y={_stack:[[]],enter:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("string"==typeof t&&(t=this.fromFieldName(t)),e){var n=this.getNamespace();n.push.apply(n,g(t)),t=n}this._stack.push(t)},enterByFieldName:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.enter(this.fromFieldName(t),e)},leave:function(){return this._stack.length>1?this._stack.pop():this.getNamespace()},getNamespace:function(){return Array.from(this._stack[this._stack.length-1])},parse:function(t){return"string"==typeof t?t.indexOf("[")>-1?this.fromFieldName(t):t.indexOf("-")>-1?t.split("-"):t.indexOf(".")>-1?t.split("."):t:Array.from(t)},value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n=this.getNamespace();return n.push(t),n.join(e)},fieldName:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=this.toFieldName();return e?e+t.replace(/([^'"[\]]+)([^'"]*)/,"[$1]$2"):t},toString:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"-";return this.getNamespace().join(t)},toFieldName:function(){var t=this.getNamespace();switch(t.length){case 0:return"";case 1:return t[0]}return t[0]+"["+t.slice(1).join("][")+"]"},fromFieldName:function(t){return t.match(/[^[\]\s]+/g)||[]}};var b={settings:null};const k=a().Base.extend({_selected:!1,init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=Object.assign({},b,t),this._settings=t.settings},getSettings:function(){return this._settings},select:function(){this.toggleSelect(!0)},deselect:function(){this.toggleSelect(!1)},toggleSelect:function(t){this._selected="boolean"==typeof t?t:!this._selected,this.trigger("toggleSelect",{selected:this._selected})},isSelected:function(){return this._selected}});var B={namespace:[],fieldLayout:null};const _=k.extend({_templateNs:[],init:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.base(e);var n=this.getSettings();e=Object.assign({},B,e),this._templateNs=y.parse(e.namespace),this._fieldLayout=e.fieldLayout,this.$container=this._generateBlockType(n);var i=this.$container.find("[data-neo-bt]");this.$nameText=i.filter('[data-neo-bt="text.name"]'),this.$moveButton=i.filter('[data-neo-bt="button.move"]'),this.$actionsButton=i.filter('[data-neo-bt="button.actions"]'),this.$actionsMenu=i.filter('[data-neo-bt="container.menu"]'),this._actionsMenu=new(a().MenuBtn)(this.$actionsButton),this._actionsMenu.on("optionSelect",(function(e){return t["@actionSelect"](e)})),this.addListener(this.$actionsButton,"click",(function(t){return t.stopPropagation()})),n&&(n.on("change",(function(){return t._updateTemplate()})),n.on("destroy",(function(){return t.trigger("destroy")})),this._updateTemplate()),this.deselect()},_generateBlockType:function(t){var e=t.getErrors(),i=(Array.isArray(e)?e:Object.keys(e)).length>0;return n()('\n      <div class="nc_sidebar_list_item'.concat(i?" has-errors":"",'">\n        <div class="label" data-neo-bt="text.name">').concat(t.getName(),'</div>\n        <a class="move icon" title="').concat(r().t("neo","Reorder"),'" role="button" data-neo-bt="button.move"></a>\n        <button class="settings icon menubtn" title="').concat(r().t("neo","Actions"),'" role="button" type="button" data-neo-bt="button.actions"></button>\n        <div class="menu" data-neo-bt="container.menu">\n          <ul class="padded">\n            <li><a data-icon="field" data-action="copy">').concat(r().t("neo","Copy"),'</a></li>\n            <li class="disabled"><a data-icon="brush" data-action="paste">').concat(r().t("neo","Paste"),'</a></li>\n            <li><a data-icon="share" data-action="clone">').concat(r().t("neo","Clone"),'</a></li>\n            <li><a class="error" data-icon="remove" data-action="delete">').concat(r().t("neo","Delete"),"</a></li>\n          </ul>\n        </div>\n      </div>"))},getFieldLayout:function(){return this._fieldLayout},toggleSelect:function(t){this.base(t);var e=this.getSettings(),n=this.getFieldLayout(),i=this.isSelected();e&&e.$container.toggleClass("hidden",!i),n&&n.$container.toggleClass("hidden",!i),this.$container.toggleClass("is-selected",i)},_updateTemplate:function(){var t=this.getSettings(),e=this.getFieldLayout();t&&(this.$nameText.text(t.getName()),this.$container.toggleClass("is-child",!t.getTopLevel()),e&&e.setBlockName(t.getName()))},"@actionSelect":function(t){var e=n()(t.option);if(!e.hasClass("disabled"))switch(e.attr("data-action")){case"copy":this.trigger("copy");break;case"paste":this.trigger("paste");break;case"clone":this.trigger("clone");break;case"delete":window.confirm(r().t("neo","Are you sure you want to delete this block type?"))&&this.getSettings().destroy()}}});function x(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return $(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,r=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){r=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(r)throw o}}}}function $(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var C={id:!1,label:!1,instructions:!1,required:!1,input:"",warning:!1,errors:!1},w={type:"text",attributes:{},id:"",name:"",value:"",class:"",fullWidth:!0},S={attributes:{},name:"",checked:!1};const I=a().Base.extend({$container:new(n()),_sortOrder:0,getSortOrder:function(){return this._sortOrder},setSortOrder:function(t){var e=this._sortOrder;this._sortOrder=0|t,e!==this._sortOrder&&this.trigger("change",{property:"sortOrder",oldValue:e,newValue:this._sortOrder})},getFocusElement:function(){return new(n())},destroy:function(){this.trigger("destroy")},_field:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=Object.assign({},C,t);var e=[];if(e.push('\n      <div class="field">'),(t.label||t.instructions)&&(t.label&&e.push('\n        <div class="heading">\n          <label'.concat(t.required?' class="required"':"").concat(t.id?' for="'.concat(t.id,'"'):"",">\n            ").concat(t.label,"\n          </label>\n        </div>")),t.instructions&&e.push('\n        <div class="instructions">'.concat(t.instructions,"</div>"))),e.push('\n        <div class="input'.concat(t.errors?" errors":"",'">\n          ').concat(t.input,"\n        </div>")),t.warning&&e.push('\n        <p class="warning">'.concat(t.warning,"</p>")),t.errors){e.push('\n        <ul class="errors">');var n,i=x(t.errors);try{for(i.s();!(n=i.n()).done;){var a=n.value;e.push("\n          <li>".concat(a,"</li>"))}}catch(t){i.e(t)}finally{i.f()}e.push("\n        </ul>")}return e.push("\n      </div>"),e.join("")},_input:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(t=Object.assign({},w,t)).input='\n      <input class="text'.concat(t.fullWidth?" fullwidth":""," ").concat(t.class,'"\n             type="').concat(t.type,'"\n             id="').concat(t.id,'"\n             name="').concat(t.name,'"\n             value="').concat(t.value,'"\n             ').concat(this._attributes(t.attributes),'\n             autocomplete="off">'),this._field(t)},_lightswitch:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(t=Object.assign({},S,t)).input='\n      <div class="lightswitch'.concat(t.checked?" on":"",'" tabindex="0"').concat(this._attributes(t.attributes),'>\n        <div class="lightswitch-container">\n          <div class="label on"></div>\n          <div class="handle"></div>\n          <div class="label off"></div>\n        </div>\n        <input type="hidden" name="').concat(t.name,'" value="').concat(t.checked?"1":"",'">\n      </div>'),this._field(t)},_attributes:function(t){var e=[];for(var n in t)e.push(" ".concat(n,'="').concat(t[n],'"'));return e.join("")}});function T(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return L(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,r=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){r=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(r)throw o}}}}function L(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var N={namespace:[],id:null,sortOrder:0,name:"",handle:"",maxBlocks:0,maxSiblingBlocks:0,maxChildBlocks:0,topLevel:!0,childBlocks:null,childBlockTypes:[],errors:{}};const O=I.extend({_templateNs:[],_childBlockTypes:[],$sortOrderInput:new(n()),$nameInput:new(n()),$handleInput:new(n()),$maxBlocksInput:new(n()),$maxSiblingBlocksInput:new(n()),$maxChildBlocksInput:new(n()),init:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Object.assign({},N,e),this._templateNs=y.parse(e.namespace),this._childBlockTypes=[],this._id=e.id,this._errors=e.errors,this.setSortOrder(e.sortOrder),this.setName(e.name),this.setHandle(e.handle),this.setMaxBlocks(e.maxBlocks),this.setMaxSiblingBlocks(e.maxSiblingBlocks),this.setMaxChildBlocks(e.maxChildBlocks),this.setTopLevel(e.topLevel),this.$container=this._generateBlockTypeSettings();var n=this.$container.find("[data-neo-bts]");this.$sortOrderInput=n.filter('[data-neo-bts="input.sortOrder"]'),this.$nameInput=n.filter('[data-neo-bts="input.name"]'),this.$handleInput=n.filter('[data-neo-bts="input.handle"]'),this.$maxBlocksInput=n.filter('[data-neo-bts="input.maxBlocks"]'),this.$maxSiblingBlocksInput=n.filter('[data-neo-bts="input.maxSiblingBlocks"]'),this.$maxChildBlocksInput=n.filter('[data-neo-bts="input.maxChildBlocks"]'),this.$maxChildBlocksContainer=n.filter('[data-neo-bts="container.maxChildBlocks"]'),this.$topLevelInput=n.filter('[data-neo-bts="input.topLevel"]'),this.$topLevelContainer=n.filter('[data-neo-bts="container.topLevel"]'),this.$childBlocksInput=n.filter('[data-neo-bts="input.childBlocks"]'),this.$childBlocksContainer=n.filter('[data-neo-bts="container.childBlocks"]'),this.$deleteButton=n.filter('[data-neo-bts="button.delete"]'),r().initUiElements(this.$container),this._childBlocksSelect=this.$childBlocksInput.data("checkboxSelect"),this._topLevelLightswitch=this.$topLevelInput.data("lightswitch"),this._handleGenerator=new(r().HandleGenerator)(this.$nameInput,this.$handleInput),""!==this.getHandle()&&this._handleGenerator.stopListening();var i,o=T(e.childBlockTypes);try{for(o.s();!(i=o.n()).done;){var s=i.value;this.addChildBlockType(s)}}catch(t){o.e(t)}finally{o.f()}this.setChildBlocks(e.childBlocks),a().Base.prototype.on.call(this._topLevelLightswitch,"change",(function(){return t.setTopLevel(t._topLevelLightswitch.on)})),this.addListener(this.$nameInput,"keyup change",(function(){t.setName(t.$nameInput.val()),t._handleGenerator.listening&&t.setHandle(t.$handleInput.val())})),this.addListener(this.$handleInput,"keyup change textchange",(function(){return t.setHandle(t.$handleInput.val())})),this.addListener(this.$maxBlocksInput,"keyup change",(function(){return t.setMaxBlocks(t.$maxBlocksInput.val())})),this.addListener(this.$maxSiblingBlocksInput,"keyup change",(function(){return t.setSiblingMaxBlocks(t.$maxSiblingBlocksInput.val())})),this.addListener(this.$maxChildBlocksInput,"keyup change",(function(){return t.setMaxChildBlocks(t.$maxChildBlocksInput.val())})),this.addListener(this.$deleteButton,"click",(function(){window.confirm(r().t("neo","Are you sure you want to delete this block type?"))&&t.destroy()})),this.$childBlocksInput.on("change","input",(function(){return t._refreshMaxChildBlocks()}))},_generateBlockTypeSettings:function(){var t=this.getErrors(),e=this.getMaxBlocks(),i=this.getMaxSiblingBlocks(),a=this.getMaxChildBlocks();y.enter(this._templateNs);var o=y.fieldName("sortOrder"),s=y.value("name","-"),l=y.fieldName("name"),c=y.value("handle","-"),d=y.fieldName("handle"),u=y.value("maxBlocks","-"),h=y.fieldName("maxBlocks"),p=y.value("maxSiblingBlocks","-"),f=y.fieldName("maxSiblingBlocks"),m=y.value("childBlocks","-"),g=y.fieldName("childBlocks"),v=y.value("maxChildBlocks","-"),b=y.fieldName("maxChildBlocks"),k=y.value("topLevel","-"),B=y.fieldName("topLevel");return y.leave(),n()('\n      <div>\n        <input type="hidden" name="'.concat(o,'" value="').concat(this.getSortOrder(),'" data-neo-bts="input.sortOrder">\n        <div>\n          ').concat(this._input({type:"text",id:s,name:l,label:r().t("neo","Name"),instructions:r().t("neo","What this block type will be called in the CP."),required:!0,value:this.getName(),errors:t.name,attributes:{"data-neo-bts":"input.name"}}),"\n          ").concat(this._input({type:"text",id:c,name:d,label:r().t("neo","Handle"),instructions:r().t("neo","How you&#8217;ll refer to this block type in the templates."),required:!0,class:"code",value:this.getHandle(),errors:t.handle,attributes:{"data-neo-bts":"input.handle"}}),"\n          ").concat(this._input({type:"number",id:u,name:h,label:r().t("neo","Max Blocks"),instructions:r().t("neo","The maximum number of blocks of this type the field is allowed to have."),fullWidth:!1,value:e>0?e:null,errors:t.maxBlocks,attributes:{min:0,style:"width: 80px;","data-neo-bts":"input.maxBlocks"}}),"\n          ").concat(this._input({type:"number",id:p,name:f,label:r().t("neo","Max Sibling Blocks of This Type"),instructions:r().t("neo","The maximum number of blocks of this type allowed under one parent block or at the top level."),fullWidth:!1,value:i>0?i:null,errors:t.maxSiblingBlocks,attributes:{min:0,style:"width: 80px;","data-neo-bts":"input.maxSiblingBlocks"}}),"\n          ").concat(this._field({id:m,label:r().t("neo","Child Blocks"),instructions:r().t("neo","Which block types do you want to allow as children?"),input:'\n              <div class="checkbox-select" data-neo-bts="input.childBlocks">\n                <div>\n                  <input type="hidden" name="'.concat(g,'">\n                  <input type="checkbox" value="*" id="').concat(m,'" class="all checkbox" name="').concat(g,'">\n                  <label for="').concat(m,'"><strong>').concat(r().t("neo","All"),'</strong></label>\n                </div>\n                <div data-neo-bts="container.childBlocks"></div>\n              </div>')}),'\n          <div data-neo-bts="container.maxChildBlocks">\n            ').concat(this._input({type:"number",id:v,name:b,label:r().t("neo","Max Child Blocks"),instructions:r().t("neo","The maximum number of child blocks this block type is allowed to have."),fullWidth:!1,value:a>0?a:null,errors:t.maxChildBlocks,attributes:{min:0,style:"width: 80px;","data-neo-bts":"input.maxChildBlocks"}}),'\n          </div>\n          <div data-neo-bts="container.topLevel">\n            ').concat(this._lightswitch({id:k,name:B,label:r().t("neo","Top Level"),instructions:r().t("neo","Will this block type be allowed at the top level?"),checked:this.getTopLevel(),attributes:{"data-neo-bts":"input.topLevel"}}),'\n          </div>\n        </div>\n        <hr>\n        <a class="error delete" data-neo-bts="button.delete">').concat(r().t("neo","Delete block type"),"</a>\n      </div>"))},_generateChildBlocksCheckbox:function(t){y.enter(this._templateNs);var e=y.value("childBlock-"+t.getId(),"-"),i=y.fieldName("childBlocks");return y.leave(),n()('\n      <div>\n        <input type="checkbox" value="'.concat(t.getHandle(),'" id="').concat(e,'" class="checkbox" name="').concat(i,'[]" data-neo-btsc="input">\n        <label for="').concat(e,'" data-neo-btsc="text.label">').concat(t.getName(),"</label>\n      </div>"))},getFocusInput:function(){return this.$nameInput},getId:function(){return this._id},isNew:function(){return/^new/.test(this.getId())},getErrors:function(){return this._errors},setSortOrder:function(t){this.base(t),this.$sortOrderInput.val(this.getSortOrder())},getName:function(){return this._name},setName:function(t){if(t!==this._name){var e=this._name;this._name=t,this.$nameInput.val()!==this._name&&this.$nameInput.val(this._name),this.trigger("change",{property:"name",oldValue:e,newValue:this._name})}},getHandle:function(){return this._handle},setHandle:function(t){if(t!==this._handle){var e=this._handle;this._handle=t,this.$handleInput.val()!==this._handle&&this.$handleInput.val(this._handle),this.trigger("change",{property:"handle",oldValue:e,newValue:this._handle})}},getMaxBlocks:function(){return this._maxBlocks},setMaxBlocks:function(t){var e=this._maxBlocks,n=Math.max(0,0|t);0===n&&this.$maxBlocksInput.val(null),e!==n&&(this._maxBlocks=n,this._maxBlocks>0&&parseInt(this.$maxBlocksInput.val())!==this._maxBlocks&&this.$maxBlocksInput.val(this._maxBlocks),this.trigger("change",{property:"maxBlocks",oldValue:e,newValue:this._maxBlocks}))},getMaxSiblingBlocks:function(){return this._maxSiblingBlocks},setMaxSiblingBlocks:function(t){var e=this._maxSiblingBlocks,n=Math.max(0,0|t);0===n&&this.$maxSiblingBlocksInput.val(null),e!==n&&(this._maxSiblingBlocks=n,this._maxSiblingBlocks>0&&parseInt(this.$maxSiblingBlocksInput.val())!==this._maxSiblingBlocks&&this.$maxSiblingBlocksInput.val(this._maxSiblingBlocks),this.trigger("change",{property:"maxSiblingBlocks",oldValue:e,newValue:this._maxSiblingBlocks}))},getMaxChildBlocks:function(){return this._maxChildBlocks},setMaxChildBlocks:function(t){var e=this._maxChildBlocks,n=Math.max(0,0|t);0===n&&this.$maxChildBlocksInput.val(null),e!==n&&(this._maxChildBlocks=n,this._maxChildBlocks>0&&parseInt(this.$maxChildBlocksInput.val())!==this._maxChildBlocks&&this.$maxChildBlocksInput.val(this._maxChildBlocks),this.trigger("change",{property:"maxChildBlocks",oldValue:e,newValue:this._maxChildBlocks}))},getTopLevel:function(){return this._topLevel},setTopLevel:function(t){var e=this._topLevel,n=!!t;e!==n&&(this._topLevel=n,this._topLevelLightswitch&&this._topLevelLightswitch.on!==this._topLevel&&(this._topLevelLightswitch.on=this._topLevel,this._topLevelLightswitch.toggle()),this.trigger("change",{property:"topLevel",oldValue:e,newValue:this._topLevel}))},getChildBlocks:function(){var t=this._childBlocksSelect,e=[];return!!t.$all.prop("checked")||(t.$options.each((function(t){var i=n()(this);i.prop("checked")&&e.push(i.val())})),e.length>0&&e)},setChildBlocks:function(t){var e=this._childBlocksSelect;if(!0===t||"*"===t)e.$all.prop("checked",!0),e.onAllChange();else if(Array.isArray(t)){e.$all.prop("checked",!1);var n,i=T(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;e.$options.filter('[value="'.concat(a,'"]')).prop("checked",!0)}}catch(t){i.e(t)}finally{i.f()}}else e.$all.prop("checked",!1),e.$options.prop("checked",!1);this._refreshMaxChildBlocks(!1)},addChildBlockType:function(t){var e=this;if(!this._childBlockTypes.includes(t)){var n=t.getSettings(),i=this._generateChildBlocksCheckbox(n);this._childBlockTypes.push(t),this.$childBlocksContainer.append(i),this._refreshChildBlocks();var a=this._childBlocksSelect,o=a.$all.prop("checked");a.$options=a.$options.add(i.find("input")),o&&a.onAllChange();var s=".childBlock"+this.getId();n.on("change"+s,(function(n){return e["@onChildBlockTypeChange"](n,t,i)})),n.on("destroy"+s,(function(n){return e.removeChildBlockType(t)}))}},removeChildBlockType:function(t){var e=this._childBlockTypes.indexOf(t);if(e>=0){this._childBlockTypes.splice(e,1);var n=t.getSettings(),i=this.$childBlocksContainer.children().eq(e);i.remove();var a=this._childBlocksSelect;a.$options=a.$options.remove(i.find("input"));var o=".childBlock"+this.getId();n.off(o),this._refreshChildBlocks()}},_refreshChildBlocks:function(){var t=Array.from(this._childBlockTypes),e=this.$childBlocksContainer.children(),n=function(n){return e.get(t.indexOf(n))};this._childBlockTypes=this._childBlockTypes.sort((function(t,e){return t.getSettings().getSortOrder()-e.getSettings().getSortOrder()})),e.remove();var i,a=T(this._childBlockTypes);try{for(a.s();!(i=a.n()).done;){var o=n(i.value);this.$childBlocksContainer.append(o)}}catch(t){a.e(t)}finally{a.f()}},_refreshMaxChildBlocks:function(t){var e=this;t=!a().prefersReducedMotion()&&("boolean"!=typeof t||t);var n=!!this.getChildBlocks();t?n?this.$maxChildBlocksContainer.hasClass("hidden")&&this.$maxChildBlocksContainer.removeClass("hidden").css({opacity:0,marginBottom:-this.$maxChildBlocksContainer.outerHeight()}).velocity({opacity:1,marginBottom:24},"fast"):this.$maxChildBlocksContainer.hasClass("hidden")||this.$maxChildBlocksContainer.css({opacity:1,marginBottom:24}).velocity({opacity:0,marginBottom:-this.$maxChildBlocksContainer.outerHeight()},"fast",(function(){e.$maxChildBlocksContainer.addClass("hidden")})):this.$maxChildBlocksContainer.toggleClass("hidden",!n).css("margin-bottom",n?24:"")},"@onChildBlockTypeChange":function(t,e,n){var i=n.find("[data-neo-btsc]"),a=i.filter('[data-neo-btsc="input"]'),o=i.filter('[data-neo-btsc="text.label"]');switch(t.property){case"name":o.text(t.newValue);break;case"handle":a.val(t.newValue);break;case"sortOrder":this._refreshChildBlocks()}}},{_totalNewBlockTypes:0,getNewId:function(){return"new".concat(this._totalNewBlockTypes++)}});function A(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return M(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,r=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){r=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(r)throw o}}}}function M(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var j={namespace:[],html:"",layout:null,id:-1,blockId:null,blockName:""};const F=a().Base.extend({_templateNs:[],_blockName:"",init:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Object.assign({},j,e),this._templateNs=y.parse(e.namespace),this._id=0|e.id,this._blockTypeId=e.blockTypeId,this.setBlockName(e.blockName),this.$container=n()(e.html).find(".layoutdesigner"),this.$container.removeAttr("id");var i=this.$container.find('input[name="fieldLayout"]');i.length>0&&(i[0].name="neoBlockType".concat(this._blockTypeId,"[fieldLayout]"),e.layout&&(i[0].value=JSON.stringify(e.layout))),y.enter(this._templateNs),this._fld=new(r().FieldLayoutDesigner)(this.$container,{customizableTabs:!0,customizableUi:!0}),y.leave();var a=function(){var e="[data-type=benf-neo-fieldlayoutelements-ChildBlocksUiElement]",i=t._fld.$uiLibraryElements.filter(e),a=t._fld.$tabContainer.find(e);i.toggleClass("hidden",a.length>0||n()("body.dragging .draghelper"+e).length>0),a.hasClass("velocity-animating")&&a.removeClass("hidden")};a(),this._tabObserver=new window.MutationObserver(a),this._tabObserver.observe(this._fld.$tabContainer[0],{childList:!0,subtree:!0})},getId:function(){return this._id},getBlockTypeId:function(){return this._blockTypeId},getBlockName:function(){return this._blockName},setBlockName:function(t){this._blockName=t},getConfig:function(){var t,e={tabs:[]},n=A(this._fld.config.tabs);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=[],s=A(a.elements);try{for(s.s();!(i=s.n()).done;){var r=i.value,l={};for(var c in r)l[c]="required"!==c||r[c]?r[c]:"";o.push(l)}}catch(t){s.e(t)}finally{s.f()}e.tabs.push({elements:o,name:a.name.slice()})}}catch(t){n.e(t)}finally{n.f()}return e}});var H={namespace:[]};const V=k.extend({_templateNs:[],init:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.base(e),e=Object.assign({},H,e);var n=this.getSettings();this._templateNs=y.parse(e.namespace),this.$container=this._generateGroup(n);var i=this.$container.find("[data-neo-g]");this.$nameText=i.filter('[data-neo-g="text.name"]'),this.$moveButton=i.filter('[data-neo-g="button.move"]'),n&&(n.on("change",(function(){return t._updateTemplate()})),n.on("destroy",(function(){return t.trigger("destroy")}))),this.deselect()},_generateGroup:function(t){return n()('\n      <div class="nc_sidebar_list_item type-heading">\n        <div class="label" data-neo-g="text.name">'.concat(t.getName(),'</div>\n        <a class="move icon" title="').concat(r().t("neo","Reorder"),'" role="button" data-neo-g="button.move"></a>\n      </div>'))},toggleSelect:function(t){this.base(t);var e=this.getSettings(),n=this.isSelected();e&&e.$container.toggleClass("hidden",!n),this.$container.toggleClass("is-selected",n)},_updateTemplate:function(){var t=this.getSettings();t&&this.$nameText.text(t.getName())}});var E={namespace:[],id:null,sortOrder:0,name:""};const q=I.extend({_templateNs:[],$sortOrderInput:new(n()),$nameInput:new(n()),$handleInput:new(n()),$maxBlocksInput:new(n()),init:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Object.assign({},E,e),this._templateNs=y.parse(e.namespace),this._id=e.id,this.setSortOrder(e.sortOrder),this.setName(e.name),this.$container=this._generateGroupSettings();var n=this.$container.find("[data-neo-gs]");this.$sortOrderInput=n.filter('[data-neo-gs="input.sortOrder"]'),this.$nameInput=n.filter('[data-neo-gs="input.name"]'),this.$deleteButton=n.filter('[data-neo-gs="button.delete"]'),this.addListener(this.$nameInput,"keyup change",(function(){return t.setName(t.$nameInput.val())})),this.addListener(this.$deleteButton,"click",(function(){window.confirm(r().t("neo","Are you sure you want to delete this group?"))&&t.destroy()}))},_generateGroupSettings:function(){y.enter(this._templateNs);var t=y.fieldName("sortOrder"),e=y.value("name","-"),i=y.fieldName("name");return y.leave(),n()('\n      <div>\n      <input type="hidden" name="'.concat(t,'" value="').concat(this.getSortOrder(),'" data-neo-gs="input.sortOrder">\n      <div>\n        ').concat(this._input({type:"text",id:e,name:i,label:r().t("neo","Name"),instructions:r().t("neo","This can be left blank if you just want an unlabeled separator."),value:this.getName(),attributes:{"data-neo-gs":"input.name"}}),'\n      </div>\n      <hr>\n      <a class="error delete" data-neo-gs="button.delete">').concat(r().t("neo","Delete group"),"</a>\n    </div>"))},getFocusInput:function(){return this.$nameInput},getId:function(){return this._id},setSortOrder:function(t){this.base(t),this.$sortOrderInput.val(this.getSortOrder())},getName:function(){return this._name},setName:function(t){if(t!==this._name){var e=this._name;this._name=t,this.$nameInput.val(this._name),this.trigger("change",{property:"name",oldValue:e,newValue:this._name})}}},{_totalNewGroups:0,getNewId:function(){return"new".concat(this._totalNewGroups++)}});function G(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=R(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,r=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){r=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(r)throw o}}}}function U(t){return function(t){if(Array.isArray(t))return W(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||R(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(t,e){if(t){if("string"==typeof t)return W(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(t,e):void 0}}function W(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var D={namespace:[],blockTypes:[],groups:[],fieldLayoutHtml:""};const P=a().Base.extend({_templateNs:[],_items:[],init:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Object.assign({},D,e);var i=r().formatInputId(e.namespace),o=n()("#".concat(i,"-neo-configurator")),s=o.children(".field").children(".input");this._templateNs=y.parse(e.namespace),this._fieldLayoutHtml=e.fieldLayoutHtml,this._items=[],this.$container=this._generateConfigurator(),s.append(this.$container);var l=this.$container.find("[data-neo]");this.$mainContainer=l.filter('[data-neo="container.main"]'),this.$sidebarContainer=l.filter('[data-neo="container.sidebar"]'),this.$blockTypesContainer=l.filter('[data-neo="container.blockTypes"]'),this.$settingsContainer=l.filter('[data-neo="container.settings"]'),this.$fieldLayoutContainer=l.filter('[data-neo="container.fieldLayout"]'),this.$blockTypeButton=l.filter('[data-neo="button.blockType"]'),this.$groupButton=l.filter('[data-neo="button.group"]'),this.$settingsButton=l.filter('[data-neo="button.settings"]'),this.$fieldLayoutButton=l.filter('[data-neo="button.fieldLayout"]'),this._itemSort=new(a().DragSort)(null,{container:this.$blockTypeItemsContainer,handle:'[data-neo-bt="button.move"], [data-neo-g="button.move"]',axis:"y",onSortChange:function(){return t._updateItemOrder()}});var c,d=[],u=[].concat(U(this._templateNs),["blockTypes"]),h=[].concat(U(this._templateNs),["groups"]),p=G(e.blockTypes);try{var f=function(){var e=c.value,n=new O({namespace:[].concat(U(u),[e.id]),sortOrder:e.sortOrder,id:e.id,name:e.name,handle:e.handle,maxBlocks:e.maxBlocks,maxSiblingBlocks:e.maxSiblingBlocks,maxChildBlocks:e.maxChildBlocks,topLevel:e.topLevel,errors:e.errors,childBlockTypes:d.filter((function(t){return t instanceof _}))}),i=new F({namespace:[].concat(U(u),[e.id]),html:e.fieldLayoutHtml,id:e.fieldLayoutId,blockTypeId:e.id}),a=new _({namespace:u,settings:n,fieldLayout:i});window.localStorage.getItem("neo:copyBlockType")&&a.$actionsMenu.find('[data-action="paste"]').parent().removeClass("disabled"),a.on("copy.configurator",(function(){return t._copyBlockType(a)})),a.on("paste.configurator",(function(){return t._pasteBlockType()})),a.on("clone.configurator",(function(){return t._createBlockTypeFrom(a)})),d.push(a)};for(p.s();!(c=p.n()).done;)f()}catch(t){p.e(t)}finally{p.f()}var m,g=G(e.groups);try{for(g.s();!(m=g.n()).done;){var v=m.value,b=new q({namespace:[].concat(U(h),[v.id]),sortOrder:v.sortOrder,id:v.id,name:v.name}),k=new V({namespace:h,settings:b});d.push(k)}}catch(t){g.e(t)}finally{g.f()}var B,x=G(d.sort((function(t,e){return t.getSettings().getSortOrder()-e.getSettings().getSortOrder()})));try{for(x.s();!(B=x.n()).done;){var $=B.value;this.addItem($)}}catch(t){x.e(t)}finally{x.f()}var C,w=G(this.getBlockTypes());try{var S=function(){var t=C.value.getSettings(),n=e.blockTypes.find((function(e){return e.handle===t.getHandle()}));t.setChildBlocks(n.childBlocks)};for(w.s();!(C=w.n()).done;)S()}catch(t){w.e(t)}finally{w.f()}this.selectTab("settings"),this.addListener(this.$blockTypeButton,"click","@newBlockType"),this.addListener(this.$groupButton,"click","@newGroup"),this.addListener(this.$settingsButton,"click",(function(){return t.selectTab("settings")})),this.addListener(this.$fieldLayoutButton,"click",(function(){return t.selectTab("fieldLayout")}))},_generateConfigurator:function(){return n()('\n      <div class="nc_sidebar" data-neo="container.sidebar">\n        <div class="nc_sidebar_title">'.concat(r().t("neo","Block Types"),'</div>\n        <div class="nc_sidebar_list" data-neo="container.blockTypes"></div>\n        <div class="nc_sidebar_buttons btngroup">\n          <a class="btn add icon" role="button" data-neo="button.blockType">').concat(r().t("neo","Block type"),'</a>\n          <a class="btn type-heading" role="button" data-neo="button.group">').concat(r().t("neo","Group"),'</a>\n        </div>\n      </div>\n      <div class="nc_main" data-neo="container.main">\n        <div class="nc_main_tabs">\n          <a class="nc_main_tabs_tab is-selected" role="button" data-neo="button.settings">').concat(r().t("neo","Settings"),'</a>\n          <a class="nc_main_tabs_tab" role="button" data-neo="button.fieldLayout">').concat(r().t("neo","Field Layout"),'</a>\n        </div>\n        <div class="nc_main_content" data-neo="container.settings"></div>\n        <div class="nc_main_content" data-neo="container.fieldLayout"></div>\n      </div>'))},addItem:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=t.getSettings();if(this._insertAt(t.$container,n),this._itemSort.addItems(t.$container),i&&this.$settingsContainer.append(i.$container),this.$mainContainer.removeClass("hidden"),this.addListener(t.$container,"click","@selectItem"),t.on("destroy.configurator",(function(){return e.removeItem(t,!1)})),t instanceof _){var a=t.getFieldLayout();a&&this.$fieldLayoutContainer.append(a.$container)}if(this._items.push(t),this._updateItemOrder(),t instanceof _){var o,s=G(this.getBlockTypes());try{for(s.s();!(o=s.n()).done;){var r=o.value,l=r.getSettings();l&&l.addChildBlockType(t)}}catch(t){s.e(t)}finally{s.f()}}this.trigger("addItem",{item:t,index:n})},removeItem:function(t,e){if(e="boolean"==typeof e&&e){var n=r().t("neo","Are you sure you want to delete this {type}?",{type:t instanceof _?"block type":t instanceof V?"group":"item"});window.confirm(n)&&this.removeItem(t,!1)}else{var i=t.getSettings();if(this._itemSort.removeItems(t.$container),t.$container.remove(),i&&i.$container.remove(),t instanceof _){var a=t.getFieldLayout();a&&a.$container.remove()}this.removeListener(t.$container,"click"),t.off(".configurator"),this._updateItemOrder(),0===this._items.length&&this.$mainContainer.addClass("hidden"),this.trigger("removeItem",{item:t})}},getItems:function(){return Array.from(this._items)},getItemByElement:function(t){return this._items.find((function(e){return e.$container.is(t)}))},getSelectedItem:function(){return this._items.find((function(t){return t.isSelected()}))},selectItem:function(t,e){e="boolean"!=typeof e||e;var n,i=t?t.getSettings():null,o=G(this._items);try{for(o.s();!(n=o.n()).done;){var s=n.value,r=s===t;if(s.toggleSelect(r),r){var l=!(s instanceof _);this.$fieldLayoutButton.toggleClass("hidden",l),l&&this.selectTab("settings")}}}catch(t){o.e(t)}finally{o.f()}e&&i&&!a().isMobileBrowser()&&setTimeout((function(){return i.getFocusInput().focus()}),100)},getBlockTypes:function(){return this._items.filter((function(t){return t instanceof _}))},getGroups:function(){return this._items.filter((function(t){return t instanceof V}))},selectTab:function(t){this.$settingsContainer.toggleClass("hidden","settings"!==t),this.$fieldLayoutContainer.toggleClass("hidden","fieldLayout"!==t),this.$settingsButton.toggleClass("is-selected","settings"===t),this.$fieldLayoutButton.toggleClass("is-selected","fieldLayout"===t)},_getNewFieldLayoutHtml:function(){return this._fieldLayoutHtml.replace(/<input type="hidden" name="fieldLayout" value="{&quot;uid&quot;:&quot;([a-f0-9-]+)&quot;}" data-config-input>/,'<input type="hidden" name="fieldLayout" value="{&quot;uid&quot;:&quot;'.concat(m(),'&quot;}" data-config-input>'))},_updateItemOrder:function(){var t=this,e=[];this._itemSort.$items.each((function(n,i){var a=t.getItemByElement(i);if(a){var o=a.getSettings();o&&o.setSortOrder(n+1),e.push(a)}})),this._items=e},_createBlockTypeFrom:function(t){var e=this,i=[].concat(U(this._templateNs),["blockTypes"]),a=O.getNewId(),o=this.getSelectedItem(),s=o?o.getSettings().getSortOrder():-1;if(null===t){var l=new O({childBlockTypes:this.getBlockTypes(),id:a,namespace:[].concat(U(i),[a]),sortOrder:this._items.length}),c=new F({blockTypeId:a,html:this._getNewFieldLayoutHtml(),namespace:[].concat(U(i),[a])});this._initBlockType(i,l,c,s)}else{var d=t.getSettings(),u=new O({childBlocks:d.getChildBlocks(),childBlockTypes:this.getBlockTypes(),handle:"".concat(d.getHandle(),"_").concat(Date.now()),id:a,maxBlocks:d.getMaxBlocks(),maxChildBlocks:d.getMaxChildBlocks(),maxSiblingBlocks:d.getMaxSiblingBlocks(),name:d.getName(),namespace:[].concat(U(i),[a]),sortOrder:this._items.length,topLevel:d.getTopLevel()}),h=t.getFieldLayout().getConfig();if(h.tabs.length>0){var p=n()('<div class="nc_sidebar_list_item type-spinner"><span class="spinner"></span></div>');this._insertAt(p,s),r().postActionRequest("neo/configurator/render-field-layout",{layout:h},(function(t){var n=new F({blockTypeId:a,html:t.success?t.html:e._getNewFieldLayoutHtml(),namespace:[].concat(U(i),[a])});e.$blockTypesContainer.find(".type-spinner").remove(),e._initBlockType(i,u,n,s)}))}else{var f=new F({blockTypeId:a,html:this._getNewFieldLayoutHtml(),namespace:[].concat(U(i),[a])});this._initBlockType(i,u,f,s)}}},_initBlockType:function(t,e,n,i){var a=this,o=new _({namespace:t,settings:e,fieldLayout:n});this.addItem(o,i),this.selectItem(o),this.selectTab("settings"),o.on("copy.configurator",(function(){return a._copyBlockType(o)})),o.on("paste.configurator",(function(){return a._pasteBlockType()})),o.on("clone.configurator",(function(){return a._createBlockTypeFrom(o)}))},_copyBlockType:function(t){var e=t.getSettings(),n={childBlocks:e.getChildBlocks(),handle:e.getHandle(),layout:t.getFieldLayout().getConfig(),maxBlocks:e.getMaxBlocks(),maxChildBlocks:e.getMaxChildBlocks(),maxSiblingBlocks:e.getMaxSiblingBlocks(),name:e.getName(),topLevel:e.getTopLevel()};window.localStorage.setItem("neo:copyBlockType",JSON.stringify(n)),this.getBlockTypes().forEach((function(t){return t.$actionsMenu.find('[data-action="paste"]').parent().removeClass("disabled")}))},_pasteBlockType:function(){var t=window.localStorage.getItem("neo:copyBlockType");if(t){var e=JSON.parse(t),n=this.getBlockTypes().map((function(t){return t.getSettings().getHandle()})),i=Array.isArray(e.childBlocks)?e.childBlocks.filter((function(t){return n.includes(t)})):!!e.childBlocks||[],a=new O({childBlocks:i,childBlockTypes:this.getBlockTypes(),handle:e.handle,maxBlocks:e.maxBlocks,maxChildBlocks:e.maxChildBlocks,maxSiblingBlocks:e.maxSiblingBlocks,name:e.name,topLevel:e.topLevel}),o=new F({html:this._getNewFieldLayoutHtml(),layout:e.layout}),s=new _({settings:a,fieldLayout:o});this._createBlockTypeFrom(s)}},_insertAt:function(t,e){var i=n()(t);e>=0&&e<this._items.length?i.insertAt(e,this.$blockTypesContainer):this.$blockTypesContainer.append(i)},"@newBlockType":function(){this._createBlockTypeFrom(null)},"@newGroup":function(){var t=[].concat(U(this._templateNs),["groups"]),e=q.getNewId(),n=new q({namespace:[].concat(U(t),[e]),sortOrder:this._items.length,id:e}),i=new V({namespace:t,settings:n}),a=this.getSelectedItem(),o=a?a.getSettings().getSortOrder():-1;this.addItem(i,o),this.selectItem(i)},"@selectItem":function(t){var e=this.getItemByElement(t.currentTarget);this.selectItem(e)}});var J="undefined"!=typeof window?window:void 0,z=[];J.Neo={Configurator:P,configurators:z,createConfigurator:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=new P(t);return z.push(e),e}}})();