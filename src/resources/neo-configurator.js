(()=>{"use strict";var t={94:(t,e,n)=>{n.d(e,{Z:()=>s});var i=n(81),a=n.n(i),o=n(645),r=n.n(o)()(a());r.push([t.id,".neo-configurator>.field>.input{display:flex;min-height:400px}[data-neo='template.fld']{display:none}.nc_sidebar{width:202px;border:1px solid #ebebeb;background-color:#fafafa}.nc_sidebar_title{padding:10px 24px;border-bottom:1px solid #ebebeb;background-image:linear-gradient(#f7f7f8, #f4f5f6);color:#8f98a3}.nc_sidebar_list{margin:0 -1px}.nc_sidebar_list:not(:empty){padding-top:10px}.nc_sidebar_list_item{cursor:default;position:relative;margin-top:-1px;padding:10px 40px;border:1px solid #ebebeb;background-color:#fcfcfc;transition:margin-left 0.15s}.nc_sidebar_list_item::before{content:'';display:block;position:absolute;top:-1px;bottom:-1px;left:0;width:0;border-top:1px solid #ebebeb;border-bottom:1px solid #ebebeb;background-color:#fafafa;transition:left 0.15s, width 0.15s}.nc_sidebar_list_item>.label{color:#29323d}.nc_sidebar_list_item>.label:empty{font-style:italic;color:#8f98a3}.nc_sidebar_list_item>.label:empty::before{content:\"(blank)\"}.nc_sidebar_list_item>.move,.nc_sidebar_list_item>.settings{position:absolute;width:25px;text-align:center}.nc_sidebar_list_item>.move{display:block;top:10px;left:7px}.nc_sidebar_list_item>.settings{display:inline-flex;top:13px;right:7px;color:rgba(41,50,61,0.25)}.nc_sidebar_list_item>.settings:hover{color:#0d78f2}.nc_sidebar_list_item.is-selected{z-index:1;border-color:#dedede;background-color:#ececec}.nc_sidebar_list_item.is-child{margin-left:10px}.nc_sidebar_list_item.is-child::before{left:-10px;width:9px}.nc_sidebar_list_item.has-errors{z-index:2;border-color:#efc7c7;background-color:#f9e0e0}.nc_sidebar_list_item.has-errors>.label{color:#da5a47}.nc_sidebar_list_item.has-errors.is-selected{border-color:#e1bbbb;background-color:#efc7c7}.nc_sidebar_list_item.type-heading{margin-top:9px}.nc_sidebar_list_item.type-heading:first-child{margin-top:0}.nc_sidebar_list_item.type-heading>.label{font-size:11px;font-weight:bold;text-transform:uppercase;color:rgba(63,77,90,0.8)}.nc_sidebar_list_item.type-heading>.label:empty{font-weight:normal;color:#8f98a3}.nc_sidebar_buttons{padding:14px}.nc_sidebar_buttons>.btn{padding-left:12px;padding-right:12px}.nc_sidebar_buttons>.btn.type-heading{font-size:11px;font-weight:bold;text-transform:uppercase;color:rgba(63,77,90,0.8)}.nc_main{flex-grow:1;flex-shrink:9999;border:1px solid #ebebeb}body.ltr .nc_main{border-left:0}body.rtl .nc_main{border-right:0}.nc_main_tabs{display:flex;border-bottom:1px solid #ebebeb;background-image:linear-gradient(#f7f7f8, #f4f5f6)}.nc_main_tabs_tab{display:block;padding:10px 24px;color:#555}.nc_main_tabs_tab:hover{text-decoration:none;color:#0d78f2}.nc_main_tabs_tab.is-selected{margin-bottom:-1px;padding-bottom:11px;border-left:1px solid #ebebeb;border-right:1px solid #ebebeb;background-color:#fff;color:#29323d}body.ltr .nc_main_tabs_tab.is-selected:first-child{border-left:0}body.rtl .nc_main_tabs_tab.is-selected:first-child{border-right:0}.nc_main_content{padding:24px}.nc_main_content .checkbox+label{color:#576575}.nc_main_content .checkbox+label:empty::after{content:'(blank)';font-size:inherit;font-style:italic;color:#8f98a3}body.ltr .nc_main_content .checkbox+label:empty{padding-left:20px}body.rtl .nc_main_content .checkbox+label:empty{padding-right:20px}\n",""]);const s=r},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,a,o){"string"==typeof t&&(t=[[null,t,void 0]]);var r={};if(i)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(r[l]=!0)}for(var c=0;c<t.length;c++){var d=[].concat(t[c]);i&&r[d[0]]||(void 0!==o&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=o),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),a&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=a):d[4]="".concat(a)),e.push(d))}},e}},81:t=>{t.exports=function(t){return t[1]}},379:t=>{var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var o={},r=[],s=0;s<t.length;s++){var l=t[s],c=i.base?l[0]+i.base:l[0],d=o[c]||0,u="".concat(c," ").concat(d);o[c]=d+1;var h=n(u),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)e[h].references++,e[h].updater(p);else{var f=a(p,i);i.byIndex=s,e.splice(s,0,{identifier:u,updater:f,references:1})}r.push(u)}return r}function a(t,e){var n=e.domAPI(e);n.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,a){var o=i(t=t||[],a=a||{});return function(t){t=t||[];for(var r=0;r<o.length;r++){var s=n(o[r]);e[s].references--}for(var l=i(t,a),c=0;c<o.length;c++){var d=n(o[c]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}o=l}}},569:t=>{var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,a&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(i){var a=e[i];if(void 0!==a)return a.exports;var o=e[i]={id:i,exports:{}};return t[i](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{const t=jQuery;var e=n.n(t);e().fn.insertAt=function(t,e){return this.each((function(){0===t?e.prepend(this):e.children().eq(t-1).after(this)}))};const i=Garnish;var a=n.n(i);const o=Craft;var r=n.n(o);function s(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}const c={_stack:[[]],enter:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("string"==typeof t&&(t=this.fromFieldName(t)),e){var n=this.getNamespace();n.push.apply(n,s(t)),t=n}this._stack.push(t)},enterByFieldName:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.enter(this.fromFieldName(t),e)},leave:function(){return this._stack.length>1?this._stack.pop():this.getNamespace()},getNamespace:function(){return Array.from(this._stack[this._stack.length-1])},parse:function(t){return"string"==typeof t?t.indexOf("[")>-1?this.fromFieldName(t):t.indexOf("-")>-1?t.split("-"):t.indexOf(".")>-1?t.split("."):t:Array.from(t)},value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n=this.getNamespace();return n.push(t),n.join(e)},fieldName:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=this.toFieldName();return e?e+t.replace(/([^'"[\]]+)([^'"]*)/,"[$1]$2"):t},toString:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"-";return this.getNamespace().join(t)},toFieldName:function(){var t=this.getNamespace();switch(t.length){case 0:return"";case 1:return t[0]}return t[0]+"["+t.slice(1).join("][")+"]"},fromFieldName:function(t){return t.match(/[^[\]\s]+/g)||[]}};var d={settings:null};const u=a().Base.extend({_selected:!1,init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=Object.assign({},d,t),this._settings=t.settings},getSettings:function(){return this._settings},select:function(){this.toggleSelect(!0)},deselect:function(){this.toggleSelect(!1)},toggleSelect:function(t){this._selected="boolean"==typeof t?t:!this._selected,this.trigger("toggleSelect",{selected:this._selected})},isSelected:function(){return this._selected}});var h={namespace:[],fieldLayout:null};const p=u.extend({_templateNs:[],init:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.base(e);var n=this.getSettings();e=Object.assign({},h,e),this._templateNs=c.parse(e.namespace),this._fieldLayout=e.fieldLayout,this.$container=this._generateBlockType(n);var i=this.$container.find("[data-neo-bt]");this.$nameText=i.filter('[data-neo-bt="text.name"]'),this.$moveButton=i.filter('[data-neo-bt="button.move"]'),this.$actionsButton=i.filter('[data-neo-bt="button.actions"]'),this.$actionsMenu=i.filter('[data-neo-bt="container.menu"]'),this._actionsMenu=new(a().MenuBtn)(this.$actionsButton),this._actionsMenu.on("optionSelect",(function(e){return t["@actionSelect"](e)})),this.addListener(this.$actionsButton,"click",(function(t){return t.stopPropagation()})),n&&(n.on("change",(function(){return t._updateTemplate()})),n.on("destroy",(function(){return t.trigger("destroy")})),this._updateTemplate()),this.deselect()},_generateBlockType:function(t){return e()('\n      <div class="nc_sidebar_list_item'.concat(t.getErrors().length>0?" has-errors":"",'">\n        <div class="label" data-neo-bt="text.name">').concat(t.getName(),'</div>\n        <a class="move icon" title="').concat(r().t("neo","Reorder"),'" role="button" data-neo-bt="button.move"></a>\n        <a class="settings icon menubtn" title="').concat(r().t("neo","Actions"),'" role="button" data-neo-bt="button.actions"></a>\n        <div class="menu" data-neo-bt="container.menu">\n          <ul class="padded">\n            <li><a data-icon="field" data-action="copy">').concat(r().t("neo","Copy"),'</a></li>\n            <li class="disabled"><a data-icon="brush" data-action="paste">').concat(r().t("neo","Paste"),'</a></li>\n            <li><a data-icon="share" data-action="clone">').concat(r().t("neo","Clone"),'</a></li>\n            <li><a class="error" data-icon="remove" data-action="delete">').concat(r().t("neo","Delete"),"</a></li>\n          </ul>\n        </div>\n      </div>"))},getFieldLayout:function(){return this._fieldLayout},toggleSelect:function(t){this.base(t);var e=this.getSettings(),n=this.getFieldLayout(),i=this.isSelected();e&&e.$container.toggleClass("hidden",!i),n&&n.$container.toggleClass("hidden",!i),this.$container.toggleClass("is-selected",i)},_updateTemplate:function(){var t=this.getSettings(),e=this.getFieldLayout();t&&(this.$nameText.text(t.getName()),this.$container.toggleClass("is-child",!t.getTopLevel()),e&&e.setBlockName(t.getName()))},"@actionSelect":function(t){var n=e()(t.option);if(!n.hasClass("disabled"))switch(n.attr("data-action")){case"copy":this.trigger("copy");break;case"paste":this.trigger("paste");break;case"clone":this.trigger("clone");break;case"delete":window.confirm(r().t("neo","Are you sure you want to delete this block type?"))&&this.getSettings().destroy()}}});function f(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,o=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw o}}}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var g={id:!1,label:!1,instructions:!1,required:!1,locale:!1,input:"",warning:!1,errors:!1},b={type:"text",attributes:{},id:"",name:"",value:"",class:"",fullWidth:!0},v={attributes:{},name:"",checked:!1};const y=a().Base.extend({$container:new(e()),_sortOrder:0,getSortOrder:function(){return this._sortOrder},setSortOrder:function(t){var e=this._sortOrder;this._sortOrder=0|t,e!==this._sortOrder&&this.trigger("change",{property:"sortOrder",oldValue:e,newValue:this._sortOrder})},getFocusElement:function(){return new(e())},destroy:function(){this.trigger("destroy")},_field:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=Object.assign({},g,t);var e=[];if(e.push('\n      <div class="field">'),(t.label||t.instructions)&&(t.label&&(e.push('\n        <div class="heading">\n          <label'.concat(t.required?' class="required"':"").concat(t.id?' for="'.concat(t.id,'"'):"",">\n            ").concat(t.label)),t.locale&&e.push('\n            <span class="locale">'.concat(t.locale,"</span>")),e.push("\n          </label>\n        </div>")),t.instructions&&e.push('\n        <div class="instructions">'.concat(t.instructions,"</div>"))),e.push('\n        <div class="input'.concat(t.errors?" errors":"",'">\n          ').concat(t.input,"\n        </div>")),t.warning&&e.push('\n        <p class="warning">'.concat(t.warning,"</p>")),t.errors){e.push('\n        <ul class="errors">');var n,i=f(t.errors);try{for(i.s();!(n=i.n()).done;){var a=n.value;e.push("\n          <li>".concat(a,"</li>"))}}catch(t){i.e(t)}finally{i.f()}e.push("\n        </ul>")}return e.push("\n      </div>"),e.join("")},_input:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(t=Object.assign({},b,t)).input='\n      <input class="text'.concat(t.fullWidth?" fullwidth":""," ").concat(t.class,'"\n             type="').concat(t.type,'"\n             id="').concat(t.id,'"\n             name="').concat(t.name,'"\n             value="').concat(t.value,'"\n             ').concat(this._attributes(t.attributes),'\n             autocomplete="off">'),this._field(t)},_lightswitch:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(t=Object.assign({},v,t)).input='\n      <div class="lightswitch'.concat(t.checked?" on":"",'" tabindex="0"').concat(this._attributes(t.attributes),'>\n        <div class="lightswitch-container">\n          <div class="label on"></div>\n          <div class="handle"></div>\n          <div class="label off"></div>\n        </div>\n        <input type="hidden" name="').concat(t.name,'" value="').concat(t.checked?"1":"",'">\n      </div>'),this._field(t)},_attributes:function(t){var e=[];for(var n in t)e.push(" ".concat(n,'="').concat(t[n],'"'));return e.join("")}});function _(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return k(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,o=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw o}}}}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var B={namespace:[],id:null,sortOrder:0,name:"",handle:"",maxBlocks:0,maxSiblingBlocks:0,maxChildBlocks:0,topLevel:!0,childBlocks:null,childBlockTypes:[],errors:{}};const x=y.extend({_templateNs:[],_childBlockTypes:[],$sortOrderInput:new(e()),$nameInput:new(e()),$handleInput:new(e()),$maxBlocksInput:new(e()),$maxSiblingBlocksInput:new(e()),$maxChildBlocksInput:new(e()),init:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Object.assign({},B,e),this._templateNs=c.parse(e.namespace),this._childBlockTypes=[],this._id=e.id,this._errors=e.errors,this.setSortOrder(e.sortOrder),this.setName(e.name),this.setHandle(e.handle),this.setMaxBlocks(e.maxBlocks),this.setMaxSiblingBlocks(e.maxSiblingBlocks),this.setMaxChildBlocks(e.maxChildBlocks),this.setTopLevel(e.topLevel),this.$container=this._generateBlockTypeSettings();var n=this.$container.find("[data-neo-bts]");this.$sortOrderInput=n.filter('[data-neo-bts="input.sortOrder"]'),this.$nameInput=n.filter('[data-neo-bts="input.name"]'),this.$handleInput=n.filter('[data-neo-bts="input.handle"]'),this.$maxBlocksInput=n.filter('[data-neo-bts="input.maxBlocks"]'),this.$maxSiblingBlocksInput=n.filter('[data-neo-bts="input.maxSiblingBlocks"]'),this.$maxChildBlocksInput=n.filter('[data-neo-bts="input.maxChildBlocks"]'),this.$maxChildBlocksContainer=n.filter('[data-neo-bts="container.maxChildBlocks"]'),this.$topLevelInput=n.filter('[data-neo-bts="input.topLevel"]'),this.$topLevelContainer=n.filter('[data-neo-bts="container.topLevel"]'),this.$childBlocksInput=n.filter('[data-neo-bts="input.childBlocks"]'),this.$childBlocksContainer=n.filter('[data-neo-bts="container.childBlocks"]'),this.$deleteButton=n.filter('[data-neo-bts="button.delete"]'),r().initUiElements(this.$container),this._childBlocksSelect=this.$childBlocksInput.data("checkboxSelect"),this._topLevelLightswitch=this.$topLevelInput.data("lightswitch"),this._handleGenerator=new(r().HandleGenerator)(this.$nameInput,this.$handleInput),""!==this.getHandle()&&this._handleGenerator.stopListening();var i,o=_(e.childBlockTypes);try{for(o.s();!(i=o.n()).done;){var s=i.value;this.addChildBlockType(s)}}catch(t){o.e(t)}finally{o.f()}this.setChildBlocks(e.childBlocks),a().Base.prototype.on.call(this._topLevelLightswitch,"change",(function(){return t.setTopLevel(t._topLevelLightswitch.on)})),this.addListener(this.$nameInput,"keyup change",(function(){t.setName(t.$nameInput.val()),t._handleGenerator.listening&&t.setHandle(t.$handleInput.val())})),this.addListener(this.$handleInput,"keyup change textchange",(function(){return t.setHandle(t.$handleInput.val())})),this.addListener(this.$maxBlocksInput,"keyup change",(function(){return t.setMaxBlocks(t.$maxBlocksInput.val())})),this.addListener(this.$maxSiblingBlocksInput,"keyup change",(function(){return t.setSiblingMaxBlocks(t.$maxSiblingBlocksInput.val())})),this.addListener(this.$maxChildBlocksInput,"keyup change",(function(){return t.setMaxChildBlocks(t.$maxChildBlocksInput.val())})),this.addListener(this.$deleteButton,"click",(function(){window.confirm(r().t("neo","Are you sure you want to delete this block type?"))&&t.destroy()})),this.$childBlocksInput.on("change","input",(function(){return t._refreshMaxChildBlocks()}))},_generateBlockTypeSettings:function(){var t=this.getErrors(),n=this.getMaxBlocks(),i=this.getMaxSiblingBlocks(),a=this.getMaxChildBlocks();c.enter(this._templateNs);var o=c.fieldName("sortOrder"),s=c.value("name","-"),l=c.fieldName("name"),d=c.value("handle","-"),u=c.fieldName("handle"),h=c.value("maxBlocks","-"),p=c.fieldName("maxBlocks"),f=c.value("maxSiblingBlocks","-"),m=c.fieldName("maxSiblingBlocks"),g=c.value("childBlocks","-"),b=c.fieldName("childBlocks"),v=c.value("maxChildBlocks","-"),y=c.fieldName("maxChildBlocks"),_=c.value("topLevel","-"),k=c.fieldName("topLevel");return c.leave(),e()('\n      <div>\n        <input type="hidden" name="'.concat(o,'" value="').concat(this.getSortOrder(),'" data-neo-bts="input.sortOrder">\n        <div>\n          ').concat(this._input({type:"text",id:s,name:l,label:r().t("neo","Name"),instructions:r().t("neo","What this block type will be called in the CP."),required:!0,value:this.getName(),errors:t.name,attributes:{"data-neo-bts":"input.name"}}),"\n          ").concat(this._input({type:"text",id:d,name:u,label:r().t("neo","Handle"),instructions:r().t("neo","How you&#8217;ll refer to this block type in the templates."),required:!0,class:"code",value:this.getHandle(),errors:t.handle,attributes:{"data-neo-bts":"input.handle"}}),"\n          ").concat(this._input({type:"number",id:h,name:p,label:r().t("neo","Max Blocks"),instructions:r().t("neo","The maximum number of blocks of this type the field is allowed to have."),fullWidth:!1,value:n>0?n:null,errors:t.maxBlocks,attributes:{min:0,style:"width: 80px;","data-neo-bts":"input.maxBlocks"}}),"\n          ").concat(this._input({type:"number",id:f,name:m,label:r().t("neo","Max Sibling Blocks of This Type"),instructions:r().t("neo","The maximum number of blocks of this type allowed under one parent block or at the top level."),fullWidth:!1,value:i>0?i:null,errors:t.maxSiblingBlocks,attributes:{min:0,style:"width: 80px;","data-neo-bts":"input.maxSiblingBlocks"}}),"\n          ").concat(this._field({id:g,label:r().t("neo","Child Blocks"),instructions:r().t("neo","Which block types do you want to allow as children?"),input:'\n              <div class="checkbox-select" data-neo-bts="input.childBlocks">\n                <div>\n                  <input type="hidden" name="'.concat(b,'">\n                  <input type="checkbox" value="*" id="').concat(g,'" class="all checkbox" name="').concat(b,'">\n                  <label for="').concat(g,'"><strong>').concat(r().t("neo","All"),'</strong></label>\n                </div>\n                <div data-neo-bts="container.childBlocks"></div>\n              </div>')}),'\n          <div data-neo-bts="container.maxChildBlocks">\n            ').concat(this._input({type:"number",id:v,name:y,label:r().t("neo","Max Child Blocks"),instructions:r().t("neo","The maximum number of child blocks this block type is allowed to have."),fullWidth:!1,value:a>0?a:null,errors:t.maxChildBlocks,attributes:{min:0,style:"width: 80px;","data-neo-bts":"input.maxChildBlocks"}}),'\n          </div>\n          <div data-neo-bts="container.topLevel">\n            ').concat(this._lightswitch({id:_,name:k,label:r().t("neo","Top Level"),instructions:r().t("neo","Will this block type be allowed at the top level?"),checked:this.getTopLevel(),attributes:{"data-neo-bts":"input.topLevel"}}),'\n          </div>\n        </div>\n        <hr>\n        <a class="error delete" data-neo-bts="button.delete">').concat(r().t("neo","Delete block type"),"</a>\n      </div>"))},_generateChildBlocksCheckbox:function(t){c.enter(this._templateNs);var n=c.value("childBlock-"+t.getId(),"-"),i=c.fieldName("childBlocks");return c.leave(),e()('\n      <div>\n        <input type="checkbox" value="'.concat(t.getHandle(),'" id="').concat(n,'" class="checkbox" name="').concat(i,'[]" data-neo-btsc="input">\n        <label for="').concat(n,'" data-neo-btsc="text.label">').concat(t.getName(),"</label>\n      </div>"))},getFocusInput:function(){return this.$nameInput},getId:function(){return this._id},isNew:function(){return/^new/.test(this.getId())},getErrors:function(){return this._errors},setSortOrder:function(t){this.base(t),this.$sortOrderInput.val(this.getSortOrder())},getName:function(){return this._name},setName:function(t){if(t!==this._name){var e=this._name;this._name=t,this.$nameInput.val()!==this._name&&this.$nameInput.val(this._name),this.trigger("change",{property:"name",oldValue:e,newValue:this._name})}},getHandle:function(){return this._handle},setHandle:function(t){if(t!==this._handle){var e=this._handle;this._handle=t,this.$handleInput.val()!==this._handle&&this.$handleInput.val(this._handle),this.trigger("change",{property:"handle",oldValue:e,newValue:this._handle})}},getMaxBlocks:function(){return this._maxBlocks},setMaxBlocks:function(t){var e=this._maxBlocks,n=Math.max(0,0|t);0===n&&this.$maxBlocksInput.val(null),e!==n&&(this._maxBlocks=n,this._maxBlocks>0&&parseInt(this.$maxBlocksInput.val())!==this._maxBlocks&&this.$maxBlocksInput.val(this._maxBlocks),this.trigger("change",{property:"maxBlocks",oldValue:e,newValue:this._maxBlocks}))},getMaxSiblingBlocks:function(){return this._maxSiblingBlocks},setMaxSiblingBlocks:function(t){var e=this._maxSiblingBlocks,n=Math.max(0,0|t);0===n&&this.$maxSiblingBlocksInput.val(null),e!==n&&(this._maxSiblingBlocks=n,this._maxSiblingBlocks>0&&parseInt(this.$maxSiblingBlocksInput.val())!==this._maxSiblingBlocks&&this.$maxSiblingBlocksInput.val(this._maxSiblingBlocks),this.trigger("change",{property:"maxSiblingBlocks",oldValue:e,newValue:this._maxSiblingBlocks}))},getMaxChildBlocks:function(){return this._maxChildBlocks},setMaxChildBlocks:function(t){var e=this._maxChildBlocks,n=Math.max(0,0|t);0===n&&this.$maxChildBlocksInput.val(null),e!==n&&(this._maxChildBlocks=n,this._maxChildBlocks>0&&parseInt(this.$maxChildBlocksInput.val())!==this._maxChildBlocks&&this.$maxChildBlocksInput.val(this._maxChildBlocks),this.trigger("change",{property:"maxChildBlocks",oldValue:e,newValue:this._maxChildBlocks}))},getTopLevel:function(){return this._topLevel},setTopLevel:function(t){var e=this._topLevel,n=!!t;e!==n&&(this._topLevel=n,this._topLevelLightswitch&&this._topLevelLightswitch.on!==this._topLevel&&(this._topLevelLightswitch.on=this._topLevel,this._topLevelLightswitch.toggle()),this.trigger("change",{property:"topLevel",oldValue:e,newValue:this._topLevel}))},getChildBlocks:function(){var t=this._childBlocksSelect,n=[];return!!t.$all.prop("checked")||(t.$options.each((function(t){var i=e()(this);i.prop("checked")&&n.push(i.val())})),n.length>0&&n)},setChildBlocks:function(t){var e=this._childBlocksSelect;if(!0===t||"*"===t)e.$all.prop("checked",!0),e.onAllChange();else if(Array.isArray(t)){e.$all.prop("checked",!1);var n,i=_(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;e.$options.filter('[value="'.concat(a,'"]')).prop("checked",!0)}}catch(t){i.e(t)}finally{i.f()}}else e.$all.prop("checked",!1),e.$options.prop("checked",!1);this._refreshMaxChildBlocks(!1)},addChildBlockType:function(t){var e=this;if(!this._childBlockTypes.includes(t)){var n=t.getSettings(),i=this._generateChildBlocksCheckbox(n);this._childBlockTypes.push(t),this.$childBlocksContainer.append(i),this._refreshChildBlocks();var a=this._childBlocksSelect,o=a.$all.prop("checked");a.$options=a.$options.add(i.find("input")),o&&a.onAllChange();var r=".childBlock"+this.getId();n.on("change"+r,(function(n){return e["@onChildBlockTypeChange"](n,t,i)})),n.on("destroy"+r,(function(n){return e.removeChildBlockType(t)}))}},removeChildBlockType:function(t){var e=this._childBlockTypes.indexOf(t);if(e>=0){this._childBlockTypes.splice(e,1);var n=t.getSettings(),i=this.$childBlocksContainer.children().eq(e);i.remove();var a=this._childBlocksSelect;a.$options=a.$options.remove(i.find("input"));var o=".childBlock"+this.getId();n.off(o),this._refreshChildBlocks()}},_refreshChildBlocks:function(){var t=Array.from(this._childBlockTypes),e=this.$childBlocksContainer.children(),n=function(n){return e.get(t.indexOf(n))};this._childBlockTypes=this._childBlockTypes.sort((function(t,e){return t.getSettings().getSortOrder()-e.getSettings().getSortOrder()})),e.remove();var i,a=_(this._childBlockTypes);try{for(a.s();!(i=a.n()).done;){var o=n(i.value);this.$childBlocksContainer.append(o)}}catch(t){a.e(t)}finally{a.f()}},_refreshMaxChildBlocks:function(t){var e=this;t="boolean"!=typeof t||t;var n=!!this.getChildBlocks();t?n?this.$maxChildBlocksContainer.hasClass("hidden")&&this.$maxChildBlocksContainer.removeClass("hidden").css({opacity:0,marginBottom:-this.$maxChildBlocksContainer.outerHeight()}).velocity({opacity:1,marginBottom:24},"fast"):this.$maxChildBlocksContainer.hasClass("hidden")||this.$maxChildBlocksContainer.css({opacity:1,marginBottom:24}).velocity({opacity:0,marginBottom:-this.$maxChildBlocksContainer.outerHeight()},"fast",(function(){e.$maxChildBlocksContainer.addClass("hidden")})):this.$maxChildBlocksContainer.toggleClass("hidden",!n).css("margin-bottom",n?24:"")},"@onChildBlockTypeChange":function(t,e,n){var i=n.find("[data-neo-btsc]"),a=i.filter('[data-neo-btsc="input"]'),o=i.filter('[data-neo-btsc="text.label"]');switch(t.property){case"name":o.text(t.newValue);break;case"handle":a.val(t.newValue);break;case"sortOrder":this._refreshChildBlocks()}}},{_totalNewBlockTypes:0,getNewId:function(){return"new".concat(this._totalNewBlockTypes++)}});function $(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return C(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,o=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw o}}}}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var w={namespace:[],html:"",layout:[],id:-1,blockId:null,blockName:""};const S=a().Base.extend({_templateNs:[],_blockName:"",init:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n=Object.assign({},w,n),this._templateNs=c.parse(n.namespace),this._id=0|n.id,this._blockTypeId=n.blockTypeId,this.setBlockName(n.blockName),this.$container=e()(n.html).find(".layoutdesigner"),this.$container.removeAttr("id");var i=this.$container.find('input[name="fieldLayout"]');if(i.length>0&&(i[0].name="neoBlockType".concat(this._blockTypeId,"[fieldLayout]"),i[0].value=JSON.stringify(n.layout?n.layout:{tabs:[]})),c.enter(this._templateNs),this._fld=new(r().FieldLayoutDesigner)(this.$container,{customizableTabs:!0,customizableUi:!0}),c.leave(),this._tabObserver=new window.MutationObserver((function(){var n="[data-type=benf\\\\neo\\\\fieldlayoutelements\\\\ChildBlocksUiElement]",i=t._fld.$uiLibraryElements.filter(n),a=t._fld.$tabContainer.find(n);i.toggleClass("hidden",a.length>0||e()("body.dragging .draghelper"+n).length>0),a.hasClass("velocity-animating")&&a.removeClass("hidden")})),n.layout){var a,o=$(n.layout.tabs);try{for(o.s();!(a=o.n()).done;){var s,l=a.value,d=this.addTab(l.name),u=$(l.elements);try{for(u.s();!(s=u.n()).done;){var h=s.value;this.addElementToTab(d,h)}}catch(t){u.e(t)}finally{u.f()}}}catch(t){o.e(t)}finally{o.f()}}},getId:function(){return this._id},getBlockTypeId:function(){return this._blockTypeId},getBlockName:function(){return this._blockName},setBlockName:function(t){this._blockName=t},addTab:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Tab"+(this._fld.tabGrid.$items.length+1),n=this._fld,i=e()('\n      <div class="fld-tab">\n        <div class="tabs">\n          <div class="tab sel draggable">\n            <span>'.concat(t,'</span>\n            <a class="settings icon" title="').concat(r().t("neo","Rename"),'"></a>\n          </div>\n        </div>\n        <div class="fld-tabcontent"></div>\n      </div>\n    ')).appendTo(n.$tabContainer);return n.tabGrid.addItems(i),n.tabDrag.addItems(i),this.$container.appendTo(document.body),n.initTab(i),this._tabObserver.observe(i.children(".fld-tabcontent")[0],{childList:!0,subtree:!0}),i},addElementToTab:function(t,n){var i=t.find(".fld-tabcontent"),a=null;if("craft\\fieldlayoutelements\\CustomField"===n.type){var o=this._fld.$fields.filter("[data-config*=".concat(n.fieldUid,"]")),s=n.required&&"0"!==n.required;a=o.clone().toggleClass("fld-required",s);var l=e()('<span class="fld-required-indicator" title="'.concat(r().t("app","This field is required"),'"></span>')),c=a.find(".fld-element-label");n.label&&("__blank__"===n.label?(c.remove(),s&&(c=a.find(".fld-attribute"))):c.children("h4").text(n.label)),s&&c.append(l),o.addClass("hidden")}else{a=this._fld.$uiLibraryElements.filter((function(){var t=e()(this),i=t.data("type"),a=t.data("config").style;return i===n.type.replaceAll("\\","-")&&(!a||a===n.style)})).clone();var d=null;switch(n.type){case"craft\\fieldlayoutelements\\Tip":d=n.tip;break;case"craft\\fieldlayoutelements\\Heading":d=n.heading;break;case"craft\\fieldlayoutelements\\Template":d=n.template}if(d){var u=a.find(".fld-element-label");u.text(d),u.toggleClass("code","craft\\fieldlayoutelements\\Template"===n.type)}}a.removeClass("unused"),i.append(a),a.data("config",n.config),a.data("settings-html",n["settings-html"]),this._fld.elementDrag.addItems(a)},getLayoutStructure:function(){var t=[],n=["config","id","type"];return this._fld.$tabContainer.children(".fld-tab").each((function(){var i=e()(this),a=i.find(".tab span").text(),o=[];i.find(".fld-element").each((function(){var t=e()(this),i={};n.filter((function(e){return void 0!==t.data(e)})).forEach((function(e){i[e]=t.data(e)})),t.data("settings-html")&&(i["settings-html"]=t.data("settings-html").replace(/(id|for)="element-([0-9a-z]+)-([a-z-]+)/g,'$1="element-$2-'.concat(Date.now(),"-$3"))),o.push(i)})),t.push({name:a,elements:o})})),t}});var I={namespace:[]};const T=u.extend({_templateNs:[],init:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.base(e),e=Object.assign({},I,e);var n=this.getSettings();this._templateNs=c.parse(e.namespace),this.$container=this._generateGroup(n);var i=this.$container.find("[data-neo-g]");this.$nameText=i.filter('[data-neo-g="text.name"]'),this.$moveButton=i.filter('[data-neo-g="button.move"]'),n&&(n.on("change",(function(){return t._updateTemplate()})),n.on("destroy",(function(){return t.trigger("destroy")}))),this.deselect()},_generateGroup:function(t){return e()('\n      <div class="nc_sidebar_list_item type-heading">\n        <div class="label" data-neo-g="text.name">'.concat(t.getName(),'</div>\n        <a class="move icon" title="').concat(r().t("neo","Reorder"),'" role="button" data-neo-g="button.move"></a>\n      </div>'))},toggleSelect:function(t){this.base(t);var e=this.getSettings(),n=this.isSelected();e&&e.$container.toggleClass("hidden",!n),this.$container.toggleClass("is-selected",n)},_updateTemplate:function(){var t=this.getSettings();t&&this.$nameText.text(t.getName())}});var L={namespace:[],id:null,sortOrder:0,name:""};const N=y.extend({_templateNs:[],$sortOrderInput:new(e()),$nameInput:new(e()),$handleInput:new(e()),$maxBlocksInput:new(e()),init:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Object.assign({},L,e),this._templateNs=c.parse(e.namespace),this._id=e.id,this.setSortOrder(e.sortOrder),this.setName(e.name),this.$container=this._generateGroupSettings();var n=this.$container.find("[data-neo-gs]");this.$sortOrderInput=n.filter('[data-neo-gs="input.sortOrder"]'),this.$nameInput=n.filter('[data-neo-gs="input.name"]'),this.$deleteButton=n.filter('[data-neo-gs="button.delete"]'),this.addListener(this.$nameInput,"keyup change",(function(){return t.setName(t.$nameInput.val())})),this.addListener(this.$deleteButton,"click",(function(){window.confirm(r().t("neo","Are you sure you want to delete this group?"))&&t.destroy()}))},_generateGroupSettings:function(){c.enter(this._templateNs);var t=c.fieldName("sortOrder"),n=c.value("name","-"),i=c.fieldName("name");return c.leave(),e()('\n      <div>\n      <input type="hidden" name="'.concat(t,'" value="').concat(this.getSortOrder(),'" data-neo-gs="input.sortOrder">\n      <div>\n        ').concat(this._input({type:"text",id:n,name:i,label:r().t("neo","Name"),instructions:r().t("neo","This can be left blank if you just want an unlabeled separator."),value:this.getName(),attributes:{"data-neo-gs":"input.name"}}),'\n      </div>\n      <hr>\n      <a class="error delete" data-neo-gs="button.delete">').concat(r().t("neo","Delete group"),"</a>\n    </div>"))},getFocusInput:function(){return this.$nameInput},getId:function(){return this._id},setSortOrder:function(t){this.base(t),this.$sortOrderInput.val(this.getSortOrder())},getName:function(){return this._name},setName:function(t){if(t!==this._name){var e=this._name;this._name=t,this.$nameInput.val(this._name),this.trigger("change",{property:"name",oldValue:e,newValue:this._name})}}},{_totalNewGroups:0,getNewId:function(){return"new".concat(this._totalNewGroups++)}});var O=n(379),A=n.n(O),M=n(795),j=n.n(M),F=n(569),E=n.n(F),H=n(565),V=n.n(H),G=n(216),q=n.n(G),U=n(589),D=n.n(U),z=n(94),W={};W.styleTagTransform=D(),W.setAttributes=V(),W.insert=E().bind(null,"head"),W.domAPI=j(),W.insertStyleElement=q();A()(z.Z,W);z.Z&&z.Z.locals&&z.Z.locals;function P(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Z(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,o=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw o}}}}function R(t){return function(t){if(Array.isArray(t))return J(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Z(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(t,e){if(t){if("string"==typeof t)return J(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(t,e):void 0}}function J(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Q={namespace:[],blockTypes:[],groups:[],fieldLayoutHtml:""};const K=a().Base.extend({_templateNs:[],_items:[],init:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n=Object.assign({},Q,n);var i=r().formatInputId(n.namespace),o=e()("#".concat(i,"-neo-configurator")),s=o.children(".field").children(".input");this._templateNs=c.parse(n.namespace),this._fieldLayoutHtml=n.fieldLayoutHtml,this._items=[],this.$container=this._generateConfigurator(),s.append(this.$container);var l=this.$container.find("[data-neo]");this.$mainContainer=l.filter('[data-neo="container.main"]'),this.$sidebarContainer=l.filter('[data-neo="container.sidebar"]'),this.$blockTypesContainer=l.filter('[data-neo="container.blockTypes"]'),this.$settingsContainer=l.filter('[data-neo="container.settings"]'),this.$fieldLayoutContainer=l.filter('[data-neo="container.fieldLayout"]'),this.$blockTypeButton=l.filter('[data-neo="button.blockType"]'),this.$groupButton=l.filter('[data-neo="button.group"]'),this.$settingsButton=l.filter('[data-neo="button.settings"]'),this.$fieldLayoutButton=l.filter('[data-neo="button.fieldLayout"]'),this._itemSort=new(a().DragSort)(null,{container:this.$blockTypeItemsContainer,handle:'[data-neo-bt="button.move"], [data-neo-g="button.move"]',axis:"y",onSortChange:function(){return t._updateItemOrder()}});var d,u=[],h=[].concat(R(this._templateNs),["blockTypes"]),f=[].concat(R(this._templateNs),["groups"]),m=P(n.blockTypes);try{var g=function(){var e=d.value,n=new x({namespace:[].concat(R(h),[e.id]),sortOrder:e.sortOrder,id:e.id,name:e.name,handle:e.handle,maxBlocks:e.maxBlocks,maxSiblingBlocks:e.maxSiblingBlocks,maxChildBlocks:e.maxChildBlocks,topLevel:e.topLevel,errors:e.errors,childBlockTypes:u.filter((function(t){return t instanceof p}))}),i=new S({namespace:[].concat(R(h),[e.id]),html:t._fieldLayoutHtml,layout:e.fieldLayout,id:e.fieldLayoutId,blockTypeId:e.id}),a=new p({namespace:h,settings:n,fieldLayout:i});window.localStorage.getItem("neo:copyBlockType")&&a.$actionsMenu.find('[data-action="paste"]').parent().removeClass("disabled"),a.on("copy.configurator",(function(){return t._copyBlockType(a)})),a.on("paste.configurator",(function(){return t._pasteBlockType()})),a.on("clone.configurator",(function(){return t._createBlockTypeFrom(a)})),u.push(a)};for(m.s();!(d=m.n()).done;)g()}catch(t){m.e(t)}finally{m.f()}var b,v=P(n.groups);try{for(v.s();!(b=v.n()).done;){var y=b.value,_=new N({namespace:[].concat(R(f),[y.id]),sortOrder:y.sortOrder,id:y.id,name:y.name}),k=new T({namespace:f,settings:_});u.push(k)}}catch(t){v.e(t)}finally{v.f()}var B,$=P(u.sort((function(t,e){return t.getSettings().getSortOrder()-e.getSettings().getSortOrder()})));try{for($.s();!(B=$.n()).done;){var C=B.value;this.addItem(C)}}catch(t){$.e(t)}finally{$.f()}var w,I=P(this.getBlockTypes());try{var L=function(){var t=w.value.getSettings(),e=n.blockTypes.find((function(e){return e.handle===t.getHandle()}));t.setChildBlocks(e.childBlocks)};for(I.s();!(w=I.n()).done;)L()}catch(t){I.e(t)}finally{I.f()}this.selectTab("settings"),this.addListener(this.$blockTypeButton,"click","@newBlockType"),this.addListener(this.$groupButton,"click","@newGroup"),this.addListener(this.$settingsButton,"click",(function(){return t.selectTab("settings")})),this.addListener(this.$fieldLayoutButton,"click",(function(){return t.selectTab("fieldLayout")}))},_generateConfigurator:function(){return e()('\n      <div class="nc_sidebar" data-neo="container.sidebar">\n        <div class="nc_sidebar_title">'.concat(r().t("neo","Block Types"),'</div>\n        <div class="nc_sidebar_list" data-neo="container.blockTypes"></div>\n        <div class="nc_sidebar_buttons btngroup">\n          <a class="btn add icon" role="button" data-neo="button.blockType">').concat(r().t("neo","Block type"),'</a>\n          <a class="btn type-heading" role="button" data-neo="button.group">').concat(r().t("neo","Group"),'</a>\n        </div>\n      </div>\n      <div class="nc_main" data-neo="container.main">\n        <div class="nc_main_tabs">\n          <a class="nc_main_tabs_tab is-selected" role="button" data-neo="button.settings">').concat(r().t("neo","Settings"),'</a>\n          <a class="nc_main_tabs_tab" role="button" data-neo="button.fieldLayout">').concat(r().t("neo","Field Layout"),'</a>\n        </div>\n        <div class="nc_main_content" data-neo="container.settings"></div>\n        <div class="nc_main_content" data-neo="container.fieldLayout"></div>\n      </div>'))},addItem:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=t.getSettings();if(n>=0&&n<this._items.length?t.$container.insertAt(n,this.$blockTypesContainer):this.$blockTypesContainer.append(t.$container),this._itemSort.addItems(t.$container),i&&this.$settingsContainer.append(i.$container),this.$mainContainer.removeClass("hidden"),this.addListener(t.$container,"click","@selectItem"),t.on("destroy.configurator",(function(){return e.removeItem(t,!1)})),t instanceof p){var a=t.getFieldLayout();a&&this.$fieldLayoutContainer.append(a.$container)}if(this._items.push(t),this._updateItemOrder(),t instanceof p){var o,r=P(this.getBlockTypes());try{for(r.s();!(o=r.n()).done;){var s=o.value,l=s.getSettings();l&&l.addChildBlockType(t)}}catch(t){r.e(t)}finally{r.f()}}this.trigger("addItem",{item:t,index:n})},removeItem:function(t,e){if(e="boolean"==typeof e&&e){var n=r().t("neo","Are you sure you want to delete this {type}?",{type:t instanceof p?"block type":t instanceof T?"group":"item"});window.confirm(n)&&this.removeItem(t,!1)}else{var i=t.getSettings();if(this._itemSort.removeItems(t.$container),t.$container.remove(),i&&i.$container.remove(),t instanceof p){var a=t.getFieldLayout();a&&a.$container.remove()}this.removeListener(t.$container,"click"),t.off(".configurator"),this._updateItemOrder(),0===this._items.length&&this.$mainContainer.addClass("hidden"),this.trigger("removeItem",{item:t})}},getItems:function(){return Array.from(this._items)},getItemByElement:function(t){return this._items.find((function(e){return e.$container.is(t)}))},getSelectedItem:function(){return this._items.find((function(t){return t.isSelected()}))},selectItem:function(t,e){e="boolean"!=typeof e||e;var n,i=t?t.getSettings():null,o=P(this._items);try{for(o.s();!(n=o.n()).done;){var r=n.value,s=r===t;r.toggleSelect(s),s&&this.toggleFieldLayoutTabVisibility(r instanceof p)}}catch(t){o.e(t)}finally{o.f()}e&&i&&!a().isMobileBrowser()&&setTimeout((function(){return i.getFocusInput().focus()}),100)},getBlockTypes:function(){return this._items.filter((function(t){return t instanceof p}))},getGroups:function(){return this._items.filter((function(t){return t instanceof T}))},selectTab:function(t){this.$settingsContainer.toggleClass("hidden","settings"!==t),this.$fieldLayoutContainer.toggleClass("hidden","fieldLayout"!==t),this.$settingsButton.toggleClass("is-selected","settings"===t),this.$fieldLayoutButton.toggleClass("is-selected","fieldLayout"===t)},toggleFieldLayoutTabVisibility:function(t){t||this.selectTab("settings"),this.$fieldLayoutButton.toggleClass("hidden",!t)},_updateItemOrder:function(){var t=this,e=[];this._itemSort.$items.each((function(n,i){var a=t.getItemByElement(i);if(a){var o=a.getSettings();o&&o.setSortOrder(n+1),e.push(a)}})),this._items=e},_createBlockTypeFrom:function(t){var e=this,n=[].concat(R(this._templateNs),["blockTypes"]),i=x.getNewId(),a=t?t.getSettings():null,o=new x(a?{childBlocks:a.getChildBlocks(),childBlockTypes:this.getBlockTypes(),handle:"".concat(a.getHandle(),"_").concat(Date.now()),id:i,maxBlocks:a.getMaxBlocks(),maxChildBlocks:a.getMaxChildBlocks(),maxSiblingBlocks:a.getMaxSiblingBlocks(),name:a.getName(),namespace:[].concat(R(n),[i]),sortOrder:this._items.length,topLevel:a.getTopLevel()}:{childBlockTypes:this.getBlockTypes(),id:i,namespace:[].concat(R(n),[i]),sortOrder:this._items.length}),r=new S({blockTypeId:i,html:this._fieldLayoutHtml,layout:t?t.getFieldLayout().getLayoutStructure():null,namespace:[].concat(R(n),[i])}),s=new p({namespace:n,settings:o,fieldLayout:r}),l=this.getSelectedItem(),c=l?l.getSettings().getSortOrder():-1;this.addItem(s,c),this.selectItem(s),s.on("copy.configurator",(function(){return e._copyBlockType(s)})),s.on("paste.configurator",(function(){return e._pasteBlockType()})),s.on("clone.configurator",(function(){return e._createBlockTypeFrom(s)}))},_copyBlockType:function(t){var e=t.getSettings(),n={childBlocks:e.getChildBlocks(),handle:e.getHandle(),layout:t.getFieldLayout().getLayoutStructure(),maxBlocks:e.getMaxBlocks(),maxChildBlocks:e.getMaxChildBlocks(),maxSiblingBlocks:e.getMaxSiblingBlocks(),name:e.getName(),topLevel:e.getTopLevel()};window.localStorage.setItem("neo:copyBlockType",JSON.stringify(n)),this.getBlockTypes().forEach((function(t){return t.$actionsMenu.find('[data-action="paste"]').parent().removeClass("disabled")}))},_pasteBlockType:function(){var t=this,e=window.localStorage.getItem("neo:copyBlockType");if(e){var n=JSON.parse(e),i=n.childBlocks?n.childBlocks.filter((function(e){return t.getBlockTypes().map((function(t){return t.getSettings().getHandle()})).includes(e)})):[],a=new x({childBlocks:i,childBlockTypes:this.getBlockTypes(),handle:n.handle,maxBlocks:n.maxBlocks,maxChildBlocks:n.maxChildBlocks,maxSiblingBlocks:n.maxSiblingBlocks,name:n.name,topLevel:n.topLevel}),o=new S({html:this._fieldLayoutHtml,layout:n.layout}),r=new p({settings:a,fieldLayout:o});this._createBlockTypeFrom(r)}},"@newBlockType":function(){this._createBlockTypeFrom(null)},"@newGroup":function(){var t=[].concat(R(this._templateNs),["groups"]),e=N.getNewId(),n=new N({namespace:[].concat(R(t),[e]),sortOrder:this._items.length,id:e}),i=new T({namespace:t,settings:n}),a=this.getSelectedItem(),o=a?a.getSettings().getSortOrder():-1;this.addItem(i,o),this.selectItem(i)},"@selectItem":function(t){var e=this.getItemByElement(t.currentTarget);this.selectItem(e)}});var X="undefined"!=typeof window?window:void 0,Y=[];X.Neo={Configurator:K,configurators:Y,createConfigurator:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=new K(t);return Y.push(e),e}}})()})();