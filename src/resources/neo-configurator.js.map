{"version":3,"file":"neo-configurator.js","mappings":"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","sources":["webpack://craft-neo/webpack/bootstrap","webpack://craft-neo/webpack/runtime/compat get default export","webpack://craft-neo/webpack/runtime/define property getters","webpack://craft-neo/webpack/runtime/hasOwnProperty shorthand","webpack://craft-neo/external var \"jQuery\"","webpack://craft-neo/./client/src/jquery-extensions.js","webpack://craft-neo/external var \"Garnish\"","webpack://craft-neo/external var \"Craft\"","webpack://craft-neo/./node_modules/uuid/dist/esm-browser/rng.js","webpack://craft-neo/./node_modules/uuid/dist/esm-browser/regex.js","webpack://craft-neo/./node_modules/uuid/dist/esm-browser/validate.js","webpack://craft-neo/./node_modules/uuid/dist/esm-browser/stringify.js","webpack://craft-neo/./node_modules/uuid/dist/esm-browser/v4.js","webpack://craft-neo/./client/src/namespace.js","webpack://craft-neo/./client/src/configurator/Item.js","webpack://craft-neo/./client/src/configurator/BlockTypeFieldLayout.js","webpack://craft-neo/./client/src/configurator/BlockType.js","webpack://craft-neo/./client/src/configurator/Settings.js","webpack://craft-neo/./client/src/configurator/BlockTypeSettings.js","webpack://craft-neo/./client/src/configurator/Group.js","webpack://craft-neo/./client/src/configurator/GroupSettings.js","webpack://craft-neo/./client/src/configurator/Configurator.js","webpack://craft-neo/./client/src/configurator.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = jQuery;","import $ from 'jquery'\n\n// @see http://stackoverflow.com/a/12903503/556609\n$.fn.insertAt = function (index, $parent) {\n  return this.each(function () {\n    if (index === 0) {\n      $parent.prepend(this)\n    } else {\n      $parent.children().eq(index - 1).after(this)\n    }\n  })\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = Garnish;","const __WEBPACK_NAMESPACE_OBJECT__ = Craft;","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","export default {\n\n  _stack: [[]],\n\n  enter (segments, join = true) {\n    if (typeof segments === 'string') {\n      segments = this.fromFieldName(segments)\n    }\n\n    if (join) {\n      const joined = this.getNamespace()\n      joined.push(...segments)\n\n      segments = joined\n    }\n\n    this._stack.push(segments)\n  },\n\n  enterByFieldName (fieldName, join = true) {\n    this.enter(this.fromFieldName(fieldName), join)\n  },\n\n  leave () {\n    return this._stack.length > 1\n      ? this._stack.pop()\n      : this.getNamespace()\n  },\n\n  getNamespace () {\n    return Array.from(this._stack[this._stack.length - 1])\n  },\n\n  parse (value) {\n    if (typeof value === 'string') {\n      if (value.indexOf('[') > -1) {\n        return this.fromFieldName(value)\n      }\n\n      if (value.indexOf('-') > -1) {\n        return value.split('-')\n      }\n\n      if (value.indexOf('.') > -1) {\n        return value.split('.')\n      }\n\n      return value\n    }\n\n    return Array.from(value)\n  },\n\n  value (value, separator = '-') {\n    const segments = this.getNamespace()\n    segments.push(value)\n\n    return segments.join(separator)\n  },\n\n  fieldName (fieldName = '') {\n    const prefix = this.toFieldName()\n\n    if (prefix) {\n      return prefix + fieldName.replace(/([^'\"[\\]]+)([^'\"]*)/, '[$1]$2')\n    }\n\n    return fieldName\n  },\n\n  toString (separator = '-') {\n    return this.getNamespace().join(separator)\n  },\n\n  toFieldName () {\n    const segments = this.getNamespace()\n\n    switch (segments.length) {\n      case 0: return ''\n      case 1: return segments[0]\n    }\n\n    return segments[0] + '[' + segments.slice(1).join('][') + ']'\n  },\n\n  fromFieldName (fieldName) {\n    return fieldName.match(/[^[\\]\\s]+/g) || []\n  }\n}\n","import Garnish from 'garnish'\n\nconst _defaults = {\n  settings: null\n}\n\nexport default Garnish.Base.extend({\n\n  _selected: false,\n\n  init (settings = {}) {\n    settings = Object.assign({}, _defaults, settings)\n\n    this._settings = settings.settings\n  },\n\n  getSettings () {\n    return this._settings\n  },\n\n  select () {\n    this.toggleSelect(true)\n  },\n\n  deselect () {\n    this.toggleSelect(false)\n  },\n\n  toggleSelect: function (select) {\n    this._selected = (typeof select === 'boolean' ? select : !this._selected)\n\n    this.trigger('toggleSelect', {\n      selected: this._selected\n    })\n  },\n\n  isSelected () {\n    return this._selected\n  }\n})\n","import $ from 'jquery'\nimport Garnish from 'garnish'\nimport Craft from 'craft'\nimport NS from '../namespace'\n\nconst _defaults = {\n  namespace: [],\n  html: '',\n  layout: null,\n  id: -1,\n  blockId: null,\n  blockName: ''\n}\n\nexport default Garnish.Base.extend({\n\n  _templateNs: [],\n\n  init (settings = {}) {\n    settings = Object.assign({}, _defaults, settings)\n\n    this._templateNs = NS.parse(settings.namespace)\n    this._id = settings.id | 0\n    this._blockTypeId = settings.blockTypeId\n\n    this.$container = $(settings.html).find('.layoutdesigner')\n    this.$container.removeAttr('id')\n\n    const nameInput = this.$container.find('input[name=\"fieldLayout\"]')\n\n    if (nameInput.length > 0) {\n      nameInput[0].name = `neoBlockType${this._blockTypeId}[fieldLayout]`\n\n      if (settings.layout) {\n        nameInput[0].value = JSON.stringify(settings.layout)\n      }\n    }\n\n    NS.enter(this._templateNs)\n\n    this._fld = new Craft.FieldLayoutDesigner(this.$container, {\n      customizableTabs: true,\n      customizableUi: true\n    })\n\n    NS.leave()\n\n    const updateChildBlocksUiElement = () => {\n      const selector = '[data-type=benf-neo-fieldlayoutelements-ChildBlocksUiElement]'\n      const $uiLibraryElement = this._fld.$uiLibraryElements.filter(selector)\n      const $tabUiElement = this._fld.$tabContainer.find(selector)\n      $uiLibraryElement.toggleClass(\n        'hidden',\n        $tabUiElement.length > 0 || $('body.dragging .draghelper' + selector).length > 0\n      )\n      if ($tabUiElement.hasClass('velocity-animating')) {\n        $tabUiElement.removeClass('hidden')\n      }\n    }\n\n    updateChildBlocksUiElement()\n    this._tabObserver = new window.MutationObserver(updateChildBlocksUiElement)\n    this._tabObserver.observe(this._fld.$tabContainer[0], { childList: true, subtree: true })\n  },\n\n  getId () {\n    return this._id\n  },\n\n  getBlockTypeId () {\n    return this._blockTypeId\n  },\n\n  getConfig () {\n    const newConfig = { tabs: [] }\n\n    for (const tab of this._fld.config.tabs) {\n      const newElements = []\n\n      for (const element of tab.elements) {\n        const newElement = {}\n\n        for (const key in element) {\n          newElement[key] = key === 'required' && !element[key] ? '' : element[key]\n        }\n\n        newElements.push(newElement)\n      }\n\n      newConfig.tabs.push({\n        elements: newElements,\n        name: tab.name.slice()\n      })\n    }\n\n    return newConfig\n  }\n})\n","import $ from 'jquery'\nimport Craft from 'craft'\nimport Garnish from 'garnish'\nimport Item from './Item'\nimport NS from '../namespace'\nimport BlockTypeFieldLayout from './BlockTypeFieldLayout'\n\nconst _defaults = {\n  namespace: [],\n  fieldLayout: null\n}\n\nexport default Item.extend({\n\n  _templateNs: [],\n\n  init (settings = {}) {\n    this.base(settings)\n\n    const settingsObj = this.getSettings()\n    settings = Object.assign({}, _defaults, settings)\n\n    this._templateNs = NS.parse(settings.namespace)\n    this._fieldLayout = settings.fieldLayout\n\n    this.$container = this._generateBlockType(settingsObj)\n\n    const $neo = this.$container.find('[data-neo-bt]')\n    this.$nameText = $neo.filter('[data-neo-bt=\"text.name\"]')\n    this.$handleText = $neo.filter('[data-neo-bt=\"text.handle\"]')\n    this.$moveButton = $neo.filter('[data-neo-bt=\"button.move\"]')\n    this.$actionsButton = $neo.filter('[data-neo-bt=\"button.actions\"]')\n    this.$actionsMenu = $neo.filter('[data-neo-bt=\"container.menu\"]')\n\n    this._actionsMenu = new Garnish.MenuBtn(this.$actionsButton)\n    this._actionsMenu.on('optionSelect', e => this['@actionSelect'](e))\n\n    // Stop the actions button click from selecting the block type and closing the menu\n    this.addListener(this.$actionsButton, 'click', e => e.stopPropagation())\n\n    if (settingsObj) {\n      settingsObj.on('change', () => this._updateTemplate())\n      settingsObj.on('destroy', () => this.trigger('destroy'))\n\n      this._updateTemplate()\n    }\n\n    this.deselect()\n  },\n\n  _generateBlockType (settings) {\n    const errors = settings.getErrors()\n    const hasErrors = (Array.isArray(errors) ? errors : Object.keys(errors)).length > 0\n\n    return $(`\n      <div class=\"nc_sidebar_list_item${hasErrors ? ' has-errors' : ''}\">\n        <div class=\"label\" data-neo-bt=\"text.name\">${settings.getName()}</div>\n        <div class=\"smalltext light code\" data-neo-bt=\"text.handle\">${settings.getHandle()}</div>\n        <a class=\"move icon\" title=\"${Craft.t('neo', 'Reorder')}\" role=\"button\" data-neo-bt=\"button.move\"></a>\n        <button class=\"settings icon menubtn\" title=\"${Craft.t('neo', 'Actions')}\" role=\"button\" type=\"button\" data-neo-bt=\"button.actions\"></button>\n        <div class=\"menu\" data-neo-bt=\"container.menu\">\n          <ul class=\"padded\">\n            <li><a data-icon=\"field\" data-action=\"copy\">${Craft.t('neo', 'Copy')}</a></li>\n            <li class=\"disabled\"><a data-icon=\"brush\" data-action=\"paste\">${Craft.t('neo', 'Paste')}</a></li>\n            <li><a data-icon=\"share\" data-action=\"clone\">${Craft.t('neo', 'Clone')}</a></li>\n            <li><a class=\"error\" data-icon=\"remove\" data-action=\"delete\">${Craft.t('neo', 'Delete')}</a></li>\n          </ul>\n        </div>\n      </div>`)\n  },\n\n  getFieldLayout () {\n    return this._fieldLayout\n  },\n\n  loadFieldLayout () {\n    if (this._fieldLayout) {\n      // Already loaded\n      return Promise.resolve()\n    }\n\n    this.trigger('beforeLoadFieldLayout')\n    const settings = this.getSettings()\n    const layout = settings.getFieldLayoutConfig()\n    const layoutId = settings.getFieldLayoutId()\n    const data = layout ? { layout } : { layoutId }\n\n    return new Promise((resolve, reject) => {\n      Craft.sendActionRequest('POST', 'neo/configurator/render-field-layout', { data })\n        .then(response => {\n          this._fieldLayout = new BlockTypeFieldLayout({\n            namespace: [...this._templateNs, this._id],\n            html: response.data.html,\n            id: layoutId,\n            blockTypeId: settings.getId()\n          })\n\n          this.trigger('afterLoadFieldLayout')\n          resolve()\n        })\n        .catch(reject)\n    })\n  },\n\n  toggleSelect: function (select) {\n    this.base(select)\n\n    const settings = this.getSettings()\n    const fieldLayout = this.getFieldLayout()\n    const selected = this.isSelected()\n\n    if (settings) {\n      settings.$container.toggleClass('hidden', !selected)\n    }\n\n    if (fieldLayout) {\n      fieldLayout.$container.toggleClass('hidden', !selected)\n    } else if (selected) {\n      this.loadFieldLayout()\n    }\n\n    this.$container.toggleClass('is-selected', selected)\n  },\n\n  _updateTemplate () {\n    const settings = this.getSettings()\n\n    if (settings) {\n      this.$nameText.text(settings.getName())\n      this.$handleText.text(settings.getHandle())\n      this.$container.toggleClass('is-child', !settings.getTopLevel())\n    }\n  },\n\n  '@actionSelect' (e) {\n    const $option = $(e.option)\n\n    if ($option.hasClass('disabled')) {\n      return\n    }\n\n    switch ($option.attr('data-action')) {\n      case 'copy':\n        this.trigger('copy')\n        break\n      case 'paste':\n        this.trigger('paste')\n        break\n      case 'clone':\n        this.trigger('clone')\n        break\n      case 'delete':\n        if (window.confirm(Craft.t('neo', 'Are you sure you want to delete this block type?'))) {\n          this.getSettings().destroy()\n        }\n    }\n  }\n})\n","import $ from 'jquery'\nimport Garnish from 'garnish'\n\nexport default Garnish.Base.extend({\n\n  $container: new $(),\n  _sortOrder: 0,\n\n  getSortOrder () {\n    return this._sortOrder\n  },\n\n  setSortOrder (sortOrder) {\n    const oldSortOrder = this._sortOrder\n    this._sortOrder = sortOrder | 0\n\n    if (oldSortOrder !== this._sortOrder) {\n      this.trigger('change', {\n        property: 'sortOrder',\n        oldValue: oldSortOrder,\n        newValue: this._sortOrder\n      })\n    }\n  },\n\n  getFocusElement () {\n    return new $()\n  },\n\n  destroy () {\n    this.$foot?.remove()\n    this.trigger('destroy')\n  },\n\n  _refreshSetting ($container, showSetting, animate) {\n    animate = !Garnish.prefersReducedMotion() && (typeof animate === 'boolean' ? animate : true)\n\n    if (animate) {\n      if (showSetting) {\n        if ($container.hasClass('hidden')) {\n          $container\n            .removeClass('hidden')\n            .css({\n              opacity: 0,\n              marginBottom: -($container.outerHeight())\n            })\n            .velocity({\n              opacity: 1,\n              marginBottom: 24\n            }, 'fast')\n        }\n      } else if (!$container.hasClass('hidden')) {\n        $container\n          .css({\n            opacity: 1,\n            marginBottom: 24\n          })\n          .velocity({\n            opacity: 0,\n            marginBottom: -($container.outerHeight())\n          }, 'fast', () => {\n            $container.addClass('hidden')\n          })\n      }\n    } else {\n      $container\n        .toggleClass('hidden', !showSetting)\n        .css('margin-bottom', showSetting ? 24 : '')\n    }\n  }\n})\n","import $ from 'jquery'\nimport Craft from 'craft'\nimport Garnish from 'garnish'\nimport NS from '../namespace'\nimport Settings from './Settings'\n\nconst _defaults = {\n  namespace: [],\n  id: null,\n  sortOrder: 0,\n  fieldLayoutId: null,\n  fieldLayoutConfig: null,\n  name: '',\n  handle: '',\n  description: '',\n  maxBlocks: 0,\n  maxSiblingBlocks: 0,\n  minChildBlocks: 0,\n  maxChildBlocks: 0,\n  topLevel: true,\n  childBlocks: null,\n  childBlockTypes: [],\n  html: '',\n  js: '',\n  errors: {}\n}\n\nexport default Settings.extend({\n\n  _templateNs: [],\n  _childBlockTypes: [],\n  _initialised: false,\n\n  $sortOrderInput: new $(),\n  $nameInput: new $(),\n  $handleInput: new $(),\n  $descriptionInput: new $(),\n  $maxBlocksInput: new $(),\n  $maxSiblingBlocksInput: new $(),\n  $minChildBlocksInput: new $(),\n  $maxChildBlocksInput: new $(),\n\n  init (settings = {}) {\n    settings = Object.assign({}, _defaults, settings)\n\n    this._templateNs = NS.parse(settings.namespace)\n    this._childBlockTypes = []\n    this._childBlocks = settings.childBlocks\n    this._id = settings.id\n    this._fieldLayoutId = settings.fieldLayoutId\n    this._fieldLayoutConfig = settings.fieldLayoutConfig\n    this._errors = settings.errors\n    this._js = settings.js\n    this._settingsChildBlockTypes = settings.childBlockTypes\n    this.$container = $(settings.html)\n\n    const $neo = this.$container.find('[data-neo-bts]')\n    this.$sortOrderInput = $neo.filter('[data-neo-bts=\"input.sortOrder\"]')\n    this.$nameInput = $neo.filter('[data-neo-bts=\"input.name\"]')\n    this.$handleInput = $neo.filter('[data-neo-bts=\"input.handle\"]')\n    this.$descriptionInput = $neo.filter('[data-neo-bts=\"input.description\"]')\n    this.$maxBlocksInput = $neo.filter('[data-neo-bts=\"input.maxBlocks\"]')\n    this.$maxSiblingBlocksInput = $neo.filter('[data-neo-bts=\"input.maxSiblingBlocks\"]')\n    this.$minChildBlocksInput = $neo.filter('[data-neo-bts=\"input.minChildBlocks\"]')\n    this.$minChildBlocksContainer = $neo.filter('[data-neo-bts=\"container.minChildBlocks\"]')\n    this.$maxChildBlocksInput = $neo.filter('[data-neo-bts=\"input.maxChildBlocks\"]')\n    this.$maxChildBlocksContainer = $neo.filter('[data-neo-bts=\"container.maxChildBlocks\"]')\n    this.$topLevelInput = $neo.filter('[data-neo-bts=\"input.topLevel\"]')\n    this.$topLevelContainer = $neo.filter('[data-neo-bts=\"container.topLevel\"]')\n    this.$childBlocksInput = $neo.filter('[data-neo-bts=\"input.childBlocks\"]')\n    this.$childBlocksContainer = $neo.filter('[data-neo-bts=\"container.childBlocks\"]')\n    this.$deleteButton = $neo.filter('[data-neo-bts=\"button.delete\"]')\n\n    this.setSortOrder(settings.sortOrder)\n    this.setName(settings.name)\n    this.setHandle(settings.handle)\n    this.setDescription(settings.description)\n    this.setMaxBlocks(settings.maxBlocks)\n    this.setMaxSiblingBlocks(settings.maxSiblingBlocks)\n    this.setMinChildBlocks(settings.minChildBlocks)\n    this.setMaxChildBlocks(settings.maxChildBlocks)\n    this.setTopLevel(settings.topLevel)\n  },\n\n  initUi () {\n    if (this._initialised) {\n      return\n    }\n\n    this.$foot = $(this._js)\n    Garnish.$bod.append(this.$foot)\n\n    Craft.initUiElements(this.$container)\n\n    this._childBlocksSelect = this.$childBlocksInput.data('checkboxSelect')\n    this._topLevelLightswitch = this.$topLevelInput.data('lightswitch')\n    this._handleGenerator = new Craft.HandleGenerator(this.$nameInput, this.$handleInput)\n\n    // Ensure that an existing block type's handle will not be changed if the name is edited first.\n    if (this.getHandle() !== '') {\n      this._handleGenerator.stopListening()\n    }\n\n    for (const blockType of this._settingsChildBlockTypes) {\n      this.addChildBlockType(blockType)\n    }\n\n    this.setChildBlocks(this._childBlocks)\n\n    this.addListener(this.$nameInput, 'keyup change', () => {\n      this.setName(this.$nameInput.val())\n\n      if (this._handleGenerator.listening) {\n        // Wait for the handle to be auto-updated\n        setTimeout(() => this.setHandle(this.$handleInput.val()), 200)\n      }\n    })\n\n    this.addListener(this.$handleInput, 'keyup change textchange', () => this.setHandle(this.$handleInput.val()))\n    this.addListener(this.$descriptionInput, 'keyup change textchange', () => this.setDescription(this.$descriptionInput.val()))\n    this.addListener(this.$maxBlocksInput, 'keyup change', () => this.setMaxBlocks(this.$maxBlocksInput.val()))\n    this.addListener(this.$maxSiblingBlocksInput, 'keyup change', () => this.setMaxSiblingBlocks(this.$maxSiblingBlocksInput.val()))\n    this.addListener(this.$minChildBlocksInput, 'keyup change', () => this.setMinChildBlocks(this.$minChildBlocksInput.val()))\n    this.addListener(this.$maxChildBlocksInput, 'keyup change', () => this.setMaxChildBlocks(this.$maxChildBlocksInput.val()))\n    this.addListener(this._topLevelLightswitch, 'change', () => this.setTopLevel(this._topLevelLightswitch.on))\n    this.addListener(this.$deleteButton, 'click', () => {\n      if (window.confirm(Craft.t('neo', 'Are you sure you want to delete this block type?'))) {\n        this.destroy()\n      }\n    })\n\n    this.$childBlocksInput.on('change', 'input', () => this._refreshChildBlockSettings())\n\n    this._initialised = true\n  },\n\n  _generateChildBlocksCheckbox (settings) {\n    NS.enter(this._templateNs)\n    const id = NS.value('childBlock-' + settings.getId(), '-')\n    const name = NS.fieldName('childBlocks')\n    NS.leave()\n\n    return $(`\n      <div>\n        <input type=\"checkbox\" value=\"${settings.getHandle()}\" id=\"${id}\" class=\"checkbox\" name=\"${name}[]\" data-neo-btsc=\"input\">\n        <label for=\"${id}\" data-neo-btsc=\"text.label\">${settings.getName()}</label>\n      </div>`)\n  },\n\n  getFocusInput () {\n    return this.$nameInput\n  },\n\n  getId () {\n    return this._id\n  },\n\n  getFieldLayoutId () {\n    return this._fieldLayoutId\n  },\n\n  getFieldLayoutConfig () {\n    return Object.assign({}, this._fieldLayoutConfig)\n  },\n\n  isNew () {\n    return /^new/.test(this.getId())\n  },\n\n  getErrors () {\n    return this._errors\n  },\n\n  setSortOrder (sortOrder) {\n    this.base(sortOrder)\n\n    this.$sortOrderInput.val(this.getSortOrder())\n  },\n\n  getName () { return this._name },\n  setName (name) {\n    if (name !== this._name) {\n      const oldName = this._name\n      this._name = name\n\n      if (this.$nameInput.val() !== this._name) {\n        this.$nameInput.val(this._name)\n      }\n\n      this.trigger('change', {\n        property: 'name',\n        oldValue: oldName,\n        newValue: this._name\n      })\n    }\n  },\n\n  getHandle () { return this._handle },\n  setHandle (handle) {\n    if (handle !== this._handle) {\n      const oldHandle = this._handle\n      this._handle = handle\n\n      if (this.$handleInput.val() !== this._handle) {\n        this.$handleInput.val(this._handle)\n      }\n\n      this.trigger('change', {\n        property: 'handle',\n        oldValue: oldHandle,\n        newValue: this._handle\n      })\n    }\n  },\n\n  getDescription () { return this._description },\n  setDescription (description) {\n    if (description !== this._description) {\n      const oldDescription = this._description\n      this._description = description\n\n      if (this.$descriptionInput.val() !== this._description) {\n        this.$descriptionInput.val(this._description)\n      }\n\n      this.trigger('change', {\n        property: 'description',\n        oldValue: oldDescription,\n        newValue: this._description\n      })\n    }\n  },\n\n  getMaxBlocks () { return this._maxBlocks },\n  setMaxBlocks (maxBlocks) {\n    const oldMaxBlocks = this._maxBlocks\n    const newMaxBlocks = Math.max(0, maxBlocks | 0)\n\n    if (newMaxBlocks === 0) {\n      this.$maxBlocksInput.val(null)\n    }\n\n    if (oldMaxBlocks !== newMaxBlocks) {\n      this._maxBlocks = newMaxBlocks\n\n      if (this._maxBlocks > 0 && parseInt(this.$maxBlocksInput.val()) !== this._maxBlocks) {\n        this.$maxBlocksInput.val(this._maxBlocks)\n      }\n\n      this.trigger('change', {\n        property: 'maxBlocks',\n        oldValue: oldMaxBlocks,\n        newValue: this._maxBlocks\n      })\n    }\n  },\n\n  getMaxSiblingBlocks () { return this._maxSiblingBlocks },\n  setMaxSiblingBlocks (maxSiblingBlocks) {\n    const oldMaxSiblingBlocks = this._maxSiblingBlocks\n    const newMaxSiblingBlocks = Math.max(0, maxSiblingBlocks | 0)\n\n    if (newMaxSiblingBlocks === 0) {\n      this.$maxSiblingBlocksInput.val(null)\n    }\n\n    if (oldMaxSiblingBlocks !== newMaxSiblingBlocks) {\n      this._maxSiblingBlocks = newMaxSiblingBlocks\n\n      if (this._maxSiblingBlocks > 0 && parseInt(this.$maxSiblingBlocksInput.val()) !== this._maxSiblingBlocks) {\n        this.$maxSiblingBlocksInput.val(this._maxSiblingBlocks)\n      }\n\n      this.trigger('change', {\n        property: 'maxSiblingBlocks',\n        oldValue: oldMaxSiblingBlocks,\n        newValue: this._maxSiblingBlocks\n      })\n    }\n  },\n\n  getMinChildBlocks () { return this._minChildBlocks },\n  getMaxChildBlocks () { return this._maxChildBlocks },\n  setMinChildBlocks (minChildBlocks) { this._setBlocksConstraint('minChildBlocks', minChildBlocks) },\n  setMaxChildBlocks (maxChildBlocks) { this._setBlocksConstraint('maxChildBlocks', maxChildBlocks) },\n  _setBlocksConstraint (mode, value) {\n    const privateProp = `_${mode}`\n    const jqueryProp = `$${mode}Input`\n    const oldValue = this[privateProp]\n    const newValue = Math.max(0, value | 0)\n\n    if (newValue === 0) {\n      this[jqueryProp].val(null)\n    }\n\n    if (oldValue !== newValue) {\n      this[privateProp] = newValue\n\n      if (this[privateProp] > 0 && parseInt(this[jqueryProp].val()) !== this[privateProp]) {\n        this[jqueryProp].val(this[privateProp])\n      }\n\n      this.trigger('change', {\n        property: mode,\n        oldValue,\n        newValue: this[privateProp]\n      })\n    }\n  },\n\n  getTopLevel () { return this._topLevel },\n  setTopLevel (topLevel) {\n    const oldTopLevel = this._topLevel\n    const newTopLevel = !!topLevel\n\n    if (oldTopLevel !== newTopLevel) {\n      this._topLevel = newTopLevel\n\n      if (this._topLevelLightswitch && this._topLevelLightswitch.on !== this._topLevel) {\n        this._topLevelLightswitch.on = this._topLevel\n        this._topLevelLightswitch.toggle()\n      }\n\n      this.trigger('change', {\n        property: 'topLevel',\n        oldValue: oldTopLevel,\n        newValue: this._topLevel\n      })\n    }\n  },\n\n  getChildBlocks () {\n    const select = this._childBlocksSelect\n    const childBlocks = []\n\n    if (typeof select === 'undefined') {\n      return this._childBlocks === true ? true : Array.from(this._childBlocks ?? [])\n    }\n\n    if (select.$all.prop('checked')) {\n      return true\n    }\n\n    select.$options.each(function (index) {\n      const $option = $(this)\n\n      if ($option.prop('checked')) {\n        childBlocks.push($option.val())\n      }\n    })\n\n    return childBlocks.length > 0 ? childBlocks : false\n  },\n\n  setChildBlocks (childBlocks) {\n    const select = this._childBlocksSelect\n\n    if (childBlocks === true || childBlocks === '*') {\n      select.$all.prop('checked', true)\n      select.onAllChange()\n    } else if (Array.isArray(childBlocks)) {\n      select.$all.prop('checked', false)\n\n      for (const handle of childBlocks) {\n        select.$options.filter(`[value=\"${handle}\"]`).prop('checked', true)\n      }\n    } else {\n      select.$all.prop('checked', false)\n      select.$options.prop('checked', false)\n    }\n\n    this._refreshChildBlockSettings(false)\n  },\n\n  addChildBlockType (blockType) {\n    if (!this._childBlockTypes.includes(blockType)) {\n      const settings = blockType.getSettings()\n      const $checkbox = this._generateChildBlocksCheckbox(settings)\n\n      this._childBlockTypes.push(blockType)\n      this.$childBlocksContainer.append($checkbox)\n\n      this._refreshChildBlocks()\n\n      const select = this._childBlocksSelect\n      const allChecked = select.$all.prop('checked')\n      select.$options = select.$options.add($checkbox.find('input'))\n      if (allChecked) select.onAllChange()\n\n      const eventNs = '.childBlock' + this.getId()\n      settings.on('change' + eventNs, e => this['@onChildBlockTypeChange'](e, blockType, $checkbox))\n      settings.on('destroy' + eventNs, e => this.removeChildBlockType(blockType))\n    }\n  },\n\n  removeChildBlockType (blockType) {\n    const index = this._childBlockTypes.indexOf(blockType)\n    if (index >= 0) {\n      this._childBlockTypes.splice(index, 1)\n\n      const settings = blockType.getSettings()\n      const $checkbox = this.$childBlocksContainer.children().eq(index)\n\n      $checkbox.remove()\n\n      const select = this._childBlocksSelect\n      select.$options = select.$options.remove($checkbox.find('input'))\n\n      const eventNs = '.childBlock' + this.getId()\n      settings.off(eventNs)\n\n      this._refreshChildBlocks()\n    }\n  },\n\n  _refreshChildBlocks () {\n    const blockTypes = Array.from(this._childBlockTypes)\n    const $options = this.$childBlocksContainer.children()\n\n    const getOption = blockType => $options.get(blockTypes.indexOf(blockType))\n\n    this._childBlockTypes = this._childBlockTypes.sort((a, b) => a.getSettings().getSortOrder() - b.getSettings().getSortOrder())\n    $options.remove()\n\n    for (const blockType of this._childBlockTypes) {\n      const $option = getOption(blockType)\n      this.$childBlocksContainer.append($option)\n    }\n  },\n\n  _refreshChildBlockSettings (animate) {\n    this._refreshSetting(this.$minChildBlocksContainer, !!this.getChildBlocks(), animate)\n    this._refreshSetting(this.$maxChildBlocksContainer, !!this.getChildBlocks(), animate)\n  },\n\n  '@onChildBlockTypeChange' (e, blockType, $checkbox) {\n    const $neo = $checkbox.find('[data-neo-btsc]')\n    const $input = $neo.filter('[data-neo-btsc=\"input\"]')\n    const $labelText = $neo.filter('[data-neo-btsc=\"text.label\"]')\n\n    switch (e.property) {\n      case 'name':\n        $labelText.text(e.newValue)\n        break\n\n      case 'handle':\n        $input.val(e.newValue)\n        break\n\n      case 'sortOrder':\n        this._refreshChildBlocks()\n        break\n    }\n  }\n},\n{\n  _totalNewBlockTypes: 0,\n\n  getNewId () {\n    return `new${this._totalNewBlockTypes++}`\n  }\n})\n","import $ from 'jquery'\nimport Craft from 'craft'\nimport Item from './Item'\nimport NS from '../namespace'\n\nconst _defaults = {\n  namespace: []\n}\n\nexport default Item.extend({\n\n  _templateNs: [],\n\n  init (settings = {}) {\n    this.base(settings)\n\n    settings = Object.assign({}, _defaults, settings)\n\n    const settingsObj = this.getSettings()\n    this._templateNs = NS.parse(settings.namespace)\n\n    this.$container = this._generateGroup(settingsObj)\n\n    const $neo = this.$container.find('[data-neo-g]')\n    this.$nameText = $neo.filter('[data-neo-g=\"text.name\"]')\n    this.$moveButton = $neo.filter('[data-neo-g=\"button.move\"]')\n\n    if (settingsObj) {\n      settingsObj.on('change', () => this._updateTemplate())\n      settingsObj.on('destroy', () => this.trigger('destroy'))\n    }\n\n    this.deselect()\n  },\n\n  _generateGroup (settings) {\n    return $(`\n      <div class=\"nc_sidebar_list_item type-heading\">\n        <div class=\"label\" data-neo-g=\"text.name\">${settings.getName() ?? ''}</div>\n        <a class=\"move icon\" title=\"${Craft.t('neo', 'Reorder')}\" role=\"button\" data-neo-g=\"button.move\"></a>\n      </div>`)\n  },\n\n  toggleSelect: function (select) {\n    this.base(select)\n\n    const settings = this.getSettings()\n    const selected = this.isSelected()\n\n    if (settings) {\n      settings.$container.toggleClass('hidden', !selected)\n    }\n\n    this.$container.toggleClass('is-selected', selected)\n  },\n\n  _updateTemplate () {\n    const settings = this.getSettings()\n\n    if (settings) {\n      this.$nameText.text(settings.getName())\n    }\n  }\n})\n","import $ from 'jquery'\nimport Craft from 'craft'\nimport NS from '../namespace'\nimport Settings from './Settings'\n\nconst _defaults = {\n  namespace: [],\n  id: null,\n  sortOrder: 0,\n  name: '',\n  alwaysShowDropdown: null,\n  defaultAlwaysShowGroupDropdowns: true\n}\n\nexport default Settings.extend({\n\n  _templateNs: [],\n\n  $sortOrderInput: new $(),\n  $nameInput: new $(),\n  $handleInput: new $(),\n  $maxBlocksInput: new $(),\n\n  init (settings = {}) {\n    settings = Object.assign({}, _defaults, settings)\n\n    this._templateNs = NS.parse(settings.namespace)\n    this._id = settings.id\n    this._alwaysShowDropdown = settings.alwaysShowDropdown\n    this._defaultAlwaysShowGroupDropdowns = settings.defaultAlwaysShowGroupDropdowns\n\n    this.$container = this._generateGroupSettings()\n\n    const $neo = this.$container.find('[data-neo-gs]')\n    this.$sortOrderInput = $neo.filter('[data-neo-gs=\"input.sortOrder\"]')\n    this.$nameInput = $neo.filter('[data-neo-gs=\"input.name\"]')\n    this.$deleteButton = $neo.filter('[data-neo-gs=\"button.delete\"]')\n    this.$alwaysShowDropdownContainer = $neo.filter('[data-neo-gs=\"container.alwaysShowDropdown\"]')\n\n    this.setSortOrder(settings.sortOrder)\n    this.setName(settings.name)\n\n    this.addListener(this.$nameInput, 'keyup change', () => this.setName(this.$nameInput.val()))\n    this.addListener(this.$deleteButton, 'click', () => {\n      if (window.confirm(Craft.t('neo', 'Are you sure you want to delete this group?'))) {\n        this.destroy()\n      }\n    })\n  },\n\n  _generateGroupSettings () {\n    NS.enter(this._templateNs)\n    const sortOrderName = NS.fieldName('sortOrder')\n    const nameInputId = NS.value('name', '-')\n    const nameInputName = NS.fieldName('name')\n    const alwaysShowDropdownId = NS.value('alwaysShowDropdown', '-')\n    const alwaysShowDropdownName = NS.fieldName('alwaysShowDropdown')\n    NS.leave()\n    const alwaysShowDropdownOptions = [\n      {\n        value: 'show',\n        label: Craft.t('neo', 'Show')\n      },\n      {\n        value: 'hide',\n        label: Craft.t('neo', 'Hide')\n      },\n      {\n        value: 'global',\n        label: this._defaultAlwaysShowGroupDropdowns ? Craft.t('neo', 'Use global setting (Show)') : Craft.t('neo', 'Use global setting (Hide)')\n      }\n    ]\n    const $nameInput = Craft.ui.createTextField({\n      type: 'text',\n      id: nameInputId,\n      name: nameInputName,\n      label: Craft.t('neo', 'Name'),\n      instructions: Craft.t('neo', 'This can be left blank if you just want an unlabeled separator.'),\n      value: this.getName()\n    })\n    $nameInput.find('input').attr('data-neo-gs', 'input.name')\n\n    return $(`\n      <div>\n      <input type=\"hidden\" name=\"${sortOrderName}\" value=\"${this.getSortOrder()}\" data-neo-gs=\"input.sortOrder\">\n      <div>\n        ${$('<div class=\"field\">').append($nameInput).html()}\n        <div data-neo-gs=\"container.alwaysShowDropdown\">\n          <div class=\"field\">\n            ${Craft.ui.createSelectField({\n              label: Craft.t('neo', 'Always Show Dropdown?'),\n              instructions: Craft.t('neo', 'Whether to show the dropdown for this group if it only has one available block type.'),\n              id: alwaysShowDropdownId,\n              name: alwaysShowDropdownName,\n              options: alwaysShowDropdownOptions,\n              value: this._alwaysShowDropdown ? 'show' : (this._alwaysShowDropdown === false ? 'hide' : 'global')\n            }).html()}\n          </div>\n        </div>\n      </div>\n      <hr>\n      <a class=\"error delete\" data-neo-gs=\"button.delete\">${Craft.t('neo', 'Delete group')}</a>\n    </div>`)\n  },\n\n  getFocusInput () {\n    return this.$nameInput\n  },\n\n  getId () {\n    return this._id\n  },\n\n  setSortOrder (sortOrder) {\n    this.base(sortOrder)\n\n    this.$sortOrderInput.val(this.getSortOrder())\n  },\n\n  getName () { return this._name },\n  setName (name) {\n    if (name !== this._name) {\n      const oldName = this._name\n      this._name = name\n\n      this.$nameInput.val(this._name)\n      this._refreshAlwaysShowDropdown()\n\n      this.trigger('change', {\n        property: 'name',\n        oldValue: oldName,\n        newValue: this._name\n      })\n    }\n  },\n\n  getAlwaysShowDropdown () { return this._alwaysShowDropdown },\n\n  _refreshAlwaysShowDropdown (animate) {\n    this._refreshSetting(this.$alwaysShowDropdownContainer, !!this._name, animate)\n  }\n},\n{\n  _totalNewGroups: 0,\n\n  getNewId () {\n    return `new${this._totalNewGroups++}`\n  }\n})\n","import $ from 'jquery'\nimport '../jquery-extensions'\n\nimport Garnish from 'garnish'\nimport Craft from 'craft'\nimport { v4 as uuidv4 } from 'uuid'\nimport NS from '../namespace'\n\nimport BlockType from './BlockType'\nimport BlockTypeSettings from './BlockTypeSettings'\nimport BlockTypeFieldLayout from './BlockTypeFieldLayout'\nimport Group from './Group'\nimport GroupSettings from './GroupSettings'\nimport './styles/configurator.scss'\n\nconst _defaults = {\n  namespace: [],\n  blockTypes: [],\n  groups: [],\n  blockTypeSettingsHtml: '',\n  blockTypeSettingsJs: '',\n  fieldLayoutHtml: ''\n}\n\nexport default Garnish.Base.extend({\n\n  _templateNs: [],\n  _items: [],\n\n  init (settings = {}) {\n    settings = Object.assign({}, _defaults, settings)\n\n    const inputIdPrefix = Craft.formatInputId(settings.namespace)\n    const $field = $(`#${inputIdPrefix}-neo-configurator`)\n    this.$container = $field.children('.field').children('.input')\n\n    this._templateNs = NS.parse(settings.namespace)\n    this._blockTypeSettingsHtml = settings.blockTypeSettingsHtml\n    this._blockTypeSettingsJs = settings.blockTypeSettingsJs\n    this._fieldLayoutHtml = settings.fieldLayoutHtml\n    this._items = []\n\n    const $neo = this.$container.find('[data-neo]')\n    this.$mainContainer = $neo.filter('[data-neo=\"container.main\"]')\n    this.$sidebarContainer = $neo.filter('[data-neo=\"container.sidebar\"]')\n    this.$blockTypesContainer = $neo.filter('[data-neo=\"container.blockTypes\"]')\n    this.$settingsContainer = $neo.filter('[data-neo=\"container.settings\"]')\n    this.$fieldLayoutContainer = $neo.filter('[data-neo=\"container.fieldLayout\"]')\n    this.$blockTypeButton = $neo.filter('[data-neo=\"button.blockType\"]')\n    this.$groupButton = $neo.filter('[data-neo=\"button.group\"]')\n    this.$settingsButton = $neo.filter('[data-neo=\"button.settings\"]')\n    this.$fieldLayoutButton = $neo.filter('[data-neo=\"button.fieldLayout\"]')\n\n    this._itemSort = new Garnish.DragSort(null, {\n      container: this.$blockTypeItemsContainer,\n      handle: '[data-neo-bt=\"button.move\"], [data-neo-g=\"button.move\"]',\n      axis: 'y',\n      onSortChange: () => this._updateItemOrder()\n    })\n\n    // Add the existing block types and groups\n    const existingItems = []\n    const btNamespace = [...this._templateNs, 'blockTypes']\n    const gNamespace = [...this._templateNs, 'groups']\n\n    for (const btInfo of settings.blockTypes) {\n      const btSettings = new BlockTypeSettings({\n        namespace: [...btNamespace, btInfo.id],\n        sortOrder: btInfo.sortOrder,\n        id: btInfo.id,\n        name: btInfo.name,\n        handle: btInfo.handle,\n        description: btInfo.description,\n        maxBlocks: btInfo.maxBlocks,\n        maxSiblingBlocks: btInfo.maxSiblingBlocks,\n        minChildBlocks: btInfo.minChildBlocks,\n        maxChildBlocks: btInfo.maxChildBlocks,\n        topLevel: btInfo.topLevel,\n        html: btInfo.settingsHtml,\n        js: btInfo.settingsJs,\n        errors: btInfo.errors,\n        fieldLayoutId: btInfo.fieldLayoutId,\n        fieldLayoutConfig: btInfo.fieldLayoutConfig,\n        childBlockTypes: existingItems.filter(item => item instanceof BlockType)\n      })\n\n      const blockType = new BlockType({\n        namespace: btNamespace,\n        settings: btSettings\n      })\n\n      blockType.on('copy.configurator', () => this._copyBlockType(blockType))\n      blockType.on('paste.configurator', () => this._pasteBlockType())\n      blockType.on('clone.configurator', () => this._createBlockTypeFrom(blockType))\n      blockType.on('beforeLoadFieldLayout.configurator', () => this.$fieldLayoutContainer.append(\n        $('<span class=\"spinner\"/></span>')\n      ))\n      blockType.on('afterLoadFieldLayout.configurator', () => {\n        this.$fieldLayoutContainer.children('.spinner').remove()\n        this._addFieldLayout(blockType.getFieldLayout())\n      })\n      existingItems.push(blockType)\n    }\n\n    for (const gInfo of settings.groups) {\n      const gSettings = new GroupSettings({\n        namespace: [...gNamespace, gInfo.id],\n        sortOrder: gInfo.sortOrder,\n        id: gInfo.id,\n        name: gInfo.name,\n        alwaysShowDropdown: gInfo.alwaysShowDropdown,\n        defaultAlwaysShowGroupDropdowns: settings.defaultAlwaysShowGroupDropdowns\n      })\n\n      const group = new Group({\n        namespace: gNamespace,\n        settings: gSettings\n      })\n\n      existingItems.push(group)\n    }\n\n    for (const item of existingItems.sort((a, b) => a.getSettings().getSortOrder() - b.getSettings().getSortOrder())) {\n      this.addItem(item)\n    }\n\n    for (const blockType of this.getBlockTypes()) {\n      const btSettings = blockType.getSettings()\n      const info = settings.blockTypes.find(i => i.handle === btSettings.getHandle())\n\n      btSettings.setChildBlocks(info.childBlocks)\n    }\n\n    // Make sure menu states (for pasting block types) are updated when changing tabs\n    const refreshPasteOptions = () => {\n      const noPasteData = !window.localStorage.getItem('neo:copyBlockType')\n\n      for (const blockType of this.getBlockTypes()) {\n        blockType.$actionsMenu.find('[data-action=\"paste\"]').parent().toggleClass('disabled', noPasteData)\n      }\n    }\n\n    refreshPasteOptions()\n    this.addListener(document, 'visibilitychange.configurator', refreshPasteOptions)\n\n    this.selectTab('settings')\n\n    this.addListener(this.$blockTypeButton, 'click', '@newBlockType')\n    this.addListener(this.$groupButton, 'click', '@newGroup')\n    this.addListener(this.$settingsButton, 'click', () => this.selectTab('settings'))\n    this.addListener(this.$fieldLayoutButton, 'click', () => this.selectTab('fieldLayout'))\n  },\n\n  addItem (item, index = -1) {\n    const settings = item.getSettings()\n\n    this._insertAt(item.$container, index)\n    this._itemSort.addItems(item.$container)\n\n    if (settings) {\n      this.$settingsContainer.append(settings.$container)\n\n      if (item instanceof BlockType) {\n        settings.initUi()\n      }\n    }\n\n    this.$mainContainer.removeClass('hidden')\n\n    this.addListener(item.$container, 'click', '@selectItem')\n    item.on('destroy.configurator', () => this.removeItem(item, false))\n\n    if (item instanceof BlockType) {\n      this._addFieldLayout(item.getFieldLayout())\n    }\n\n    this._items.push(item)\n    this._updateItemOrder()\n\n    if (item instanceof BlockType) {\n      for (const blockType of this.getBlockTypes()) {\n        const btSettings = blockType.getSettings()\n        if (btSettings) btSettings.addChildBlockType(item)\n      }\n    }\n\n    this.trigger('addItem', {\n      item,\n      index\n    })\n  },\n\n  _addFieldLayout (fieldLayout) {\n    if (fieldLayout) {\n      this.$fieldLayoutContainer.append(fieldLayout.$container)\n    }\n  },\n\n  removeItem (item, showConfirm) {\n    showConfirm = (typeof showConfirm === 'boolean' ? showConfirm : false)\n\n    if (showConfirm) {\n      const message = Craft.t('neo', 'Are you sure you want to delete this {type}?', {\n        type:\n        item instanceof BlockType\n          ? 'block type'\n          : item instanceof Group\n            ? 'group'\n            : 'item'\n      })\n\n      if (window.confirm(message)) {\n        this.removeItem(item, false)\n      }\n    } else {\n      const settings = item.getSettings()\n\n      this._itemSort.removeItems(item.$container)\n\n      item.$container.remove()\n      if (settings) settings.$container.remove()\n\n      if (item instanceof BlockType) {\n        const fieldLayout = item.getFieldLayout()\n        if (fieldLayout) fieldLayout.$container.remove()\n      }\n\n      this.removeListener(item.$container, 'click')\n      item.off('.configurator')\n\n      this._updateItemOrder()\n\n      if (this._items.length === 0) {\n        this.$mainContainer.addClass('hidden')\n      }\n\n      this.trigger('removeItem', {\n        item\n      })\n    }\n  },\n\n  getItems () {\n    return Array.from(this._items)\n  },\n\n  getItemByElement ($element) {\n    return this._items.find(item => item.$container.is($element))\n  },\n\n  getSelectedItem () {\n    return this._items.find(item => item.isSelected())\n  },\n\n  selectItem (item, focusInput) {\n    focusInput = (typeof focusInput === 'boolean' ? focusInput : true)\n\n    const settings = item ? item.getSettings() : null\n\n    for (const i of this._items) {\n      const thisIsTheItem = i === item\n      i.toggleSelect(thisIsTheItem)\n\n      if (thisIsTheItem) {\n        const itemIsGroup = !(i instanceof BlockType)\n        this.$fieldLayoutButton.toggleClass('hidden', itemIsGroup)\n\n        if (itemIsGroup) {\n          this.selectTab('settings')\n        }\n      }\n    }\n\n    if (focusInput && settings && !Garnish.isMobileBrowser()) {\n      setTimeout(() => settings.getFocusInput().focus(), 100)\n    }\n  },\n\n  getBlockTypes () {\n    return this._items.filter(item => item instanceof BlockType)\n  },\n\n  getGroups () {\n    return this._items.filter(item => item instanceof Group)\n  },\n\n  selectTab (tab) {\n    this.$settingsContainer.toggleClass('hidden', tab !== 'settings')\n    this.$fieldLayoutContainer.toggleClass('hidden', tab !== 'fieldLayout')\n\n    this.$settingsButton.toggleClass('is-selected', tab === 'settings')\n    this.$fieldLayoutButton.toggleClass('is-selected', tab === 'fieldLayout')\n  },\n\n  _getNewBlockTypeSettingsHtml (blockTypeId, sortOrder) {\n    return this._blockTypeSettingsHtml\n      .replace(/__NEOBLOCKTYPE_ID__/g, blockTypeId)\n      .replace(/__NEOBLOCKTYPE_SORTORDER__/, sortOrder)\n  },\n\n  _getNewBlockTypeSettingsJs (blockTypeId) {\n    return this._blockTypeSettingsJs.replace(/__NEOBLOCKTYPE_ID__/g, blockTypeId)\n  },\n\n  _getNewFieldLayoutHtml () {\n    return this._fieldLayoutHtml.replace(\n      /&quot;uid&quot;:&quot;([a-f0-9-]+)&quot;/,\n      `&quot;uid&quot;:&quot;${uuidv4()}&quot;`\n    )\n  },\n\n  _updateItemOrder () {\n    const items = []\n\n    this._itemSort.$items.each((index, element) => {\n      const item = this.getItemByElement(element)\n\n      if (item) {\n        const settings = item.getSettings()\n        if (settings) settings.setSortOrder(index + 1)\n\n        items.push(item)\n      }\n    })\n\n    this._items = items\n  },\n\n  _createBlockTypeFrom (oldBlockType) {\n    const namespace = [...this._templateNs, 'blockTypes']\n    const id = BlockTypeSettings.getNewId()\n    const selectedItem = this.getSelectedItem()\n    const selectedIndex = selectedItem ? selectedItem.getSettings().getSortOrder() : -1\n\n    if (oldBlockType === null) {\n      const settings = new BlockTypeSettings({\n        childBlockTypes: this.getBlockTypes(),\n        id,\n        namespace: [...namespace, id],\n        sortOrder: this._items.length,\n        html: this._getNewBlockTypeSettingsHtml(id, selectedIndex),\n        js: this._getNewBlockTypeSettingsJs(id)\n      })\n      const fieldLayout = new BlockTypeFieldLayout({\n        blockTypeId: id,\n        html: this._getNewFieldLayoutHtml(),\n        namespace: [...namespace, id]\n      })\n\n      this._initBlockType(namespace, settings, fieldLayout, selectedIndex)\n    } else {\n      const oldSettings = oldBlockType.getSettings()\n      const settings = new BlockTypeSettings({\n        childBlocks: oldSettings.getChildBlocks(),\n        childBlockTypes: this.getBlockTypes(),\n        // Set a timestamp on the handle so it doesn't clash with the old one\n        handle: `${oldSettings.getHandle()}_${Date.now()}`,\n        id,\n        maxBlocks: oldSettings.getMaxBlocks(),\n        minChildBlocks: oldSettings.getMinChildBlocks(),\n        maxChildBlocks: oldSettings.getMaxChildBlocks(),\n        maxSiblingBlocks: oldSettings.getMaxSiblingBlocks(),\n        name: oldSettings.getName(),\n        description: oldSettings.getDescription(),\n        namespace: [...namespace, id],\n        sortOrder: this._items.length,\n        topLevel: oldSettings.getTopLevel(),\n        html: this._getNewBlockTypeSettingsHtml(id, selectedIndex),\n        js: this._getNewBlockTypeSettingsJs(id)\n      })\n      const $spinner = $('<div class=\"nc_sidebar_list_item type-spinner\"><span class=\"spinner\"></span></div>')\n      this._insertAt($spinner, selectedIndex)\n\n      oldBlockType.loadFieldLayout()\n        .then(() => {\n          const layout = oldBlockType.getFieldLayout().getConfig()\n\n          if (layout.tabs.length > 0) {\n            const data = { layout }\n\n            Craft.queue.push(() => new Promise((resolve, reject) => {\n              Craft.sendActionRequest('POST', 'neo/configurator/render-field-layout', { data })\n                .then(response => {\n                  const fieldLayout = new BlockTypeFieldLayout({\n                    blockTypeId: id,\n                    html: response.data.html,\n                    namespace: [...namespace, id]\n                  })\n\n                  this.$blockTypesContainer.find('.type-spinner').remove()\n                  this._initBlockType(namespace, settings, fieldLayout, selectedIndex)\n                  resolve()\n                })\n                .catch(reject)\n            }))\n          } else {\n            const fieldLayout = new BlockTypeFieldLayout({\n              blockTypeId: id,\n              html: this._getNewFieldLayoutHtml(),\n              namespace: [...namespace, id]\n            })\n\n            this.$blockTypesContainer.find('.type-spinner').remove()\n            this._initBlockType(namespace, settings, fieldLayout, selectedIndex)\n          }\n        })\n        .catch(() => Craft.cp.displayError(Craft.t('neo', 'Couldn’t create new block type.')))\n    }\n  },\n\n  _initBlockType (namespace, settings, fieldLayout, index) {\n    const blockType = new BlockType({ namespace, settings, fieldLayout })\n\n    this.addItem(blockType, index)\n    this.selectItem(blockType)\n    this.selectTab('settings')\n\n    blockType.on('copy.configurator', () => this._copyBlockType(blockType))\n    blockType.on('paste.configurator', () => this._pasteBlockType())\n    blockType.on('clone.configurator', () => this._createBlockTypeFrom(blockType))\n  },\n\n  _copyBlockType (blockType) {\n    blockType.loadFieldLayout()\n      .then(() => {\n        const settings = blockType.getSettings()\n        const data = {\n          childBlocks: settings.getChildBlocks(),\n          handle: settings.getHandle(),\n          layout: blockType.getFieldLayout().getConfig(),\n          maxBlocks: settings.getMaxBlocks(),\n          minChildBlocks: settings.getMinChildBlocks(),\n          maxChildBlocks: settings.getMaxChildBlocks(),\n          maxSiblingBlocks: settings.getMaxSiblingBlocks(),\n          name: settings.getName(),\n          topLevel: settings.getTopLevel()\n        }\n\n        window.localStorage.setItem('neo:copyBlockType', JSON.stringify(data))\n        this.getBlockTypes().forEach(bt => bt.$actionsMenu.find('[data-action=\"paste\"]').parent().removeClass('disabled'))\n      })\n      .catch(() => Craft.cp.displayError(Craft.t('neo', 'Couldn’t copy block type.')))\n  },\n\n  _pasteBlockType () {\n    const encodedData = window.localStorage.getItem('neo:copyBlockType')\n\n    if (!encodedData) {\n      return\n    }\n\n    const data = JSON.parse(encodedData)\n    const blockTypeHandles = this.getBlockTypes().map(bt => bt.getSettings().getHandle())\n    const childBlocks = Array.isArray(data.childBlocks)\n      ? data.childBlocks.filter(cb => blockTypeHandles.includes(cb))\n      : (data.childBlocks ? true : [])\n    const settings = new BlockTypeSettings({\n      childBlocks,\n      childBlockTypes: this.getBlockTypes(),\n      handle: data.handle,\n      maxBlocks: data.maxBlocks,\n      minChildBlocks: data.minChildBlocks,\n      maxChildBlocks: data.maxChildBlocks,\n      maxSiblingBlocks: data.maxSiblingBlocks,\n      name: data.name,\n      topLevel: data.topLevel\n    })\n\n    const fieldLayout = new BlockTypeFieldLayout({\n      html: this._getNewFieldLayoutHtml(),\n      layout: data.layout\n    })\n\n    const blockType = new BlockType({\n      settings,\n      fieldLayout\n    })\n\n    this._createBlockTypeFrom(blockType)\n  },\n\n  _insertAt (element, index) {\n    const $element = $(element)\n\n    if (index >= 0 && index < this._items.length) {\n      $element.insertAt(index, this.$blockTypesContainer)\n    } else {\n      this.$blockTypesContainer.append($element)\n    }\n  },\n\n  '@newBlockType' () {\n    this._createBlockTypeFrom(null)\n  },\n\n  '@newGroup' () {\n    const namespace = [...this._templateNs, 'groups']\n    const id = GroupSettings.getNewId()\n\n    const settings = new GroupSettings({\n      namespace: [...namespace, id],\n      sortOrder: this._items.length,\n      id\n    })\n\n    const group = new Group({\n      namespace,\n      settings\n    })\n\n    const selected = this.getSelectedItem()\n    const index = selected ? selected.getSettings().getSortOrder() : -1\n\n    this.addItem(group, index)\n    this.selectItem(group)\n  },\n\n  '@selectItem' (e) {\n    const item = this.getItemByElement(e.currentTarget)\n\n    this.selectItem(item)\n  }\n})\n","import Configurator from './configurator/Configurator'\n\nconst context = window ?? this\nconst configurators = []\n\ncontext.Neo = {\n  Configurator,\n  configurators,\n\n  createConfigurator (settings = {}) {\n    const configurator = new Configurator(settings)\n    configurators.push(configurator)\n\n    return configurator\n  }\n}\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","jQuery","$","index","$parent","this","each","prepend","children","eq","after","Garnish","Craft","getRandomValues","rnds8","Uint8Array","rng","crypto","bind","msCrypto","Error","uuid","byteToHex","i","push","toString","substr","arr","offset","arguments","length","undefined","toLowerCase","TypeError","options","buf","rnds","random","_stack","enter","segments","join","fromFieldName","joined","getNamespace","enterByFieldName","fieldName","leave","pop","Array","from","parse","value","indexOf","split","separator","prefix","toFieldName","replace","slice","match","_defaults","settings","_selected","init","assign","_settings","getSettings","select","toggleSelect","deselect","trigger","selected","isSelected","namespace","html","layout","id","blockId","blockName","_templateNs","NS","_id","_blockTypeId","blockTypeId","$container","find","removeAttr","nameInput","name","JSON","stringify","_fld","customizableTabs","customizableUi","updateChildBlocksUiElement","selector","$uiLibraryElement","$uiLibraryElements","filter","$tabUiElement","$tabContainer","toggleClass","hasClass","removeClass","_tabObserver","window","MutationObserver","observe","childList","subtree","getId","getBlockTypeId","getConfig","newConfig","tabs","tab","config","newElements","element","elements","newElement","fieldLayout","Item","extend","base","settingsObj","_fieldLayout","_generateBlockType","$neo","$nameText","$handleText","$moveButton","$actionsButton","$actionsMenu","_actionsMenu","on","e","addListener","stopPropagation","_updateTemplate","errors","getErrors","hasErrors","isArray","keys","getName","getHandle","getFieldLayout","loadFieldLayout","Promise","resolve","getFieldLayoutConfig","layoutId","getFieldLayoutId","data","reject","then","response","BlockTypeFieldLayout","catch","text","getTopLevel","$option","option","attr","confirm","destroy","_sortOrder","getSortOrder","setSortOrder","sortOrder","oldSortOrder","property","oldValue","newValue","getFocusElement","$foot","remove","_refreshSetting","showSetting","animate","css","opacity","marginBottom","outerHeight","velocity","addClass","fieldLayoutId","fieldLayoutConfig","handle","description","maxBlocks","maxSiblingBlocks","minChildBlocks","maxChildBlocks","topLevel","childBlocks","childBlockTypes","js","Settings","_childBlockTypes","_initialised","$sortOrderInput","$nameInput","$handleInput","$descriptionInput","$maxBlocksInput","$maxSiblingBlocksInput","$minChildBlocksInput","$maxChildBlocksInput","_childBlocks","_fieldLayoutId","_fieldLayoutConfig","_errors","_js","_settingsChildBlockTypes","$minChildBlocksContainer","$maxChildBlocksContainer","$topLevelInput","$topLevelContainer","$childBlocksInput","$childBlocksContainer","$deleteButton","setName","setHandle","setDescription","setMaxBlocks","setMaxSiblingBlocks","setMinChildBlocks","setMaxChildBlocks","setTopLevel","initUi","_childBlocksSelect","_topLevelLightswitch","_handleGenerator","stopListening","blockType","addChildBlockType","setChildBlocks","val","listening","setTimeout","_refreshChildBlockSettings","_generateChildBlocksCheckbox","getFocusInput","isNew","test","_name","oldName","_handle","oldHandle","getDescription","_description","oldDescription","getMaxBlocks","_maxBlocks","oldMaxBlocks","newMaxBlocks","Math","max","parseInt","getMaxSiblingBlocks","_maxSiblingBlocks","oldMaxSiblingBlocks","newMaxSiblingBlocks","getMinChildBlocks","_minChildBlocks","getMaxChildBlocks","_maxChildBlocks","_setBlocksConstraint","mode","privateProp","jqueryProp","_topLevel","oldTopLevel","newTopLevel","toggle","getChildBlocks","$all","$options","onAllChange","includes","$checkbox","append","_refreshChildBlocks","allChecked","add","eventNs","removeChildBlockType","splice","off","blockTypes","getOption","sort","b","$input","$labelText","_totalNewBlockTypes","getNewId","_generateGroup","alwaysShowDropdown","defaultAlwaysShowGroupDropdowns","_alwaysShowDropdown","_defaultAlwaysShowGroupDropdowns","_generateGroupSettings","$alwaysShowDropdownContainer","sortOrderName","nameInputId","nameInputName","alwaysShowDropdownId","alwaysShowDropdownName","alwaysShowDropdownOptions","label","type","instructions","_refreshAlwaysShowDropdown","getAlwaysShowDropdown","_totalNewGroups","groups","blockTypeSettingsHtml","blockTypeSettingsJs","fieldLayoutHtml","_items","inputIdPrefix","$field","_blockTypeSettingsHtml","_blockTypeSettingsJs","_fieldLayoutHtml","$mainContainer","$sidebarContainer","$blockTypesContainer","$settingsContainer","$fieldLayoutContainer","$blockTypeButton","$groupButton","$settingsButton","$fieldLayoutButton","_itemSort","container","$blockTypeItemsContainer","axis","onSortChange","_updateItemOrder","existingItems","btNamespace","gNamespace","btInfo","btSettings","BlockTypeSettings","settingsHtml","settingsJs","item","BlockType","_copyBlockType","_pasteBlockType","_createBlockTypeFrom","_addFieldLayout","gInfo","gSettings","GroupSettings","group","Group","addItem","getBlockTypes","info","refreshPasteOptions","noPasteData","localStorage","getItem","parent","document","selectTab","_insertAt","addItems","removeItem","showConfirm","message","removeItems","removeListener","getItems","getItemByElement","$element","is","getSelectedItem","selectItem","focusInput","thisIsTheItem","itemIsGroup","focus","getGroups","_getNewBlockTypeSettingsHtml","_getNewBlockTypeSettingsJs","_getNewFieldLayoutHtml","uuidv4","items","$items","oldBlockType","selectedItem","selectedIndex","_initBlockType","oldSettings","Date","now","$spinner","setItem","forEach","bt","encodedData","blockTypeHandles","map","cb","insertAt","currentTarget","context","configurators","Neo","Configurator","createConfigurator","configurator"],"sourceRoot":""}