!function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var o=n(18),r=i(o),a="undefined"!=typeof window?window:void 0,s=[];a.Neo={Input:r.default,inputs:s,createInput:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new r.default(e);return s.push(t),t}}},,function(e,t){e.exports=jQuery},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var o=n(2),r=i(o);r.default.fn.insertAt=function(e,t){return this.each(function(){0===e?t.prepend(this):t.children().eq(e-1).after(this)})}},function(e,t){e.exports=Garnish},function(e,t){e.exports=Craft},function(e,t){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default={_stack:[[]],enter:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("string"==typeof e&&(e=this.fromFieldName(e)),t){var i=this.getNamespace();i.push.apply(i,n(e)),e=i}this._stack.push(e)},enterByFieldName:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.enter(this.fromFieldName(e),t)},leave:function(){return this._stack.length>1?this._stack.pop():this.getNamespace()},getNamespace:function(){return Array.from(this._stack[this._stack.length-1])},parse:function(e){return"string"==typeof e?e.indexOf("[")>-1?this.fromFieldName(e):e.indexOf("-")>-1?e.split("-"):e.indexOf(".")>-1?e.split("."):e:Array.from(e)},value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n=this.getNamespace();return n.push(e),n.join(t)},fieldName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.toFieldName();return t?t+e.replace(/([^'"[\]]+)([^'"]*)/,"[$1]$2"):e},toString:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"-";return this.getNamespace().join(e)},toFieldName:function(){var e=this.getNamespace();switch(e.length){case 0:return"";case 1:return e[0]}return e[0]+"["+e.slice(1).join("][")+"]"},fromFieldName:function(e){return e.match(/[^[\]\s]+/g)||[]}}},,,,,,,,,,function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},o=0;o<this.length;o++){var r=this[o][0];"number"==typeof r&&(i[r]=!0)}for(o=0;o<t.length;o++){var a=t[o];"number"==typeof a[0]&&i[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(e,t,n){function i(e,t){for(var n=0;n<e.length;n++){var i=e[n],o=h[i.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](i.parts[r]);for(;r<i.parts.length;r++)o.parts.push(c(i.parts[r],t))}else{for(var a=[],r=0;r<i.parts.length;r++)a.push(c(i.parts[r],t));h[i.id]={id:i.id,refs:1,parts:a}}}}function o(e){for(var t=[],n={},i=0;i<e.length;i++){var o=e[i],r=o[0],a=o[1],s=o[2],l=o[3],c={css:a,media:s,sourceMap:l};n[r]?n[r].parts.push(c):t.push(n[r]={id:r,parts:[c]})}return t}function r(e,t){var n=b(),i=v[v.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),v.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function a(e){e.parentNode.removeChild(e);var t=v.indexOf(e);t>=0&&v.splice(t,1)}function s(e){var t=document.createElement("style");return t.type="text/css",r(e,t),t}function l(e){var t=document.createElement("link");return t.rel="stylesheet",r(e,t),t}function c(e,t){var n,i,o;if(t.singleton){var r=m++;n=y||(y=s(t)),i=p.bind(null,n,r,!1),o=p.bind(null,n,r,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=l(t),i=d.bind(null,n),o=function(){a(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(t),i=u.bind(null,n),o=function(){a(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}function p(e,t,n,i){var o=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=_(t,o);else{var r=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(r,a[t]):e.appendChild(r)}}function u(e,t){var n=t.css,i=t.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function d(e,t){var n=t.css,i=t.sourceMap;i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var o=new Blob([n],{type:"text/css"}),r=e.href;e.href=URL.createObjectURL(o),r&&URL.revokeObjectURL(r)}var h={},f=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},g=f(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),b=f(function(){return document.head||document.getElementsByTagName("head")[0]}),y=null,m=0,v=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=g()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var n=o(e);return i(n,t),function(e){for(var r=[],a=0;a<n.length;a++){var s=n[a],l=h[s.id];l.refs--,r.push(l)}if(e){var c=o(e);i(c,t)}for(var a=0;a<r.length;a++){var l=r[a];if(0===l.refs){for(var p=0;p<l.parts.length;p++)l.parts[p]();delete h[l.id]}}}};var _=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=i(r);n(3);var s=n(4),l=i(s),c=n(5),p=i(c),u=n(6),d=i(u),h=n(19),f=i(h),g=n(20),b=i(g),y=n(22),m=i(y),v=n(23),_=i(v),k=n(25),x=i(k);n(26),n(32);var w={name:null,namespace:[],blockTypes:[],groups:[],blocks:[],inputId:null,maxBlocks:0,maxTopBlocks:0,maxLevels:0};t.default=l.default.Base.extend({_templateNs:[],_name:null,_locale:null,init:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=Object.assign({},w,t),this._templateNs=d.default.parse(t.namespace),this._blockTypes=[],this._groups=t.groups.map(function(e){return new m.default(e)}),this._blocks=[],this._name=t.name,this._maxBlocks=t.maxBlocks,this._maxTopBlocks=t.maxTopBlocks,this._maxLevels=t.maxLevels,this._ownerId=null;var n=(0,a.default)('[name="setId"], [name="entryId"], [name="categoryId"]');n.length&&(this._ownerId=n.val()),this.$container=(0,a.default)("#"+t.inputId);var i={};this._groups.forEach(function(e){i[e.getId()]=!0});var r={},s=!0,c=!1,p=void 0;try{for(var u,h=t.blockTypes[Symbol.iterator]();!(s=(u=h.next()).done);s=!0){var g=u.value;if(null===g.groupId||"undefined"!=typeof i[g.groupId]){var y=new b.default(g);this._blockTypes.push(y),r[y.getHandle()]=y}}}catch(e){c=!0,p=e}finally{try{!s&&h.return&&h.return()}finally{if(c)throw p}}var v=this.$container.closest("form");this._locale=v.find('input[name="siteId"]').val();var k=this.$container.find("[data-neo]");this.$blocksContainer=k.filter('[data-neo="container.blocks"]'),this.$buttonsContainer=k.filter('[data-neo="container.buttons"]'),this._buttons=new x.default({blockTypes:this.getBlockTypes(!0),groups:this.getGroups(),maxBlocks:this.getMaxBlocks(),maxTopBlocks:this.getMaxTopBlocks()}),this.$buttonsContainer.append(this._buttons.$container),this._buttons.on("newBlock",function(t){return e["@newBlock"](t)}),this._buttons.initUi(),this._blockSort=new f.default({container:this.$blocksContainer,handle:'[data-neo-b$=".button.move"]',maxTopBlocks:this.getMaxTopBlocks(),filter:function(){return e._blockSort.$targetItem.hasClass("is-selected")?e._blockSelect.getSelectedItems():e._blockSort.$targetItem},collapseDraggees:!0,magnetStrength:4,helperLagBase:1.5,helperOpacity:.9,onDragStop:function(){e._updateBlockOrder(),e._updateButtons()}}),this._blockSelect=new l.default.Select(this.$blocksContainer,null,{multi:!0,vertical:!0,handle:'[data-neo-b$=".select"]',checkboxMode:!0,selectedClass:"is-selected sel"}),this.$blocksContainer.find(".ni_block").each(function(t,n){var i=(0,a.default)(n),s={};s.id=i.attr("data-neo-b-id"),s.sortOrder=t,s.collapsed=i.hasClass("is-collapsed"),s.enabled=!!i.find('[data-neo-b="'+s.id+'.input.enabled"]').val(),s.level=parseInt(i.find('[data-neo-b="'+s.id+'.input.level"]').val()),s.field=e,s.namespace=[].concat(o(e._templateNs),[s.id]);var l=i.find('[data-neo-b="'+s.id+'.input.type"]').val(),c=r[l];s.blockType=new b.default({id:c.getId(),fieldLayoutId:c.getFieldLayoutId(),fieldTypes:c.getFieldTypes(),name:c.getName(),handle:c.getHandle(),maxBlocks:c.getMaxBlocks(),maxSiblingBlocks:c.getMaxSiblingBlocks(),maxChildBlocks:c.getMaxChildBlocks(),childBlocks:c.getChildBlocks(),topLevel:c.getTopLevel()}),s.buttons=new x.default({items:c.getChildBlockItems(e.getItems()),maxBlocks:e.getMaxBlocks()}),s.showButtons=!e.atMaxLevels(s.level);var p=new _.default(s);p.initUi(!1),e._setBlockEvents(p),e._blocks.push(p),e._blockSort.addBlock(p),e._blockSelect.addItems(p.$container)}),this._updateBlockOrder(),this._updateBlockChildren(),this._updateButtons(),this.addListener(this.$container,"resize",function(){return e.updateResponsiveness()});var B="function"==typeof v.data("serializer")?v.data("serializer")():v.serialize();v.data("initialSerializedValue",B),this._setMatrixClassErrors(),this._setBlockTypeClassErrors(),this._blocks.filter(function(e){return!e.isExpanded()}).forEach(function(e){return e.updatePreview()}),this.trigger("afterInit")},updateResponsiveness:function(){var e=!0,t=!1,n=void 0;try{for(var i,o=this._blocks[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var r=i.value;r.updateResponsiveness();var a=r.getButtons();a&&a.updateResponsiveness()}}catch(e){t=!0,n=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw n}}this._buttons.updateResponsiveness(),this._tempButtons&&this._tempButtons.updateResponsiveness()},addBlock:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=this._blocks.length;t=t>=0?Math.max(0,Math.min(t,o)):o,i="boolean"!=typeof i||i;var r=t>0&&this._blocks[t-1],a=t<o&&this._blocks[t];if(r){var s=a?a.getLevel():0,c=r.getLevel()+(r.getBlockType().isParent()?1:0);n=Math.max(s,Math.min(n,c));var p=this._findPrevBlockOnLevel(t,n);p?p.$container.after(e.$container):r.$blocksContainer.prepend(e.$container)}else this.$blocksContainer.prepend(e.$container);e.setLevel(n),this._blocks.push(e),this._blockSort.addBlock(e),this._blockSelect.addItems(e.$container),e.initUi(),this._setBlockEvents(e),this._destroyTempButtons(),this._updateBlockOrder(),this._updateBlockChildren(),this._updateButtons(),i&&e.$container.css({opacity:0,marginBottom:-e.$container.outerHeight()}).velocity({opacity:1,marginBottom:10},"fast",function(t){return l.default.requestAnimationFrame(function(){return l.default.scrollContainerToElement(e.$container)})}),this.trigger("addBlock",{block:e,index:t})},removeBlock:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;window.draftEditor&&window.draftEditor.pause(),n="boolean"!=typeof n||n,i="boolean"==typeof i&&i;var o=this._findChildBlocks(this._blocks.indexOf(e)),r=!0,a=!1,s=void 0;try{for(var l,c=o[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var p=l.value;this.removeBlock(p,!0,!0)}}catch(e){a=!0,s=e}finally{try{!r&&c.return&&c.return()}finally{if(a)throw s}}e.off(".input"),this._blocks=this._blocks.filter(function(t){return t!==e}),this._blockSort.removeItems(e.$container),this._blockSelect.removeItems(e.$container),this._destroyTempButtons(),this._updateButtons();var u=function(){e.$container.remove(),t._updateBlockChildren(),window.draftEditor&&window.draftEditor.resume()};n?e.$container.css({opacity:1,marginBottom:10}).velocity({opacity:0,marginBottom:i?10:-e.$container.outerHeight()},"fast",function(e){return u()}):u(),e.destroy(),this.trigger("removeBlock",{block:e})},_setBlockEvents:function(e){var t=this;e.on("removeBlock.input",function(n){t.getSelectedBlocks().length>1?window.confirm(p.default.t("neo","Are you sure you want to delete the selected blocks?"))&&t._blockBatch(e,function(e){return t.removeBlock(e)}):t.removeBlock(e)}),e.on("toggleEnabled.input",function(n){return t._blockBatch(e,function(e){return e.toggleEnabled(n.enabled)})}),e.on("toggleExpansion.input",function(n){return t._blockBatch(e,function(e){return e.toggleExpansion(n.expanded)})}),e.on("moveUpBlock.input",function(n){return t._moveBlock(e,"up")}),e.on("moveDownBlock.input",function(n){return t._moveBlock(e,"down")}),e.on("newBlock.input",function(n){return t["@newBlock"](Object.assign(n,{index:t._getNextBlockIndex(e)}))}),e.on("addBlockAbove.input",function(e){return t["@addBlockAbove"](e)}),e.on("copyBlock.input",function(e){return t["@copyBlock"](e)}),e.on("pasteBlock.input",function(e){return t["@pasteBlock"](e)}),e.on("duplicateBlock.input",function(e){return t["@duplicateBlock"](e)})},_moveBlock:function(e,t){var n=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(["up","down"].includes(t)){window.draftEditor&&window.draftEditor.pause();var o=e.getSiblings(this.getBlocks()),r=o.indexOf(e),a=r>0&&"up"===t,s=r<o.length-1&&"down"===t;if(r!==-1&&a!==s){var c="boolean"!=typeof i||i,p=e.$container,u=function(){p.detach(),a?o[r-1].$container.before(p):o[r+1].$container.after(p)},d=function(){n._updateBlockOrder(),n._updateButtons(),window.draftEditor&&window.draftEditor.resume()};c?p.css({opacity:1,marginBottom:10}).velocity({opacity:0,marginBottom:-p.outerHeight()},"fast",function(e){u(),p.css({opacity:0,marginBottom:-p.outerHeight()}).velocity({opacity:1,marginBottom:10},"fast",function(e){d(),l.default.requestAnimationFrame(function(){return l.default.scrollContainerToElement(p)})})}):(u(),d())}}},getBlockByElement:function(e){return this._blocks.find(function(t){return t.$container.is(e)})},getBlocks:function(){return Array.from(this._blocks)},getBlockTypeById:function(e){return this._blockTypes.find(function(t){return t.getId()===e})},getBlockTypeByHandle:function(e){return this._blockTypes.find(function(t){return t.getHandle()===e})},getBlockTypes:function(e){return e="boolean"==typeof e&&e,e?this._blockTypes.filter(function(e){return e.getTopLevel()}):Array.from(this._blockTypes)},getGroups:function(){return Array.from(this._groups)},getItems:function(){return[].concat(o(this.getBlockTypes()),o(this.getGroups())).sort(function(e,t){return e.getSortOrder()-t.getSortOrder()})},getMaxBlocks:function(){return this._maxBlocks},getMaxTopBlocks:function(){return this._maxTopBlocks},getMaxLevels:function(){return this._maxLevels},atMaxLevels:function(e){return this._maxLevels>0&&e+1>=this._maxLevels},getSelectedBlocks:function(){var e=this._blockSelect.getSelectedItems();return this._blocks.filter(function(t){return t.$container.closest(e).length>0})},_setMatrixClassErrors:function(){var e=(0,a.default)(".ni_block_body .matrix-field .input.errors");e.length&&e.each(function(){var e=(0,a.default)(this),t=e.closest(".ni_block_content_tab"),n=t.data("neo-b-info"),i=e.closest(".ni_block"),o=i.find('.tabs .tab[data-neo-b-info="'+n+'"]');o.length&&o.addClass("has-errors")})},_setBlockTypeClassErrors:function(){var e=(0,a.default)(".ni_block .tab.has-errors");e.length&&e.each(function(){var t=e.parents(".ni_block.is-collapsed");t.each(function(){var e=(0,a.default)(this);e.find("> .ni_block_topbar .title .blocktype").addClass("has-errors")})})},_updateBlockOrder:function(){var e=this,t=[];this.$blocksContainer.find(".ni_block").each(function(n,i){var o=e.getBlockByElement(i);t.push(o)}),this._blocks=t},_updateBlockChildren:function(){var e=!0,t=!1,n=void 0;try{for(var i,o=this._blocks[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){for(var r=i.value,a=r.$blocksContainer.children(".ni_block"),s=Math.min(a.length,8),l=[],c=0;c<s;c++)l.push('<div class="ni_block_collapsed-children_child"></div>');r.$collapsedChildrenContainer.html(l.join(""))}}catch(e){t=!0,n=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw n}}},_checkMaxChildren:function(e){if(!e)return!0;var t=e.getBlockType(),n=t.getMaxChildBlocks();if(n>0){var i=this._findChildBlocks(e);return i.length<n}return!0},_updateButtons:function(){var e=this,t=this.getBlocks();this._buttons.updateButtonStates(t),this._tempButtons&&this._tempButtons.updateButtonStates(t,this._checkMaxChildren(this._tempButtonsBlock));var n=!0,i=!1,o=void 0;try{for(var r,a=t[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var s=r.value,l=this._findParentBlock(s),c=l?l.getBlockType():null,p=s.getButtons(),u=s.getLevel(),d=c?c.getChildBlocks():this.getBlockTypes(!0);d===!0||"*"===d?d=this.getBlockTypes(!1):Array.isArray(d)&&(d=d.map(function(t){return"string"==typeof t?e.getBlockTypeByHandle(t):t})),s.updateMenuStates(this._name,t,this.getMaxBlocks(),this._checkMaxChildren(l),d,0===u?this.getMaxTopBlocks():0),p&&p.updateButtonStates(t,this._checkMaxChildren(s),s),s.toggleShowButtons(!this.atMaxLevels(u))}}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}},_blockBatch:function(e,t){var n=e.isSelected()?this.getSelectedBlocks():[e],i=!0,o=!1,r=void 0;try{for(var a,s=n[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;t(l)}}catch(e){o=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}},_destroyTempButtons:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e="boolean"!=typeof e||e,this._tempButtons){var t=this._tempButtons;t.off("newBlock"),e?t.$container.css({opacity:1,marginBottom:10}).velocity({opacity:0,marginBottom:-t.$container.outerHeight()},"fast",function(e){return t.$container.remove()}):t.$container.remove(),this._tempButtons=null,this._tempButtonsBlock=null}},_findPrevBlockOnLevel:function(e,t){e instanceof _.default&&(e=this._blocks.indexOf(e));for(var n=this._blocks,i=n[--e],o=Number.MAX_VALUE;i;){var r=i.getLevel();if(r<o){if(r===t)return i;o=r}i=this._blocks[--e]}return!1},_findChildBlocks:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e instanceof _.default&&(e=this._blocks.indexOf(e)),t="boolean"==typeof t&&t;var n=this._blocks[e];return n?n.getChildren(this._blocks,t):[]},_findParentBlock:function(e){e instanceof _.default&&(e=this._blocks.indexOf(e));var t=this._blocks,n=t[e];if(n){var i=n.getLevel();if(i>0){for(var o=e,r=n;r&&r.getLevel()>=i;)r=t[--o];return r}}return null},_getNextBlockIndex:function(e){e instanceof _.default&&(e=this._blocks.indexOf(e));var t=this._findChildBlocks(e,!0),n=t[t.length-1];return(n?this._blocks.indexOf(n):e)+1},_duplicate:function(e,t){var n=this;window.draftEditor&&window.draftEditor.pause();var i=(0,a.default)('<div class="ni_spinner"><div class="spinner"></div></div>');t.$container.after(i);var r=!1,s=function(){};i.css({opacity:0,marginBottom:-i.outerHeight()}).velocity({opacity:1,marginBottom:10},"fast",function(){r=!0,s()}),p.default.postActionRequest("neo/input/render-blocks",e,function(e){if(e.success&&e.blocks.length>0){var a=[],c=!0,p=!1,u=void 0;try{for(var d,h=e.blocks[Symbol.iterator]();!(c=(d=h.next()).done);c=!0){var f=d.value,g=_.default.getNewId(),y=n.getBlockTypeById(f.type),m=new b.default({id:y.getId(),fieldLayoutId:y.getFieldLayoutId(),fieldTypes:y.getFieldTypes(),name:y.getName(),handle:y.getHandle(),maxBlocks:y.getMaxBlocks(),maxSiblingBlocks:y.getMaxSiblingBlocks(),maxChildBlocks:y.getMaxChildBlocks(),childBlocks:y.getChildBlocks(),topLevel:y.getTopLevel(),tabs:f.tabs}),v=new x.default({items:m.getChildBlockItems(n.getItems()),maxBlocks:n.getMaxBlocks()}),k=new _.default({namespace:[].concat(o(n._templateNs),[g]),field:n,blockType:m,id:g,level:0|f.level,buttons:v,enabled:!!f.enabled,collapsed:!!f.collapsed,showButtons:!n.atMaxLevels(0|f.level),renderOldChildBlocksContainer:!m.hasChildBlocksUiElement()},!0);a.push(k)}}catch(e){p=!0,u=e}finally{try{!c&&h.return&&h.return()}finally{if(p)throw u}}s=function(){var e=n._getNextBlockIndex(t),o=!0,r=!1,s=void 0;try{for(var c,p=a[Symbol.iterator]();!(o=(c=p.next()).done);o=!0){var u=c.value;n.addBlock(u,e++,u.getLevel(),!1)}}catch(e){r=!0,s=e}finally{try{!o&&p.return&&p.return()}finally{if(r)throw s}}var d=a[0];d.$container.css({opacity:0,marginBottom:i.outerHeight()-d.$container.outerHeight()+10}).velocity({opacity:1,marginBottom:10},"fast",function(e){return l.default.requestAnimationFrame(function(){return l.default.scrollContainerToElement(d.$container)})}),i.remove(),window.draftEditor&&window.draftEditor.resume()},r&&s()}})},"@newBlock":function(e){var t=_.default.getNewId(),n=new _.default({namespace:[].concat(o(this._templateNs),[t]),field:this,blockType:e.blockType,id:t,buttons:new x.default({items:e.blockType.getChildBlockItems(this.getItems()),maxBlocks:this.getMaxBlocks()}),showButtons:!this.atMaxLevels(e.level),renderOldChildBlocksContainer:!e.blockType.hasChildBlocksUiElement()},!0);this.addBlock(n,e.index,e.level)},"@addBlockAbove":function(e){var t=this;this._destroyTempButtons();var n=e.block,i=this._blocks.indexOf(n),o=this._findParentBlock(i),r=this.getBlocks(),a=new x.default({blockTypes:o?[]:this.getBlockTypes(!0),blocks:r,groups:o?[]:this.getGroups(),items:o?o.getBlockType().getChildBlockItems(this.getItems()):null,maxBlocks:this.getMaxBlocks()});n.$container.before(a.$container),a.on("newBlock",function(e){return t["@newBlock"]({blockType:e.blockType,index:i,level:n.getLevel()})}),a.initUi(),e.animate!==!1&&a.$container.css({opacity:0,marginBottom:-a.$container.outerHeight()}).velocity({opacity:1,marginBottom:10},"fast",function(e){return l.default.requestAnimationFrame(function(){return l.default.scrollContainerToElement(a.$container)})}),this._tempButtons=a,this._tempButtonsBlock=this._findParentBlock(n),this._tempButtons.updateButtonStates(r,this._checkMaxChildren(this._tempButtonsBlock),this._tempButtonsBlock)},"@copyBlock":function(e){var t=this,n=[],i=0,r=this._ownerId;this._blockBatch(e.block,function(e){var r=i>0&&n[n.length-1].indexOf(e)!==-1;if(!r){var a=[];a.push.apply(a,[e].concat(o(t._findChildBlocks(e,!0)))),n.push(a),i+=a.length}});var a={field:this._name,blocks:[]},s=!0,l=!1,c=void 0;try{for(var u,d=n[Symbol.iterator]();!(s=(u=d.next()).done);s=!0){var h=u.value,f=h[0].getLevel(),g=!0,b=!1,y=void 0;try{for(var m,v=h[Symbol.iterator]();!(g=(m=v.next()).done);g=!0){var _=m.value,k={type:_.getBlockType().getId(),level:_.getLevel()-f,content:_.getContent(),ownerId:r};_.isEnabled()&&(k.enabled=1),_.isExpanded()||(k.collapsed=1),a.blocks.push(k)}}catch(e){b=!0,y=e}finally{try{!g&&v.return&&v.return()}finally{if(b)throw y}}}}catch(e){l=!0,c=e}finally{try{!s&&d.return&&d.return()}finally{if(l)throw c}}window.localStorage.setItem("neo:copy",JSON.stringify(a)),this._updateButtons();var x=1===i?"1 block copied":"{n} blocks copied";p.default.cp.displayNotice(p.default.t("neo",x,{n:i}))},"@pasteBlock":function e(t){var n=t.block,i=n.getLevel(),o=window.localStorage.getItem("neo:copy");if(o){var r=JSON.parse(o),a=r.blocks,s=!0,l=!1,c=void 0;try{for(var p,u=a[Symbol.iterator]();!(s=(p=u.next()).done);s=!0){var e=p.value;e.level+=i}}catch(e){l=!0,c=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw c}}d.default.enter(this._templateNs);var h={namespace:d.default.toFieldName(),locale:this._locale,blocks:a};d.default.leave(),this._duplicate(h,n)}},"@duplicateBlock":function(e){var t=e.block,n=this._blocks.indexOf(t),i=this._findChildBlocks(n,!0),r=this._ownerId,a=function(e){return{collapsed:0|!e.isExpanded(),content:e.getContent(),enabled:0|e.isEnabled(),level:e.getLevel(),ownerId:r,type:e.getBlockType().getId()}};d.default.enter(this._templateNs);var s={namespace:d.default.toFieldName(),locale:this._locale,blocks:[a(t)].concat(o(i.map(a)))};d.default.leave(),this._duplicate(s,t)}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(2),s=i(a),l=n(4),c=i(l),p=c.default.Drag.extend({$container:null,blocks:null,maxTopBlocks:0,_draggeeBlocks:null,init:function(e,t){"undefined"==typeof t&&s.default.isPlainObject(e)&&(t=e,e=null),t=s.default.extend({},p.defaults,t),t.axis=c.default.Y_AXIS,this.base(e,t),this.$container=t.container,this.blocks=[],this.maxTopBlocks=t.maxTopBlocks},getHelperTargetX:function(){return this.$draggee.offset().left},getHelperTargetY:function(){var e=this.settings.magnetStrength;if(1!==e){var t=this.$draggee.offset().top;return t+(this.mouseY-this.mouseOffsetY-t)/e}return this.base()},getBlockByElement:function(e){return this.blocks.find(function(t){return t.$container.is(e)})},getParentBlock:function(e){var t=e.$container.parent().closest(".ni_block");return t.length>0&&this.getBlockByElement(t)},onDragStart:function(){var e=this;this._draggeeBlocks=[],this.$draggee.each(function(){e._draggeeBlocks.push(e.getBlockByElement(this))}),this.base(),this._calculateMidpoints()},onDrag:function(){var e=this._getClosestMidpoint();e&&this._moveDraggeeToBlock(e.block,e.type,e.direction),this.base()},onDragStop:function(){var e=this;this.$draggee.each(function(){var t=(0,s.default)(this),n=e.getBlockByElement(t),i=t.parent().is(e.$container);if(i)n.setLevel(0);else{var o=e.getParentBlock(n);n.setLevel(o.getLevel()+1)}t.find(".ni_block").each(function(){var t=(0,s.default)(this),n=e.getBlockByElement(t),i=e.getParentBlock(n);n.setLevel(i.getLevel()+1)})}),this.returnHelpersToDraggees(),this.base()},addBlock:function(e){this.blocks.push(e),this.addItems(e.$container)},removeBlock:function(e){this.blocks=this.blocks.filter(function(t){return t!==e}),this.removeItems(e.$container)},_getClosestMidpoint:function(){var e=Number.MAX_VALUE,t=Number.MIN_VALUE,n=null,i=!0,o=!1,r=void 0;try{for(var a,s=this._currentMidpoints[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;if(l.direction===p.DIRECTION_UP){var c=this.mouseY-this.mouseOffsetY;c<l.position&&l.position<e&&(e=l.position,n=l)}else{var u=this.mouseY-this.mouseOffsetY+this._draggeeBlockHeight;u>l.position&&l.position>t&&(t=l.position,n=l)}}}catch(e){o=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n},_calculateMidpoints:function(){var e=10;this._draggeeBlockY=this.$draggee.offset().top,this._draggeeBlockHeight=this.$draggee.height()+e,this._currentMidpoints=[];var t=!0,n=!1,i=void 0;try{for(var o,r=this.blocks[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var a=o.value;if(0===a.$container.closest(this.$draggee).length){var s=this._getBlockMidpoints(a),l=!0,c=!1,u=void 0;try{for(var d,h=Object.keys(s)[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value,g=s[f],b=this._draggeeBlockY>g?p.DIRECTION_UP:p.DIRECTION_DOWN;this._currentMidpoints.push({block:a,position:g,type:f,direction:b})}}catch(e){c=!0,u=e}finally{try{!l&&h.return&&h.return()}finally{if(c)throw u}}}}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}var y=this.$container.offset().top+this.$container.height()+e/2;this._currentMidpoints.push({block:null,position:y,type:p.TYPE_END,direction:p.DIRECTION_DOWN})},_getBlockMidpoints:function(e){var t={},n=1,i=10,o=14,r=e.$container.parent().closest(".ni_block.is-collapsed").length>0;if(!r){var a=e.$container.offset().top,s=e.isExpanded(),l=e.$container.height(),c=e.$topbarContainer.height(),u=s?e.$childrenContainer.height():0,d=s&&e.$contentContainer.length>0?e.$childrenContainer.length>0?e.$childrenContainer.offset().top-e.$contentContainer.offset().top:e.$contentContainer.height():0,h=this.getParentBlock(e);if(h&&!this._validateDraggeeChildren(h)||(t[p.TYPE_CONTENT]=a+(c+d)/2),u>0&&e.isExpanded()&&this._validateDraggeeChildren(e)){var f=e.getButtons().$container.height();t[p.TYPE_CHILDREN]=a+l-n-(o+f+i)/2}}return t},_moveDraggeeToBlock:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.TYPE_CONTENT,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p.DIRECTION_DOWN,i=e?this.getParentBlock(e):null,o=this._validateDraggeeChildren(i);switch(t){case p.TYPE_CHILDREN:0===this.$draggee.closest(e.$container).length?e.$blocksContainer.append(this.$draggee):o&&e.$container.after(this.$draggee);break;case p.TYPE_END:o&&this.$container.append(this.$draggee);break;default:n===p.DIRECTION_UP?o&&e.$container.before(this.$draggee):e.getBlockType().isParent()&&e.isExpanded()&&this._validateDraggeeChildren(e)?e.$blocksContainer.prepend(this.$draggee):o&&e.$container.after(this.$draggee)}this._updateHelperAppearance(),this._calculateMidpoints()},_validateDraggeeChildren:function(e){var t=this,n=e?e.getField():this._draggeeBlocks[0].getField(),i=n.getMaxLevels();if(i>0){var a=e?e.getLevel():-1,s=this._draggeeBlocks[0].getLevel(),l=function(e){return e.getLevel()-s+a+1>=i},c=function e(t){var i=t.getChildren(n.getBlocks(),!0);return l(t)||i.some(e)};if(this._draggeeBlocks.filter(c).length>0)return!1}if(!e){var p=this,u=this.$container.children(".ni_block:not(.is-disabled)"),d=u.length,h=!0,f=!1,g=void 0;try{for(var b,y=this._draggeeBlocks[Symbol.iterator]();!(h=(b=y.next()).done);h=!0){var m=b.value;if(!m.getBlockType().getTopLevel())return!1}}catch(e){f=!0,g=e}finally{try{!h&&y.return&&y.return()}finally{if(f)throw g}}return u.each(function(){p._draggeeBlocks.includes(p.getBlockByElement(this))&&d--}),!(this.maxTopBlocks>0&&d>=this.maxTopBlocks)}var v=e.getBlockType(),_=v.getMaxChildBlocks(),k=e.$childrenContainer.children(".ni_blocks").children(".ni_block"),x=k.length,w=[],B=this;if(k.each(function(){var e=B.getBlockByElement(this);B._draggeeBlocks.includes(e)?x--:w.push(e)}),_>0&&x>=_)return!1;var T=[],C=!0,$=!1,E=void 0;try{for(var O,S=function(){var e=O.value;if(!v.isValidChildBlock(e))return{v:!1};if(T.includes(e))return"continue";var n=e.getBlockType(),i=n.getMaxSiblingBlocks();if(0===i)return"continue";var r=t._draggeeBlocks.filter(function(e){return e.getBlockType().getHandle()===n.getHandle()}),a=w.filter(function(e){return e.getBlockType().getHandle()===n.getHandle()});return a.length+r.length>i?{v:!1}:void T.push.apply(T,o(r))},M=this._draggeeBlocks[Symbol.iterator]();!(C=(O=M.next()).done);C=!0){var N=S();switch(N){case"continue":continue;default:if("object"===("undefined"==typeof N?"undefined":r(N)))return N.v}}}catch(e){$=!0,E=e}finally{try{!C&&M.return&&M.return()}finally{if($)throw E}}return!0},_updateHelperAppearance:function(){var e=this,t=!0,n=!1,i=void 0;try{for(var o,r=function(){var t=o.value,n=t.data("neo-b-id"),i=e.blocks.find(function(e){return e.$container.data("neo-b-id")===n});t.css({width:i.$container.width()+1,height:i.$container.height()})},a=this.helpers[Symbol.iterator]();!(t=(o=a.next()).done);t=!0)r()}catch(e){n=!0,i=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw i}}}},{TYPE_CONTENT:"content",TYPE_CHILDREN:"children",TYPE_END:"end",DIRECTION_UP:"up",DIRECTION_DOWN:"down",defaults:{container:null,magnetStrength:1}});t.default=p},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),r=i(o),a=n(21),s=i(a),l={id:-1,fieldLayoutId:-1,fieldTypes:{},sortOrder:0,name:"",handle:"",maxBlocks:0,maxSiblingBlocks:0,maxChildBlocks:0,
childBlocks:!1,topLevel:!0,tabs:[]};t.default=r.default.Base.extend({init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Object.assign({},l,e),this._id=0|e.id,this._fieldLayoutId=0|e.fieldLayoutId,this._fieldTypes=e.fieldTypes,this._sortOrder=0|e.sortOrder,this._name=e.name,this._handle=e.handle,this._maxBlocks=0|e.maxBlocks,this._maxSiblingBlocks=0|e.maxSiblingBlocks,this._maxChildBlocks=0|e.maxChildBlocks,this._childBlocks=e.childBlocks,this._topLevel=e.topLevel,this._tabs=e.tabs.map(function(e){return e instanceof s.default?e:new s.default(e)})},getType:function(){return"blockType"},getId:function(){return this._id},getFieldLayoutId:function(){return this._fieldLayoutId},getFieldTypes:function(){return this._fieldTypes},getSortOrder:function(){return this._sortOrder},getName:function(){return this._name},getHandle:function(){return this._handle},getMaxBlocks:function(){return this._maxBlocks},getMaxSiblingBlocks:function(){return this._maxSiblingBlocks},getMaxChildBlocks:function(){return this._maxChildBlocks},getChildBlocks:function(){return this._childBlocks},getTopLevel:function(){return this._topLevel},getTabs:function(){return Array.from(this._tabs)},getFieldType:function(e){return this._fieldTypes[e]},getChildBlockItems:function(e){var t=this,n=e.filter(function(e){return"group"===e.getType()||t.hasChildBlock(e.getHandle())});return n.filter(function(e,t){if("group"===e.getType()){var i=n[t+1];return i&&"group"!==i.getType()}return!0})},isParent:function(){var e=this.getChildBlocks();return e===!0||"*"===e||Array.isArray(e)&&e.length>0},hasChildBlock:function(e){var t=this.getChildBlocks();return t===!0||"*"===t||Array.isArray(t)&&t.includes(e)},isValidChildBlock:function(e){return this.hasChildBlock(e.getBlockType().getHandle())},hasChildBlocksUiElement:function(){return this.getTabs().some(function(e){return e.getBodyHtml().match(/data-neo-b="container.children"/)})}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),r=i(o),a={name:"",bodyHtml:"",footHtml:"",errors:[]};t.default=r.default.Base.extend({init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Object.assign({},a,e),this._name=e.name,this._bodyHtml=e.bodyHtml||"",this._footHtml=e.footHtml||"",this._errors=e.errors},getErrors:function(){return Array.from(this._errors)},getName:function(){return this._name},getBodyHtml:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this._getHtml(this._bodyHtml,e)},getFootHtml:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this._getHtml(this._footHtml,e)},isBlank:function(){return!this._bodyHtml.trim()},_getHtml:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null!==t?e.replace(/__NEOBLOCK__/g,t):e}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),r=i(o),a={id:-1,sortOrder:0,name:""};t.default=r.default.Base.extend({init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Object.assign({},a,e),this._id=0|e.id,this._sortOrder=0|e.sortOrder,this._name=e.name},getType:function(){return"group"},getId:function(){return this._id},getSortOrder:function(){return this._sortOrder},getName:function(){return this._name},isBlank:function(){return!this._name}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(){var e=this.href||this.src;if(e){var t=e.indexOf("?");e=t<0?e:e.substr(0,t);var n=!Object.prototype.hasOwnProperty.call(y,e);return y[e]=1,n}return!0}function r(e){return e?e.replace(/[&<>"'/]/g,function(e){return m[e]}):""}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40;return e=e||"",e.length>t?e.slice(0,t-3)+"...":e}Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),l=i(s);n(3);var c=n(4),p=i(c),u=n(5),d=i(u),h=n(6),f=i(h),g=n(24),b={namespace:[],blockType:null,id:null,level:0,buttons:null,enabled:!0,collapsed:!1,modified:!0,showButtons:!0,hasOldChildBlocksContainer:!0},y={},m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};t.default=p.default.Base.extend({_templateNs:[],_field:null,_blockType:null,_initialised:!1,_expanded:!0,_enabled:!0,_modified:!0,_initialState:null,_forceModified:!1,init:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=Object.assign({},b,t),this._templateNs=f.default.parse(t.namespace),this._field=t.field,this._blockType=t.blockType,this._id=t.id,this._buttons=t.buttons,this._modified=t.modified,this._showButtons=t.showButtons,this._hasOldChildBlocksContainer=t.hasOldChildBlocksContainer,this.$container=n?this._generateElement():(0,l.default)("[data-neo-b-id="+this._id+"]");var i=this.$container.find("[data-neo-b]");this.$bodyContainer=i.filter('[data-neo-b="'+this._id+'.container.body"]'),this.$contentContainer=i.filter('[data-neo-b="'+this._id+'.container.content"]'),this.$childrenContainer=i.filter('[data-neo-b="'+this._id+'.container.children"]'),this.$childrenWarningsContainer=i.filter('[data-neo-b="'+this._id+'.container.childrenWarnings"]'),this.$collapsedChildrenContainer=i.filter('[data-neo-b="'+this._id+'.container.collapsedChildren"]'),this.$blocksContainer=i.filter('[data-neo-b="'+this._id+'.container.blocks"]'),this.$buttonsContainer=i.filter('[data-neo-b="'+this._id+'.container.buttons"]'),this.$topbarContainer=i.filter('[data-neo-b="'+this._id+'.container.topbar"]'),this.$topbarLeftContainer=i.filter('[data-neo-b="'+this._id+'.container.topbarLeft"]'),this.$topbarRightContainer=i.filter('[data-neo-b="'+this._id+'.container.topbarRight"]'),this.$tabsContainer=i.filter('[data-neo-b="'+this._id+'.container.tabs"]'),this.$tabContainer=i.filter('[data-neo-b="'+this._id+'.container.tab"]'),this.$menuContainer=i.filter('[data-neo-b="'+this._id+'.container.menu"]'),this.$previewContainer=i.filter('[data-neo-b="'+this._id+'.container.preview"]'),this.$tabButton=i.filter('[data-neo-b="'+this._id+'.button.tab"]'),this.$settingsButton=i.filter('[data-neo-b="'+this._id+'.button.actions"]'),this.$togglerButton=i.filter('[data-neo-b="'+this._id+'.button.toggler"]'),this.$tabsButton=i.filter('[data-neo-b="'+this._id+'.button.tabs"]'),this.$enabledInput=i.filter('[data-neo-b="'+this._id+'.input.enabled"]'),this.$levelInput=i.filter('[data-neo-b="'+this._id+'.input.level"]'),this.$status=i.filter('[data-neo-b="'+this._id+'.status"]'),this.$sortOrder=i.filter('[data-neo-b="'+this._id+'.sortOrder"]'),this._buttons&&(this._buttons.on("newBlock",function(t){return e.trigger("newBlock",Object.assign(t,{level:e.getLevel()+1}))}),this.$buttonsContainer.append(this._buttons.$container));var o=!1;if(this._blockType){var r=!0,a=!1,s=void 0;try{for(var c,p=this._blockType.getTabs()[Symbol.iterator]();!(r=(c=p.next()).done);r=!0){var u=c.value,d='[data-neo-b-info="'+u.getName()+'"]';this.$tabContainer.filter(d).find("ul.errors").length>0&&(o=!0,this.$tabButton.filter(d).addClass("error"))}}catch(e){a=!0,s=e}finally{try{!r&&p.return&&p.return()}finally{if(a)throw s}}}this.setLevel(t.level),this.toggleEnabled(t.enabled),this.toggleExpansion(!!o||!t.collapsed,!1,!1),this.toggleShowButtons(this._showButtons),this.addListener(this.$topbarContainer,"dblclick","@doubleClickTitle"),this.addListener(this.$tabButton,"click","@setTab")},_generateElement:function(){f.default.enter(this._templateNs);var e=f.default.toFieldName();f.default.leave();var t=this._blockType,n=t.getTabs(),i=n.length>0,o=t.isParent(),r=t.getName()+" "+d.default.t("neo","Actions"),a="neoblock-action-menu-"+this._id,s=[];if(s.push('\n      <div class="ni_block ni_block--'+t.getHandle()+" is-"+(this._collapsed?"collapsed":"expanded")+" "+(i||o?"":"is-empty")+" "+(o?"is-parent":"")+'" data-neo-b-id="'+this._id+'">\n        <input type="hidden" name="'+e+'[type]" value="'+t.getHandle()+'">\n        <input type="hidden" name="'+e+'[enabled]" value="'+(this._enabled?"1":"0")+'" data-neo-b="'+this._id+'.input.enabled">\n        <input type="hidden" name="'+e+'[level]" value="'+this._level+'" data-neo-b="'+this._id+'.input.level">\n        <input type="hidden" name="'+this._templateNs[0]+"["+this._templateNs[1]+'][sortOrder][]" value="'+this._id+'" data-neo-b="'+this._id+'.input.sortOrder">\n\n        <div class="ni_block_topbar" data-neo-b="'+this._id+'.container.topbar">\n          <div class="ni_block_topbar_left" data-neo-b="'+this._id+'.container.topbarLeft">\n            <div class="ni_block_topbar_item" data-neo-b="'+this._id+'.select">\n              <div class="checkbox block-checkbox" title="'+d.default.t("neo","Select")+' aria-label="'+d.default.t("neo","Select")+'"></div>\n            </div>\n            <div class="ni_block_topbar_item title clip-text">\n              <span class="blocktype" data-neo-b="'+this._id+'.select">'+t.getName()+'</span><span class="preview" data-neo-b="'+this._id+'.container.preview">&nbsp;</span>\n            </div>\n          </div>\n          <div class="ni_block_topbar_right" data-neo-b="'+this._id+'.container.topbarRight">\n            <div class="ni_block_topbar_item size-full tabs">'),(i||o)&&s.push('\n              <div class="tabs_trigger" data-neo-b="'+this._id+'.button.toggler"></div>'),n.length>1){s.push('\n              <div class="tabs_inner" data-neo-b="'+this._id+'.container.tabs">');for(var c=0;c<n.length;c++){var u=n[c].getName();s.push('\n                <a class="tab'+(c?"":"is-selected")+'" data-neo-b="'+this._id+'.button.tab" data-neo-b-info="'+u+'">'+u+"</a>")}s.push('\n              </div>\n              <div class="tabs_btn menubtn" data-neo-b="'+this._id+'.button.tabs">\n                '+n[0].getName()+'\n              </div>\n              <div class="neo_block_tabs-menu menu">\n                <ul>');for(var h=0;h<n.length;h++){var g=n[h].getName();s.push("\n                  <li>\n                    <a"+(h?"":' class="is-selected"')+' data-neo-b="'+this._id+'.button.tab" data-neo-b-info="'+g+'">'+g+"</a>\n                  </li>")}s.push("\n                </ul>\n              </div>")}if(s.push('\n            </div>\n            <div class="ni_block_topbar_item hidden" data-neo-b="'+this._id+'.status">\n              <div class="status off" title="'+d.default.t("neo","Disabled")+'"></div>\n            </div>\n            <div class="ni_block_topbar_item block-settings">\n              <div data-wrapper>\n                <button class="btn settings icon menubtn" type="button" role="button" title="'+d.default.t("neo","Actions")+'" aria-controls="'+a+'" aria-label="'+r+'" data-disclosure-trigger data-neo-b="'+this._id+'.button.actions"></button>\n                <div id="'+a+'" class="menu menu--disclosure" data-neo-b="'+this._id+'.container.menu">\n                  <ul class="padded">'),(i||o)&&s.push('\n                    <li><a data-icon="collapse" data-action="collapse" href="#" type="button" role="button" aria-label="'+d.default.t("neo","Collapse")+'">'+d.default.t("neo","Collapse")+'</a></li>\n                    <li class="hidden"><a data-icon="expand" data-action="expand" href="#" type="button" role="button" aria-label="'+d.default.t("neo","Expand")+'">'+d.default.t("neo","Expand")+"</a></li>"),s.push('\n                    <li><a data-icon="disabled" data-action="disable" href="#" type="button" role="button" aria-label="'+d.default.t("neo","Disable")+'">'+d.default.t("neo","Disable")+'</a></li>\n                    <li class="hidden"><a data-icon="enabled" data-action="enable" href="#" type="button" role="button" aria-label="'+d.default.t("neo","Enable")+'">'+d.default.t("neo","Enable")+'</a></li>\n                    <li class="hidden"><a data-icon="uarr" data-action="moveUp" href="#" type="button" role="button" aria-label="'+d.default.t("neo","Move up")+'">'+d.default.t("neo","Move up")+'</a></li>\n                    <li class="hidden"><a data-icon="darr" data-action="moveDown" href="#" type="button" role="button" aria-label="'+d.default.t("neo","Move down")+'">'+d.default.t("neo","Move down")+'</a></li>\n                  </ul>\n                  <hr>\n                  <ul class="padded">\n                    <li><a data-icon="plus" data-action="add" href="#" type="button" role="button" aria-label="'+d.default.t("neo","Add block above")+'">'+d.default.t("neo","Add block above")+'</a></li>\n                    <li><a data-icon="field" data-action="copy" href="#" type="button" role="button" aria-label="'+d.default.t("neo","Copy")+'">'+d.default.t("neo","Copy")+'</a></li>\n                    <li><a data-icon="brush" data-action="paste" href="#" type="button" role="button" aria-label="'+d.default.t("neo","Paste")+'">'+d.default.t("neo","Paste")+'</a></li>\n                    <li><a data-icon="share" data-action="duplicate" href="#" type="button" role="button" aria-label="'+d.default.t("neo","Clone")+'">'+d.default.t("neo","Clone")+'</a></li>\n                  </ul>\n                  <hr>\n                  <ul class="padded">\n                    <li><a class="error" data-icon="remove" data-action="delete" href="#" type="button" role="button" aria-label="'+d.default.t("neo","Delete")+'">'+d.default.t("neo","Delete")+'</a></li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n            <div class="ni_block_topbar_item block-reorder">\n              <a class="move icon" title="'+d.default.t("neo","Reorder")+'" aria-label="'+d.default.t("neo","Reorder")+'" role="button" data-neo-b="'+this._id+'.button.move"></a>\n            </div>\n          </div>\n        </div>'),i||o){if(s.push('\n        <div class="ni_block_body" data-neo-b="'+this._id+'.container.body">'),i){s.push('\n          <div class="ni_block_content" data-neo-b="'+this._id+'.container.content">');for(var b=0;b<n.length;b++){var y=n[b].getName();s.push('\n            <div class="ni_block_content_tab flex-fields'+(b?"":" is-selected")+'" data-neo-b="'+this._id+'.container.tab" data-neo-b-info="'+y+'">\n              '+n[b].getBodyHtml(this._id)+"\n            </div>"),p.default.$bod.append(n[b].getFootHtml(this._id))}s.push("\n          </div>")}o&&this._hasOldChildBlocksContainer&&s.push('\n          <div class="ni_block_children" data-neo-b="'+this._id+'.container.children">\n            <div class="ni_blocks" data-neo-b="'+this._id+'.container.blocks">\n            </div>\n            <div data-neo-b="'+this._id+'.container.buttons" class="hidden"></div>\n            <div data-neo-b="'+this._id+'.container.childrenWarnings" class="hidden">\n              <p class="first warning with-icon">'+d.default.t("neo","This Neo field's maximum number of levels has been reached, so no child blocks can be added here.")+"</p>\n            </div>\n          </div>"),s.push("\n        </div>")}return o&&s.push('\n        <div class="ni_block_collapsed-children" data-neo-b="'+this._id+'.container.collapsedChildren"></div>'),s.push('\n      <div data-neo="container.buttons"></div>'),(0,l.default)(s.join(""))},initUi:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this._initialised){var n=this._blockType.getTabs(),i=n.map(function(t){return t.getFootHtml(e._id)});if(this.$foot=(0,l.default)(i.join("")).filter(o),p.default.$bod.append(this.$foot),t&&d.default.initUiElements(this.$contentContainer),this.$tabsButton.menubtn(),this._settingsMenu=new p.default.DisclosureMenu(this.$settingsButton),this._settingsMenu.on("show",function(){return e.$container.addClass("active")}),this._settingsMenu.on("hide",function(){return e.$container.removeClass("active")}),this.addListener(this.$menuContainer.find("[data-action]"),"click",this._handleActionClick),this.addListener(this.$menuContainer.find("[data-action]"),"keydown",this._handleActionKeydown),this._initialised=!0,this._buttons&&this._buttons.initUi(),p.default.requestAnimationFrame(function(){return e.updateResponsiveness()}),this.$container.on("mousedown",".matrixblock",function(e){(0,l.default)(this).addClass("neo-matrixblock")}),!this._modified&&!this.isNew()){this._initialState={enabled:this._enabled,level:this._level,content:p.default.getPostData(this.$contentContainer)};var r=function(){return e._detectChange()},a=new window.MutationObserver(function(){return setTimeout(r,200)});if(a.observe(this.$container[0],{attributes:!0,childList:!0,characterData:!0,subtree:!0}),this.$contentContainer.on("propertychange change click","input, textarea, select, div.redactor-in",r),this.$contentContainer.on("paste input keyup",'input:not([type="hidden"]), textarea, div.redactor-in',r),this._detectChangeObserver=a,this.$contentContainer.length>0&&this.$contentContainer.html().match(/\[blocks\]\[new/)){this._forceModified=!0,this.setModified(!0);var s=this._templateNs[0]+"["+this._templateNs[1]+"]";d.default.modifiedDeltaNames.includes(s)||d.default.modifiedDeltaNames.push(s)}}(0,g.addFieldLinks)(this.$contentContainer),this.trigger("initUi")}},destroy:function(){this._initialised&&(this.$foot.remove(),clearInterval(this._detectChangeInterval),this._detectChangeObserver&&this._detectChangeObserver.disconnect(),this.trigger("destroy"))},getBlockType:function(){return this._blockType},getId:function(){return this._id},getLevel:function(){return this._level},setLevel:function(e){this._level=0|e,this.$levelInput.val("0"+this._level),this.$container.toggleClass("is-level-odd",!!(this._level%2)),this.$container.toggleClass("is-level-even",!(this._level%2))},setModified:function(e){this._modified=e},getButtons:function(){return this._buttons},getLocale:function(){if(!this._locale){var e=this.$container.closest("form"),t=e.find('input[name="siteId"]');this._locale=t.val()}return this._locale},getContent:function(){var e=p.default.getPostData(this.$contentContainer),t={},n=function(e,n){for(var i=t,o=0;o<e.length-1;o++){var r=e[o];l.default.isPlainObject(i[r])||l.default.isArray(i[r])||(i[r]={}),i=i[r]}var a=e[e.length-1];i[a]=n},i=!0,o=!1,r=void 0;try{for(var a,s=Object.keys(e)[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var c=a.value,u=f.default.parse(c),d=u.slice(this._templateNs.length+1);if(d.length){var h=e[c];n(d,h)}}}catch(e){o=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return t},getParent:function(e){var t=this.getLevel(),n=e.indexOf(this),i=null;if(n>=0&&t>0)for(;null===i&&n>0;){var o=e[--n],r=o.getLevel();r===t-1&&(i=o)}return i},getChildren:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.getLevel(),i=e.indexOf(this),o=[];if(i>=0)for(var r=e[++i];r&&r.getLevel()>n;){var a=r.getLevel();(t?a>n:a===n+1)&&o.push(r),r=e[++i]}return o},getSiblings:function(e){return 0===this._level?e.filter(function(e){return 0===e.getLevel()}):this.getParent(e).getChildren(e)},getField:function(){return this._field},updatePreview:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e="boolean"==typeof e&&e;var t=this.$childrenContainer.find(".field"),n=this.$contentContainer.find(".field").add(t),i=[];n.each(function(){var t=(0,l.default)(this),n=t.children(".input"),o=t.data("type"),s=t.children(".heading").children("label").text();if(null!==o){var c=!1;switch(o){case"craft\\fields\\Assets":var u=[],h=n.find(".element");h.each(function(){var t=(0,l.default)(this),n=t.find(".elementthumb"),i=n.children("img"),o=i.prop("srcset");if(o||(o=n.data("srcset")),u.push('<img sizes="30px" srcset="'+o+'">'),!e&&1===h.length){var s=t.find(".title").text();u.push(r(a(s)))}}),c=u.join(" ");break;case"craft\\fields\\Categories":case"craft\\fields\\Entries":case"craft\\fields\\Tags":case"craft\\fields\\Users":var f=[],g=n.find(".element");g.each(function(){var e=(0,l.default)(this),t=e.find(".title, .label").eq(0).text();f.push(r(a(t)))}),c=f.join(", ");break;case"craft\\fields\\Checkboxes":var b=[],y=n.find('input[type="checkbox"]');y.each(function(){if(this.checked){var e=(0,l.default)(this),t=e.prop("id"),i=n.find('label[for="'+t+'"]'),o=i.text();b.push(r(a(o)))}}),c=b.join(", ");break;case"craft\\fields\\Color":var m=n.find('input[type="color"]').val(),v=n.find('input[type="text"]').val(),_=n.find("div.colorhex").text(),k=null;k=m&&v?"background-color: "+m:!m&&v?"background-color: "+v:_?"background-color: "+_:"background-image: repeating-linear-gradient(-45deg, transparent, transparent 2px, #777 2px, #777 3px)",c='<div class="preview_color" style="'+k+'"></div>';break;case"craft\\fields\\Date":var x=r(n.find(".datewrapper input").val()),w=r(n.find(".timewrapper input").val());c=x&&w?x+" "+w:x||w;break;case"craft\\fields\\Dropdown":var B=n.find("select").children(":selected");c=r(a(B.text()));break;case"craft\\fields\\Email":c=r(a(n.children('input[type="email"]').val()));break;case"craft\\fields\\Lightswitch":var T=!!n.find("input").val();c='<span class="status'+(T?" live":"")+'"></span>'+r(a(s));break;case"craft\\fields\\MultiSelect":case"ttempleton\\categorygroupsfield\\fields\\CategoryGroupsField":var C=[],$=n.find("select").children(":selected");$.each(function(){C.push((0,l.default)(this).text())}),c=r(a(C.join(", ")));break;case"craft\\fields\\Number":case"craft\\fields\\PlainText":c=r(a(n.children('input[type="text"]').val()));break;case"craft\\fields\\RadioButtons":var E=n.find('input[type="radio"]:checked'),O=E.closest("label"),S=O.text();c=r(a(S));break;case"craft\\redactor\\Field":c=r(a(d.default.getText(n.find("textarea").val())));break;case"craft\\ckeditor\\Field":c=r(a(d.default.getText(n.find('[role="textbox"]').html())));break;case"craft\\fields\\Url":c=r(a(n.children('input[type="url"]').val()));break;case"craft\\fields\\Matrix":case"verbb\\supertable\\fields\\SuperTableField":var M=t.find(".field"),N=M.find('input[type!="hidden"], select, textarea, .label'),A=[];N.each(function(){var e=(0,l.default)(this),t=null;e.is("input, textarea")?t=d.default.getText(p.default.getInputPostVal(e)):e.is("select")?t=e.find("option:selected").text():e.hasClass("label")&&(t=e.text()),t&&A.push(a(t))}),c=r(A.join(", "));break;case"typedlinkfield\\fields\\LinkField":case"fruitstudios\\linkit\\fields\\LinkitField":var j=[],L=n.find("select").children(":selected").first(),I=n.find('.linkfield--typeOption:not(.hidden), [class^="linkit--"]:not(.hidden)'),D=I.find('input[type!="hidden"]').val(),P=I.find(".element"),F=n.find('.field[id*="customText"] input, .linkit--customText input').val();if(j.push(a(L.text())),D&&j.push(a(D)),P.length>0){var R=P.find(".title, .label").eq(0).text();j.push(a(R))}F&&j.push(a(F)),c=r(j.join(", "));break;case"luwes\\codemirror\\fields\\CodeMirrorField":var H=[];t.find(".CodeMirror-line > span").each(function(){H.push((0,l.default)(this).text())}),c=r(H.join(" "));break;case"rias\\positionfieldtype\\fields\\Position":var U=n.find(".btn.active");c=r(U.prop("title"));break;case"wrav\\oembed\\fields\\OembedField":c=r(a(n.children("input").val()))}c&&i.length<10&&i.push('<span class="preview_section">',c,"</span>")}}),this.$previewContainer.html(i.join(""))},isNew:function(){return/^new/.test(this.getId())},isSelected:function(){return this.$container.hasClass("is-selected")},collapse:function(e,t){this.toggleExpansion(!1,e,t)},expand:function(e,t){this.toggleExpansion(!0,e,t)},toggleExpansion:function(e,t,n){var i=this;if(e="boolean"==typeof e?e:!this._expanded,t="boolean"!=typeof t||t,n="boolean"!=typeof n||n,e!==this._expanded){this._expanded=e;var o=this.$menuContainer.find('[data-action="expand"]').parent(),r=this.$menuContainer.find('[data-action="collapse"]').parent();this.$container.toggleClass("is-expanded",this._expanded).toggleClass("is-collapsed",!this._expanded),o.toggleClass("hidden",this._expanded),r.toggleClass("hidden",!this._expanded),this._expanded||this.updatePreview();var a=0|this.$contentContainer.outerHeight(),s=0|this.$childrenContainer.outerHeight(),l={opacity:1,height:a+s},c={opacity:0,height:0},p={opacity:"",height:""};n?this.$bodyContainer.css(this._expanded?c:l).velocity(this._expanded?l:c,"fast",function(e){i._expanded&&i.$bodyContainer.css(p)}):this.$bodyContainer.css(this._expanded?p:c),t&&this.saveExpansion(),this.trigger("toggleExpansion",{expanded:this._expanded})}},isExpanded:function(){return this._expanded},saveExpansion:function(){if(!this.isNew()){var e=this.getId(),t=(0,l.default)("#main-form").data("elementEditor"),n=t.duplicatedElements[e],i=t.settings.isProvisionalDraft&&"undefined"!=typeof n?n:e,o={expanded:this.isExpanded()?1:0,blockId:i,locale:this.getLocale()};d.default.queueActionRequest(function(){return d.default.postActionRequest("neo/input/save-expansion",o)})}},disable:function(){this.toggleEnabled(!1)},enable:function(){this.toggleEnabled(!0)},toggleEnabled:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this._enabled;if(e!==this._enabled){this._enabled=e;var t=this.$menuContainer.find('[data-action="enable"]').parent(),n=this.$menuContainer.find('[data-action="disable"]').parent();this.$container.toggleClass("is-enabled",this._enabled).toggleClass("is-disabled",!this._enabled),this.$status.toggleClass("hidden",this._enabled),t.toggleClass("hidden",this._enabled),n.toggleClass("hidden",!this._enabled),this.$enabledInput.val(this._enabled?1:0),this.trigger("toggleEnabled",{enabled:this._enabled})}},isEnabled:function(){return this._enabled},toggleShowButtons:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this._showButtons;this.$buttonsContainer.toggleClass("hidden",!e),this.$childrenWarningsContainer.toggleClass("hidden",e)},selectTab:function(e){var t=(0,l.default)().add(this.$tabButton).add(this.$tabContainer);t.removeClass("is-selected");var n=t.filter('[data-neo-b-info="'+e+'"]').addClass("is-selected");this.$tabsButton.text(e),d.default.ElementThumbLoader.retryAll(),this.trigger("selectTab",{tabName:e,$tabButton:n.filter('[data-neo-b="button.tab"]'),$tabContainer:n.filter('[data-neo-b="container.tab"]')})},updateResponsiveness:function(){if("undefined"==typeof this._topbarLeftWidth){var e=this._expanded?0:this.$previewContainer.width();this._topbarLeftWidth=this.$topbarLeftContainer.width()-e}this._topbarRightWidth=this._topbarRightWidth||this.$topbarRightContainer.width();var t=this.$topbarContainer.width()<this._topbarLeftWidth+this._topbarRightWidth;this.$tabsContainer.toggleClass("invisible",t),this.$tabsButton.toggleClass("invisible",!t)},updateMenuStates:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=this,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;i="boolean"!=typeof i||i;var s=this.getBlockType(),l=t.filter(function(e){return e.getBlockType().getHandle()===s.getHandle()}),c=s.getMaxBlocks(),p=this.getSiblings(t),u=t.filter(function(e){return 0===e.getLevel()}).length,d=n>0&&t.length>=n,h=a>0&&u>=a,f=d||h||!i,g=c>0&&l.length>=c,b=f||g,y=JSON.parse(window.localStorage.getItem("neo:copy")||"{}"),m=f||!y.blocks||!y.field||y.field!==e,v=this.getParent(t);if(!m&&v){var _=v.getBlockType().getMaxChildBlocks();if(_>0){var k=v.getChildren(t).length,x=y.blocks.length;m=m||k+x>_}}if(!m||!b){var w=this.getBlockType().getMaxSiblingBlocks();if(w>0){var B=function(e){return Object.prototype.hasOwnProperty.call(e,"type")?e.type===o.getBlockType().getId():"function"==typeof e.getBlockType&&e.getBlockType().getHandle()===o.getBlockType().getHandle()},T=p.filter(B,this).length,C=y.blocks?y.blocks.filter(B,this).length:0;m=m||T+C>w,b=b||T>=w}}if(!m){var $=t.reduce(function(e,t){var n=t.getBlockType(),i=n.getId(),o=e[i]||{blockType:n,count:0};return o.count++,e[i]=o,e}),E=!0,O=!1,S=void 0;try{for(var M,N=function(){var e=M.value,t=$[e.type];if(t){var n=t.blockType,i=t.count,o=n.getMaxBlocks(),a=o>0&&i>=o;m=m||a}if(0===e.level){var s=r.find(function(t){return t.getId()===e.type});m=m||!s}},A=y.blocks[Symbol.iterator]();!(E=(M=A.next()).done);E=!0)N()}catch(e){O=!0,S=e}finally{try{!E&&A.return&&A.return()}finally{if(O)throw S}}}var j=p.indexOf(this),L=j<=0,I=[-1,p.length-1].includes(j);this.$menuContainer.find('[data-action="moveUp"]').parent().toggleClass("hidden",L),this.$menuContainer.find('[data-action="moveDown"]').parent().toggleClass("hidden",I),this.$menuContainer.find('[data-action="add"]').toggleClass("disabled",f),this.$menuContainer.find('[data-action="duplicate"]').toggleClass("disabled",b),this.$menuContainer.find('[data-action="paste"]').toggleClass("disabled",m)},_handleActionClick:function(e){e.preventDefault(),this["@settingSelect"](e)},_handleActionKeydown:function(e){e.keyCode===p.default.SPACE_KEY&&(e.preventDefault(),this["@settingSelect"](e))},_detectChange:function(){if(window.draftEditor&&window.draftEditor.enableAutosave&&window.draftEditor.settings.draftId&&(this.setModified(!0),this._forceModified=!0),!this._forceModified){var e=this._initialState,t=p.default.getPostData(this.$contentContainer),n=!d.default.compare(t,e.content,!1)||e.enabled!==this._enabled||e.level!==this._level;n!==this._modified&&this.setModified(n)}},"@settingSelect":function(e){this._settingsMenu.hide();var t=(0,l.default)(e.target);if(!t.hasClass("disabled"))switch(t.attr("data-action")){case"collapse":this.collapse();break;case"expand":this.expand();break;case"disable":this.disable(),this.collapse();break;case"enable":this.enable(),this.expand();break;case"moveUp":this.trigger("moveUpBlock",{block:this});break;case"moveDown":this.trigger("moveDownBlock",{block:this});break;case"delete":this.trigger("removeBlock",{block:this});break;case"add":this.trigger("addBlockAbove",{block:this});break;case"copy":this.trigger("copyBlock",{block:this});break;case"paste":this.trigger("pasteBlock",{block:this});break;case"duplicate":this.trigger("duplicateBlock",{block:this})}},"@doubleClickTitle":function(e){e.preventDefault();var t=(0,l.default)(e.target),n=t.parent(),i=n.closest(this.$topbarLeftContainer).length>0,o=n.closest(this.$topbarRightContainer).length>0;i||o||(window.draftEditor&&window.draftEditor.pause(),this.toggleExpansion(),window.draftEditor&&window.draftEditor.resume())},"@setTab":function(e){e.preventDefault();var t=(0,l.default)(e.currentTarget),n=t.attr("data-neo-b-info");this.selectTab(n)}},{_totalNewBlocks:0,getNewId:function(){return"new"+this._totalNewBlocks++}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){a.default.CpFieldInspectPlugin&&a.default.CpFieldInspectPlugin.addFieldLinks()}Object.defineProperty(t,"__esModule",{value:!0}),t.addFieldLinks=o;var r=n(5),a=i(r)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=i(r);n(3);var s=n(5),l=i(s),c=n(4),p=i(c),u={blockTypes:[],groups:[],items:null,maxBlocks:0,maxTopBlocks:0,blocks:null};t.default=p.default.Base.extend({_blockTypes:[],_groups:[],_maxBlocks:0,_maxTopBlocks:0,init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Object.assign({},u,e),e.items?(this._items=Array.from(e.items),this._blockTypes=this._items.filter(function(e){return"blockType"===e.getType()}),this._groups=this._items.filter(function(e){return"group"===e.getType()})):(this._blockTypes=Array.from(e.blockTypes),this._groups=Array.from(e.groups),this._items=[].concat(o(this._blockTypes),o(this._groups)).sort(function(e,t){return e.getSortOrder()-t.getSortOrder()})),this._maxBlocks=0|e.maxBlocks,this._maxTopBlocks=0|e.maxTopBlocks,this.$container=this._generateButtons();var t=this.$container.find("[data-neo-bn]");this.$buttonsContainer=t.filter('[data-neo-bn="container.buttons"]'),this.$menuContainer=t.filter('[data-neo-bn="container.menu"]'),
this.$blockButtons=t.filter('[data-neo-bn="button.addBlock"]'),this.$groupButtons=t.filter('[data-neo-bn="button.group"]'),e.blocks&&this.updateButtonStates(e.blocks),this.addListener(this.$blockButtons,"activate","@newBlock")},_generateButtons:function(){var e=[],t=null,n=!0;e.push('\n      <div class="ni_buttons">\n        <div class="btngroup" data-neo-bn="container.buttons">');for(var i=0;i<this._items.length;i++){var o=this._items[i],r=o.getType();"blockType"===r?null!==t?e.push('\n            <li>\n              <a data-neo-bn="button.addBlock" data-neo-bn-info="'+o.getHandle()+'">'+o.getName()+"</a>\n            </li>"):(e.push('\n          <div class="btn dashed'+(n?" add icon":"")+'" data-neo-bn="button.addBlock" data-neo-bn-info="'+o.getHandle()+'">\n            '+o.getName()+"\n          </div>"),n=!1):"group"===r&&(null!==t&&e.push("\n          </ul>\n        </div>"),t=o.isBlank()||i+2>this._items.length||"group"===this._items[i+1].getType()?null:o,null!==t&&(e.push('\n        <div class="btn dashed'+(n?" add icon":"")+' menubtn" data-neo-bn="button.group">\n          '+o.getName()+'\n        </div>\n        <div class="menu">\n          <ul>'),n=!1))}null!==t&&e.push("\n            </ul>\n          </div>"),e.push('\n        </div>\n        <div class="btn dashed add icon menubtn hidden" data-neo-bn="container.menu">\n          '+l.default.t("neo","Add a block")+"\n        </div>"),t=null;var s=!1;e.push('\n        <div class="menu">\n          <ul>');var c=!0,p=!1,u=void 0;try{for(var d,h=this._items[Symbol.iterator]();!(c=(d=h.next()).done);c=!0){var f=d.value,g=f.getType();"blockType"===g?(null===t||s||(s=!0,e.push("\n              <h6>"+t.getName()+'</h6>\n              <ul class="padded">')),e.push('\n            <li>\n              <a data-neo-bn="button.addBlock" data-neo-bn-info="'+f.getHandle()+'">\n                '+f.getName()+"\n              </a>\n            </li>")):"group"===g&&((null===t||s)&&e.push("\n              </ul>"),s=!1,t=f.isBlank()?null:f,null===t&&e.push("\n              <ul>"))}}catch(e){p=!0,u=e}finally{try{!c&&h.return&&h.return()}finally{if(p)throw u}}return e.push("\n          </ul>\n        </div>\n      </div>"),(0,a.default)(e.join(""))},initUi:function(){(0,a.default)(".menubtn",this.$container).menubtn(),this.updateResponsiveness()},getBlockTypes:function(){return Array.from(this._blockTypes)},getGroups:function(){return Array.from(this._groups)},getMaxBlocks:function(){return this._maxBlocks},updateButtonStates:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t="boolean"!=typeof t||t;var i=this,o=e.filter(function(e){return 0===e.getLevel()}).length,r=this._maxBlocks>0&&e.length>=this._maxBlocks,s=this._maxTopBlocks>0&&o>=this._maxTopBlocks,l=r||s||!t;this.$blockButtons.each(function(){var t=(0,a.default)(this),o=l;if(!o){var r=function(e){return e.getBlockType().getHandle()===s.getHandle()},s=i.getBlockTypeByButton(t),c=e.filter(r),p=s.getMaxBlocks(),u=s.getMaxSiblingBlocks(),d=null!==n?n.getChildren(e).filter(r):e.filter(function(e){return 0===e.getLevel()&&e.getBlockType().getHandle()===s.getHandle()});o=o||p>0&&c.length>=p||u>0&&d.length>=u}t.toggleClass("disabled",o)}),this.$groupButtons.each(function(){var e=(0,a.default)(this),t=e.data("menubtn"),n=l;if(!n&&t){var i=t.menu.$options;n=i.length===i.filter(".disabled").length}e.toggleClass("disabled",n)})},updateResponsiveness:function(){this._buttonsContainerWidth||(this._buttonsContainerWidth=this.$buttonsContainer.width());var e=this.$container.width()<this._buttonsContainerWidth;this.$buttonsContainer.toggleClass("hidden",e),this.$menuContainer.toggleClass("hidden",!e)},getBlockTypeByButton:function(e){var t=e.attr("data-neo-bn-info");return this._blockTypes.find(function(e){return e.getHandle()===t})},"@newBlock":function(e){var t=(0,a.default)(e.currentTarget),n=t.attr("data-neo-bn-info"),i=this._blockTypes.find(function(e){return e.getHandle()===n});this.trigger("newBlock",{blockType:i})}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return u.innerHTML=e,u.textContent}var r=n(27),a=i(r),s=n(5),l=i(s),c=n(6),p=i(c),u=document.createElement("div");a.default.extendFilter("t",function(e,t){return l.default.t("neo",o(e),t)}),a.default.extendFilter("ns",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"field";switch(t){case"input":case"field":return p.default.fieldName(e);case"id":return p.default.value(e,"-");case"js":return p.default.value(e,".")}return p.default.value(e,"-")});var d=0;a.default.extendFunction("uniqueId",function(){return"uid"+d++})},function(e,t,n){var i;(function(e,o){/**
	 * Twig.js 0.8.9
	 *
	 * @copyright 2011-2015 John Roepke and the Twig.js Contributors
	 * @license   Available under the BSD 2-Clause License
	 * @link      https://github.com/justjohn/twig.js
	 */
var r=function(e){return e.VERSION="0.8.9",e}(r||{}),r=function(e){"use strict";function t(e,t){var n=Object.prototype.toString.call(t).slice(8,-1);return void 0!==t&&null!==t&&n===e}return e.trace=!1,e.debug=!1,e.cache=!0,e.placeholders={parent:"{{|PARENT|}}"},e.indexOf=function(e,t){if(Array.prototype.hasOwnProperty("indexOf"))return e.indexOf(t);if(void 0===e||null===e)throw new TypeError;var n=Object(e),i=n.length>>>0;if(0===i)return-1;var o=0;if(arguments.length>0&&(o=Number(arguments[1]),o!==o?o=0:0!==o&&o!==1/0&&o!==-(1/0)&&(o=(o>0||-1)*Math.floor(Math.abs(o)))),o>=i)return-1;for(var r=o>=0?o:Math.max(i-Math.abs(o),0);r<i;r++)if(r in n&&n[r]===t)return r;return e==t?0:-1},e.forEach=function(e,t,n){if(Array.prototype.forEach)return e.forEach(t,n);var i,o;if(null==e)throw new TypeError(" this is null or not defined");var r=Object(e),a=r.length>>>0;if("[object Function]"!={}.toString.call(t))throw new TypeError(t+" is not a function");for(n&&(i=n),o=0;o<a;){var s;o in r&&(s=r[o],t.call(i,s,o,r)),o++}},e.merge=function(t,n,i){return e.forEach(Object.keys(n),function(e){(!i||e in t)&&(t[e]=n[e])}),t},e.Error=function(e){this.message=e,this.name="TwigException",this.type="TwigException"},e.Error.prototype.toString=function(){var e=this.name+": "+this.message;return e},e.log={trace:function(){e.trace&&console&&console.log(Array.prototype.slice.call(arguments))},debug:function(){e.debug&&console&&console.log(Array.prototype.slice.call(arguments))}},"undefined"!=typeof console?"undefined"!=typeof console.error?e.log.error=function(){console.error.apply(console,arguments)}:"undefined"!=typeof console.log&&(e.log.error=function(){console.log.apply(console,arguments)}):e.log.error=function(){},e.ChildContext=function(e){var t=function(){};return t.prototype=e,new t},e.token={},e.token.type={output:"output",logic:"logic",comment:"comment",raw:"raw",output_whitespace_pre:"output_whitespace_pre",output_whitespace_post:"output_whitespace_post",output_whitespace_both:"output_whitespace_both",logic_whitespace_pre:"logic_whitespace_pre",logic_whitespace_post:"logic_whitespace_post",logic_whitespace_both:"logic_whitespace_both"},e.token.definitions=[{type:e.token.type.raw,open:"{% raw %}",close:"{% endraw %}"},{type:e.token.type.raw,open:"{% verbatim %}",close:"{% endverbatim %}"},{type:e.token.type.output_whitespace_pre,open:"{{-",close:"}}"},{type:e.token.type.output_whitespace_post,open:"{{",close:"-}}"},{type:e.token.type.output_whitespace_both,open:"{{-",close:"-}}"},{type:e.token.type.logic_whitespace_pre,open:"{%-",close:"%}"},{type:e.token.type.logic_whitespace_post,open:"{%",close:"-%}"},{type:e.token.type.logic_whitespace_both,open:"{%-",close:"-%}"},{type:e.token.type.output,open:"{{",close:"}}"},{type:e.token.type.logic,open:"{%",close:"%}"},{type:e.token.type.comment,open:"{#",close:"#}"}],e.token.strings=['"',"'"],e.token.findStart=function(t){var n,i,o,r,a={position:null,close_position:null,def:null};for(n=0;n<e.token.definitions.length;n++)i=e.token.definitions[n],o=t.indexOf(i.open),r=t.indexOf(i.close),e.log.trace("Twig.token.findStart: ","Searching for ",i.open," found at ",o),o>=0&&i.open.length!==i.close.length&&r<0||(o>=0&&(null===a.position||o<a.position)?(a.position=o,a.def=i,a.close_position=r):o>=0&&null!==a.position&&o===a.position&&(i.open.length>a.def.open.length?(a.position=o,a.def=i,a.close_position=r):i.open.length===a.def.open.length&&(i.close.length>a.def.close.length?r>=0&&r<a.close_position&&(a.position=o,a.def=i,a.close_position=r):r>=0&&r<a.close_position&&(a.position=o,a.def=i,a.close_position=r))));return delete a.close_position,a},e.token.findEnd=function(t,n,i){for(var o,r,a=null,s=!1,l=0,c=null,p=null,u=null,d=null,h=null,f=null;!s;){if(c=null,p=null,u=t.indexOf(n.close,l),!(u>=0))throw new e.Error("Unable to find closing bracket '"+n.close+"' opened near template position "+i);if(a=u,s=!0,n.type===e.token.type.comment)break;if(n.type===e.token.type.raw)break;for(r=e.token.strings.length,o=0;o<r;o+=1)h=t.indexOf(e.token.strings[o],l),h>0&&h<u&&(null===c||h<c)&&(c=h,p=e.token.strings[o]);if(null!==c)for(d=c+1,a=null,s=!1;;){if(f=t.indexOf(p,d),f<0)throw"Unclosed string in template";if("\\"!==t.substr(f-1,1)){l=f+1;break}d=f+1}}return a},e.tokenize=function(t){for(var n=[],i=0,o=null,r=null;t.length>0;)if(o=e.token.findStart(t),e.log.trace("Twig.tokenize: ","Found token: ",o),null!==o.position){if(o.position>0&&n.push({type:e.token.type.raw,value:t.substring(0,o.position)}),t=t.substr(o.position+o.def.open.length),i+=o.position+o.def.open.length,r=e.token.findEnd(t,o.def,i),e.log.trace("Twig.tokenize: ","Token ends at ",r),n.push({type:o.def.type,value:t.substring(0,r).trim()}),"\n"===t.substr(r+o.def.close.length,1))switch(o.def.type){case"logic_whitespace_pre":case"logic_whitespace_post":case"logic_whitespace_both":case"logic":r+=1}t=t.substr(r+o.def.close.length),i+=r+o.def.close.length}else n.push({type:e.token.type.raw,value:t}),t="";return n},e.compile=function(t){try{for(var n=[],i=[],o=[],r=null,a=null,s=null,l=null,c=null,p=null,u=null,d=null,h=null,f=null,g=null,b=null,y=function(t){e.expression.compile.apply(this,[t]),i.length>0?o.push(t):n.push(t)},m=function(t){if(a=e.logic.compile.apply(this,[t]),f=a.type,g=e.logic.handler[f].open,b=e.logic.handler[f].next,e.log.trace("Twig.compile: ","Compiled logic token to ",a," next is: ",b," open is : ",g),void 0!==g&&!g){if(l=i.pop(),u=e.logic.handler[l.type],e.indexOf(u.next,f)<0)throw new Error(f+" not expected after a "+l.type);l.output=l.output||[],l.output=l.output.concat(o),o=[],h={type:e.token.type.logic,token:l},i.length>0?o.push(h):n.push(h)}void 0!==b&&b.length>0?(e.log.trace("Twig.compile: ","Pushing ",a," to logic stack."),i.length>0&&(l=i.pop(),l.output=l.output||[],l.output=l.output.concat(o),i.push(l),o=[]),i.push(a)):void 0!==g&&g&&(h={type:e.token.type.logic,token:a},i.length>0?o.push(h):n.push(h))};t.length>0;){switch(r=t.shift(),c=n[n.length-1],p=o[o.length-1],d=t[0],e.log.trace("Compiling token ",r),r.type){case e.token.type.raw:i.length>0?o.push(r):n.push(r);break;case e.token.type.logic:m.call(this,r);break;case e.token.type.comment:break;case e.token.type.output:y.call(this,r);break;case e.token.type.logic_whitespace_pre:case e.token.type.logic_whitespace_post:case e.token.type.logic_whitespace_both:case e.token.type.output_whitespace_pre:case e.token.type.output_whitespace_post:case e.token.type.output_whitespace_both:switch(r.type!==e.token.type.output_whitespace_post&&r.type!==e.token.type.logic_whitespace_post&&(c&&c.type===e.token.type.raw&&(n.pop(),null===c.value.match(/^\s*$/)&&(c.value=c.value.trim(),n.push(c))),p&&p.type===e.token.type.raw&&(o.pop(),null===p.value.match(/^\s*$/)&&(p.value=p.value.trim(),o.push(p)))),r.type){case e.token.type.output_whitespace_pre:case e.token.type.output_whitespace_post:case e.token.type.output_whitespace_both:y.call(this,r);break;case e.token.type.logic_whitespace_pre:case e.token.type.logic_whitespace_post:case e.token.type.logic_whitespace_both:m.call(this,r)}r.type!==e.token.type.output_whitespace_pre&&r.type!==e.token.type.logic_whitespace_pre&&d&&d.type===e.token.type.raw&&(t.shift(),null===d.value.match(/^\s*$/)&&(d.value=d.value.trim(),t.unshift(d)))}e.log.trace("Twig.compile: "," Output: ",n," Logic Stack: ",i," Pending Output: ",o)}if(i.length>0)throw s=i.pop(),new Error("Unable to find an end tag for "+s.type+", expecting one of "+s.next);return n}catch(t){if(e.log.error("Error compiling twig template "+this.id+": "),t.stack?e.log.error(t.stack):e.log.error(t.toString()),this.options.rethrow)throw t}},e.parse=function(t,n){try{var i=[],o=!0,r=this;return e.forEach(t,function(t){switch(e.log.debug("Twig.parse: ","Parsing token: ",t),t.type){case e.token.type.raw:i.push(e.filters.raw(t.value));break;case e.token.type.logic:var a=t.token,s=e.logic.parse.apply(r,[a,n,o]);void 0!==s.chain&&(o=s.chain),void 0!==s.context&&(n=s.context),void 0!==s.output&&i.push(s.output);break;case e.token.type.comment:break;case e.token.type.output_whitespace_pre:case e.token.type.output_whitespace_post:case e.token.type.output_whitespace_both:case e.token.type.output:e.log.debug("Twig.parse: ","Output token: ",t.stack),i.push(e.expression.parse.apply(r,[t.stack,n]))}}),e.output.apply(this,[i])}catch(t){if(e.log.error("Error parsing twig template "+this.id+": "),t.stack?e.log.error(t.stack):e.log.error(t.toString()),this.options.rethrow)throw t;if(e.debug)return t.toString()}},e.prepare=function(t){var n,i;return e.log.debug("Twig.prepare: ","Tokenizing ",t),i=e.tokenize.apply(this,[t]),e.log.debug("Twig.prepare: ","Compiling ",i),n=e.compile.apply(this,[i]),e.log.debug("Twig.prepare: ","Compiled ",n),n},e.output=function(t){if(!this.options.autoescape)return t.join("");var n="html";"string"==typeof this.options.autoescape&&(n=this.options.autoescape);var i=[];return e.forEach(t,function(t){t&&t.twig_markup!==!0&&t.twig_markup!=n&&(t=e.filters.escape(t,[n])),i.push(t)}),e.Markup(i.join(""))},e.Templates={loaders:{},parsers:{},registry:{}},e.validateId=function(t){if("prototype"===t)throw new e.Error(t+" is not a valid twig identifier");if(e.cache&&e.Templates.registry.hasOwnProperty(t))throw new e.Error("There is already a template with the ID "+t);return!0},e.Templates.registerLoader=function(t,n,i){if("function"!=typeof n)throw new e.Error("Unable to add loader for "+t+": Invalid function reference given.");i&&(n=n.bind(i)),this.loaders[t]=n},e.Templates.unRegisterLoader=function(e){this.isRegisteredLoader(e)&&delete this.loaders[e]},e.Templates.isRegisteredLoader=function(e){return this.loaders.hasOwnProperty(e)},e.Templates.registerParser=function(t,n,i){if("function"!=typeof n)throw new e.Error("Unable to add parser for "+t+": Invalid function regerence given.");i&&(n=n.bind(i)),this.parsers[t]=n},e.Templates.unRegisterParser=function(e){this.isRegisteredParser(e)&&delete this.parsers[e]},e.Templates.isRegisteredParser=function(e){return this.parsers.hasOwnProperty(e)},e.Templates.save=function(t){if(void 0===t.id)throw new e.Error("Unable to save template with no id");e.Templates.registry[t.id]=t},e.Templates.load=function(t){return e.Templates.registry.hasOwnProperty(t)?e.Templates.registry[t]:null},e.Templates.loadRemote=function(t,n,i,o){var r;return void 0===n.async&&(n.async=!0),void 0===n.id&&(n.id=t),e.cache&&e.Templates.registry.hasOwnProperty(n.id)?("function"==typeof i&&i(e.Templates.registry[n.id]),e.Templates.registry[n.id]):(n.parser=n.parser||"twig",r=this.loaders[n.method]||this.loaders.fs,r.apply(this,arguments))},e.Template=function(n){var i=n.data,o=n.id,r=n.blocks,a=n.macros||{},s=n.base,l=n.path,c=n.url,p=n.name,u=n.method,d=n.options;this.id=o,this.method=u,this.base=s,this.path=l,this.url=c,this.name=p,this.macros=a,this.options=d,this.reset(r),t("String",i)?this.tokens=e.prepare.apply(this,[i]):this.tokens=i,void 0!==o&&e.Templates.save(this)},e.Template.prototype.reset=function(t){e.log.debug("Twig.Template.reset","Reseting template "+this.id),this.blocks={},this.importedBlocks=[],this.originalBlockTokens={},this.child={blocks:t||{}},this.extend=null},e.Template.prototype.render=function(t,n){n=n||{};var i,o;if(this.context=t||{},this.reset(),n.blocks&&(this.blocks=n.blocks),n.macros&&(this.macros=n.macros),i=e.parse.apply(this,[this.tokens,this.context]),this.extend){var r;return this.options.allowInlineIncludes&&(r=e.Templates.load(this.extend),r&&(r.options=this.options)),r||(o=e.path.parsePath(this,this.extend),r=e.Templates.loadRemote(o,{method:this.getLoaderMethod(),base:this.base,async:!1,id:o,options:this.options})),this.parent=r,this.parent.render(this.context,{blocks:this.blocks})}return"blocks"==n.output?this.blocks:"macros"==n.output?this.macros:i},e.Template.prototype.importFile=function(t){var n,i;if(!this.url&&this.options.allowInlineIncludes){if(t=this.path?this.path+"/"+t:t,i=e.Templates.load(t),!i&&(i=e.Templates.loadRemote(n,{id:t,method:this.getLoaderMethod(),async:!1,options:this.options}),!i))throw new e.Error("Unable to find the template "+t);return i.options=this.options,i}return n=e.path.parsePath(this,t),i=e.Templates.loadRemote(n,{method:this.getLoaderMethod(),base:this.base,async:!1,options:this.options,id:n})},e.Template.prototype.importBlocks=function(t,n){var i=this.importFile(t),o=this.context,r=this;n=n||!1,i.render(o),e.forEach(Object.keys(i.blocks),function(e){(n||void 0===r.blocks[e])&&(r.blocks[e]=i.blocks[e],r.importedBlocks.push(e))})},e.Template.prototype.importMacros=function(t){var n=e.path.parsePath(this,t),i=e.Templates.loadRemote(n,{method:this.getLoaderMethod(),async:!1,id:n});return i},e.Template.prototype.getLoaderMethod=function(){return this.path?"fs":this.url?"ajax":this.method||"fs"},e.Template.prototype.compile=function(t){return e.compiler.compile(this,t)},e.Markup=function(e,t){return"undefined"==typeof t&&(t=!0),"string"==typeof e&&e.length>0&&(e=new String(e),e.twig_markup=t),e},e}(r||{});!function(e){"use strict";e.Templates.registerLoader("ajax",function(t,n,i,o){var r,a,s=n.precompiled,l=this.parsers[n.parser]||this.parser.twig;if("undefined"==typeof XMLHttpRequest)throw new e.Error('Unsupported platform: Unable to do ajax requests because there is no "XMLHTTPRequest" implementation');return a=new XMLHttpRequest,a.onreadystatechange=function(){var c=null;4===a.readyState&&(200===a.status||window.cordova&&0==a.status?(e.log.debug("Got template ",a.responseText),c=s===!0?JSON.parse(a.responseText):a.responseText,n.url=t,n.data=c,r=l.call(this,n),"function"==typeof i&&i(r)):"function"==typeof o&&o(a))},a.open("GET",t,!!n.async),a.send(),!!n.async||r})}(r),function(e){"use strict";var t,i;try{t=n(29),i=n(30)}catch(e){}e.Templates.registerLoader("fs",function(n,o,r,a){var s,l=null,c=o.precompiled,p=this.parsers[o.parser]||this.parser.twig;if(!t||!i)throw new e.Error('Unsupported platform: Unable to load from file because there is no "fs" or "path" implementation');var u=function(e,t){return e?void("function"==typeof a&&a(e)):(c===!0&&(t=JSON.parse(t)),o.data=t,o.path=o.path||n,s=p.call(this,o),void("function"==typeof r&&r(s)))};if(o.path=o.path||n,o.async)return t.stat(o.path,function(i,r){if(i||!r.isFile())throw new e.Error("Unable to find template file "+n);t.readFile(o.path,"utf8",u)}),!0;if(!t.statSync(o.path).isFile())throw new e.Error("Unable to find template file "+n);return l=t.readFileSync(o.path,"utf8"),u(void 0,l),s})}(r),function(e){"use strict";e.Templates.registerParser("source",function(e){return e.data||""})}(r),function(e){"use strict";e.Templates.registerParser("twig",function(t){return new e.Template(t)})}(r),function(){"use strict";String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on non-object");var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return n})}();var r=function(e){e.lib={};var t=function(){function e(){var t=arguments[0],n=e.cache;return n[t]&&n.hasOwnProperty(t)||(n[t]=e.parse(t)),e.format.call(null,n[t],arguments)}function t(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function n(e,t){return Array(t+1).join(e)}var i={not_string:/[^s]/,number:/[diefg]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};e.format=function(o,r){var a,s,l,c,p,u,d,h=1,f=o.length,g="",b=[],y=!0,m="";for(s=0;s<f;s++)if(g=t(o[s]),"string"===g)b[b.length]=o[s];else if("array"===g){if(c=o[s],c[2])for(a=r[h],l=0;l<c[2].length;l++){if(!a.hasOwnProperty(c[2][l]))throw new Error(e("[sprintf] property '%s' does not exist",c[2][l]));a=a[c[2][l]]}else a=c[1]?r[c[1]]:r[h++];if("function"==t(a)&&(a=a()),i.not_string.test(c[8])&&i.not_json.test(c[8])&&"number"!=t(a)&&isNaN(a))throw new TypeError(e("[sprintf] expecting number but found %s",t(a)));switch(i.number.test(c[8])&&(y=a>=0),c[8]){case"b":a=a.toString(2);break;case"c":a=String.fromCharCode(a);break;case"d":case"i":a=parseInt(a,10);break;case"j":a=JSON.stringify(a,null,c[6]?parseInt(c[6]):0);break;case"e":a=c[7]?a.toExponential(c[7]):a.toExponential();break;case"f":a=c[7]?parseFloat(a).toFixed(c[7]):parseFloat(a);break;case"g":a=c[7]?parseFloat(a).toPrecision(c[7]):parseFloat(a);break;case"o":a=a.toString(8);break;case"s":a=(a=String(a))&&c[7]?a.substring(0,c[7]):a;break;case"u":a>>>=0;break;case"x":a=a.toString(16);break;case"X":a=a.toString(16).toUpperCase()}i.json.test(c[8])?b[b.length]=a:(!i.number.test(c[8])||y&&!c[3]?m="":(m=y?"+":"-",a=a.toString().replace(i.sign,"")),u=c[4]?"0"===c[4]?"0":c[4].charAt(1):" ",d=c[6]-(m+a).length,p=c[6]&&d>0?n(u,d):"",b[b.length]=c[5]?m+a+p:"0"===u?m+p+a:p+m+a)}return b.join("")},e.cache={},e.parse=function(e){for(var t=e,n=[],o=[],r=0;t;){if(null!==(n=i.text.exec(t)))o[o.length]=n[0];else if(null!==(n=i.modulo.exec(t)))o[o.length]="%";else{if(null===(n=i.placeholder.exec(t)))throw new SyntaxError("[sprintf] unexpected placeholder");if(n[2]){r|=1;var a=[],s=n[2],l=[];if(null===(l=i.key.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(a[a.length]=l[1];""!==(s=s.substring(l[0].length));)if(null!==(l=i.key_access.exec(s)))a[a.length]=l[1];else{if(null===(l=i.index_access.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");a[a.length]=l[1]}n[2]=a}else r|=2;if(3===r)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");o[o.length]=n}t=t.substring(n[0].length)}return o};var o=function(t,n,i){return i=(n||[]).slice(0),i.splice(0,0,t),e.apply(null,i)};return{sprintf:e,vsprintf:o}}(),n=t.sprintf,i=t.vsprintf;return e.lib.sprintf=n,e.lib.vsprintf=i,function(){function t(e){return(e=Math.abs(e)%100)%10==1&&11!=e?"st":e%10==2&&12!=e?"nd":e%10==3&&13!=e?"rd":"th"}function n(e){var t=new Date(e.getFullYear()+1,0,4);return(t-e)/864e5<7&&(e.getDay()+6)%7<(t.getDay()+6)%7?t.getFullYear():e.getMonth()>0||e.getDate()>=4?e.getFullYear():e.getFullYear()-((e.getDay()+6)%7-e.getDate()>2?1:0)}function i(e){var t=new Date(n(e),0,4);return t.setDate(t.getDate()-(t.getDay()+6)%7),parseInt((e-t)/6048e5)+1}var o="Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),r="Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),a="Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),s="January,February,March,April,May,June,July,August,September,October,November,December".split(",");e.lib.formatDate=function(e,l){if("string"!=typeof l||/^\s*$/.test(l))return e+"";var c=new Date(e.getFullYear(),0,1),p=e;return l.replace(/[dDjlNSwzWFmMntLoYyaABgGhHisuU]/g,function(e){switch(e){case"d":return("0"+p.getDate()).replace(/^.+(..)$/,"$1");case"D":return o[p.getDay()];case"j":return p.getDate();case"l":return r[p.getDay()];case"N":return(p.getDay()+6)%7+1;case"S":return t(p.getDate());case"w":return p.getDay();case"z":return Math.ceil((c-p)/864e5);case"W":return("0"+i(p)).replace(/^.(..)$/,"$1");case"F":return s[p.getMonth()];case"m":return("0"+(p.getMonth()+1)).replace(/^.+(..)$/,"$1");case"M":return a[p.getMonth()];case"n":return p.getMonth()+1;case"t":return new Date(p.getFullYear(),p.getMonth()+1,-1).getDate();case"L":return 29==new Date(p.getFullYear(),1,29).getDate()?1:0;case"o":return n(p);case"Y":return p.getFullYear();case"y":return(p.getFullYear()+"").replace(/^.+(..)$/,"$1");case"a":return p.getHours()<12?"am":"pm";case"A":return p.getHours()<12?"AM":"PM";case"B":return Math.floor(1e3*((p.getUTCHours()+1)%24+p.getUTCMinutes()/60+p.getUTCSeconds()/3600)/24);case"g":return p.getHours()%12!=0?p.getHours()%12:12;case"G":return p.getHours();case"h":return("0"+(p.getHours()%12!=0?p.getHours()%12:12)).replace(/^.+(..)$/,"$1");case"H":return("0"+p.getHours()).replace(/^.+(..)$/,"$1");case"i":return("0"+p.getMinutes()).replace(/^.+(..)$/,"$1");case"s":return("0"+p.getSeconds()).replace(/^.+(..)$/,"$1");case"u":return p.getMilliseconds();case"U":return p.getTime()/1e3}})}}(),e.lib.strip_tags=function(e,t){t=(((t||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var n=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,i=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;return e.replace(i,"").replace(n,function(e,n){return t.indexOf("<"+n.toLowerCase()+">")>-1?e:""})},e.lib.parseISO8601Date=function(e){var t=/(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d):(\d\d)(\.\d+)?(Z|([+-])(\d\d):(\d\d))/,n=[];if(n=e.match(t),!n)throw"Couldn't parse ISO 8601 date string '"+e+"'";var i=[1,2,3,4,5,6,10,11];for(var o in i)n[i[o]]=parseInt(n[i[o]],10);n[7]=parseFloat(n[7]);var r=Date.UTC(n[1],n[2]-1,n[3],n[4],n[5],n[6]);if(n[7]>0&&(r+=Math.round(1e3*n[7])),"Z"!=n[8]&&n[10]){var a=60*n[10]*60*1e3;n[11]&&(a+=60*n[11]*1e3),"-"==n[9]?r-=a:r+=a}return new Date(r)},e.lib.strtotime=function(e,t){function n(e,t,n){var i,o=c[t];"undefined"!=typeof o&&(i=o-l.getDay(),0===i?i=7*n:i>0&&"last"===e?i-=7:i<0&&"next"===e&&(i+=7),l.setDate(l.getDate()+i))}function i(e){var t=e.split(" "),i=t[0],o=t[1].substring(0,3),r=/\d+/.test(i),a="ago"===t[2],s=("last"===i?-1:1)*(a?-1:1);if(r&&(s*=parseInt(i,10)),p.hasOwnProperty(o)&&!t[1].match(/^mon(day|\.)?$/i))return l["set"+p[o]](l["get"+p[o]]()+s);if("wee"===o)return l.setDate(l.getDate()+7*s);if("next"===i||"last"===i)n(i,o,s);else if(!r)return!1;return!0}var o,r,a,s,l,c,p,u,d,h,f,g=!1;if(!e)return g;if(e=e.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g," ").replace(/[\t\r\n]/g,"").toLowerCase(),r=e.match(/^(\d{1,4})([\-\.\/\:])(\d{1,2})([\-\.\/\:])(\d{1,4})(?:\s(\d{1,2}):(\d{2})?:?(\d{2})?)?(?:\s([A-Z]+)?)?$/),r&&r[2]===r[4])if(r[1]>1901)switch(r[2]){case"-":return r[3]>12||r[5]>31?g:new Date(r[1],parseInt(r[3],10)-1,r[5],r[6]||0,r[7]||0,r[8]||0,r[9]||0)/1e3;case".":return g;case"/":return r[3]>12||r[5]>31?g:new Date(r[1],parseInt(r[3],10)-1,r[5],r[6]||0,r[7]||0,r[8]||0,r[9]||0)/1e3}else if(r[5]>1901)switch(r[2]){case"-":return r[3]>12||r[1]>31?g:new Date(r[5],parseInt(r[3],10)-1,r[1],r[6]||0,r[7]||0,r[8]||0,r[9]||0)/1e3;case".":return r[3]>12||r[1]>31?g:new Date(r[5],parseInt(r[3],10)-1,r[1],r[6]||0,r[7]||0,r[8]||0,r[9]||0)/1e3;case"/":return r[1]>12||r[3]>31?g:new Date(r[5],parseInt(r[1],10)-1,r[3],r[6]||0,r[7]||0,r[8]||0,r[9]||0)/1e3}else switch(r[2]){case"-":return r[3]>12||r[5]>31||r[1]<70&&r[1]>38?g:(s=r[1]>=0&&r[1]<=38?+r[1]+2e3:r[1],new Date(s,parseInt(r[3],10)-1,r[5],r[6]||0,r[7]||0,r[8]||0,r[9]||0)/1e3);case".":return r[5]>=70?r[3]>12||r[1]>31?g:new Date(r[5],parseInt(r[3],10)-1,r[1],r[6]||0,r[7]||0,r[8]||0,r[9]||0)/1e3:r[5]<60&&!r[6]?r[1]>23||r[3]>59?g:(a=new Date,new Date(a.getFullYear(),a.getMonth(),a.getDate(),r[1]||0,r[3]||0,r[5]||0,r[9]||0)/1e3):g;case"/":return r[1]>12||r[3]>31||r[5]<70&&r[5]>38?g:(s=r[5]>=0&&r[5]<=38?+r[5]+2e3:r[5],new Date(s,parseInt(r[1],10)-1,r[3],r[6]||0,r[7]||0,r[8]||0,r[9]||0)/1e3);case":":return r[1]>23||r[3]>59||r[5]>59?g:(a=new Date,new Date(a.getFullYear(),a.getMonth(),a.getDate(),r[1]||0,r[3]||0,r[5]||0)/1e3)}if("now"===e)return null===t||isNaN(t)?(new Date).getTime()/1e3|0:0|t;if(!isNaN(o=Date.parse(e)))return o/1e3|0;if((r=e.match(/^([0-9]{4}-[0-9]{2}-[0-9]{2})[ t]([0-9]{2}:[0-9]{2}:[0-9]{2}(\.[0-9]+)?)([\+-][0-9]{2}(:[0-9]{2})?|z)/))&&("z"==r[4]?r[4]="Z":r[4].match(/^([\+-][0-9]{2})$/)&&(r[4]=r[4]+":00"),!isNaN(o=Date.parse(r[1]+"T"+r[2]+r[4]))))return o/1e3|0;if(l=t?new Date(1e3*t):new Date,c={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},p={yea:"FullYear",mon:"Month",day:"Date",hou:"Hours",min:"Minutes",sec:"Seconds"},d="(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec|sunday|sun\\.?|monday|mon\\.?|tuesday|tue\\.?|wednesday|wed\\.?|thursday|thu\\.?|friday|fri\\.?|saturday|sat\\.?)",h="([+-]?\\d+\\s"+d+"|(last|next)\\s"+d+")(\\sago)?",r=e.match(new RegExp(h,"gi")),!r)return g;for(f=0,u=r.length;f<u;f++)if(!i(r[f]))return g;return l.getTime()/1e3},e.lib.is=function(e,t){var n=Object.prototype.toString.call(t).slice(8,-1);return void 0!==t&&null!==t&&n===e},e.lib.copy=function(e){var t,n={};for(t in e)n[t]=e[t];return n},e.lib.replaceAll=function(e,t,n){return e.split(t).join(n)},e.lib.chunkArray=function(t,n){var i=[],o=0,r=t.length;if(n<1||!e.lib.is("Array",t))return[];for(;o<r;)i.push(t.slice(o,o+=n));return i},e.lib.round=function(e,t,n){var i,o,r,a;if(t|=0,i=Math.pow(10,t),e*=i,a=e>0|-(e<0),r=e%1===.5*a,o=Math.floor(e),r)switch(n){case"PHP_ROUND_HALF_DOWN":e=o+(a<0);break;case"PHP_ROUND_HALF_EVEN":e=o+o%2*a;break;case"PHP_ROUND_HALF_ODD":e=o+!(o%2);break;default:e=o+(a>0)}return(r?e:Math.round(e))/i},e.lib.max=function(){var e,t,n=0,i=0,o=arguments,r=o.length,a=function(e){if("[object Array]"===Object.prototype.toString.call(e))return e;var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t},s=function(e,t){var n=0,i=0,o=0,r=0,l=0;if(e===t)return 0;if("object"==typeof e){if("object"==typeof t){if(e=a(e),t=a(t),l=e.length,r=t.length,r>l)return 1;if(r<l)return-1;for(n=0,i=l;n<i;++n){if(o=s(e[n],t[n]),1==o)return 1;if(o==-1)return-1}return 0}return-1}return"object"==typeof t?1:isNaN(t)&&!isNaN(e)?0==e?0:e<0?1:-1:isNaN(e)&&!isNaN(t)?0==t?0:t>0?1:-1:t==e?0:t>e?1:-1};if(0===r)throw new Error("At least one value should be passed to max()");if(1===r){if("object"!=typeof o[0])throw new Error("Wrong parameter count for max()");if(e=a(o[0]),0===e.length)throw new Error("Array must contain at least one element for max()")}else e=o;for(t=e[0],n=1,i=e.length;n<i;++n)1==s(t,e[n])&&(t=e[n]);return t},e.lib.min=function(){var e,t,n=0,i=0,o=arguments,r=o.length,a=function(e){if("[object Array]"===Object.prototype.toString.call(e))return e;var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t},s=function(e,t){var n=0,i=0,o=0,r=0,l=0;if(e===t)return 0;if("object"==typeof e){if("object"==typeof t){if(e=a(e),t=a(t),l=e.length,r=t.length,r>l)return 1;if(r<l)return-1;for(n=0,i=l;n<i;++n){if(o=s(e[n],t[n]),1==o)return 1;if(o==-1)return-1}return 0}return-1}return"object"==typeof t?1:isNaN(t)&&!isNaN(e)?0==e?0:e<0?1:-1:isNaN(e)&&!isNaN(t)?0==t?0:t>0?1:-1:t==e?0:t>e?1:-1};if(0===r)throw new Error("At least one value should be passed to min()");if(1===r){if("object"!=typeof o[0])throw new Error("Wrong parameter count for min()");if(e=a(o[0]),0===e.length)throw new Error("Array must contain at least one element for min()")}else e=o;for(t=e[0],n=1,i=e.length;n<i;++n)s(t,e[n])==-1&&(t=e[n]);return t},e}(r||{}),r=function(e){"use strict";for(e.logic={},e.logic.type={if_:"Twig.logic.type.if",endif:"Twig.logic.type.endif",for_:"Twig.logic.type.for",endfor:"Twig.logic.type.endfor",else_:"Twig.logic.type.else",elseif:"Twig.logic.type.elseif",set:"Twig.logic.type.set",setcapture:"Twig.logic.type.setcapture",endset:"Twig.logic.type.endset",filter:"Twig.logic.type.filter",endfilter:"Twig.logic.type.endfilter",shortblock:"Twig.logic.type.shortblock",block:"Twig.logic.type.block",endblock:"Twig.logic.type.endblock",extends_:"Twig.logic.type.extends",use:"Twig.logic.type.use",include:"Twig.logic.type.include",spaceless:"Twig.logic.type.spaceless",endspaceless:"Twig.logic.type.endspaceless",macro:"Twig.logic.type.macro",endmacro:"Twig.logic.type.endmacro",import_:"Twig.logic.type.import",from:"Twig.logic.type.from",embed:"Twig.logic.type.embed",endembed:"Twig.logic.type.endembed"},e.logic.definitions=[{type:e.logic.type.if_,regex:/^if\s+([\s\S]+)$/,next:[e.logic.type.else_,e.logic.type.elseif,e.logic.type.endif],open:!0,compile:function(t){var n=t.match[1];return t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:n}]).stack,delete t.match,t},parse:function(t,n,i){var o="",r=e.expression.parse.apply(this,[t.stack,n]);return i=!0,r&&(i=!1,o=e.parse.apply(this,[t.output,n])),{chain:i,output:o}}},{type:e.logic.type.elseif,regex:/^elseif\s+([^\s].*)$/,next:[e.logic.type.else_,e.logic.type.elseif,e.logic.type.endif],open:!1,compile:function(t){var n=t.match[1];return t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:n}]).stack,delete t.match,t},parse:function(t,n,i){var o="";return i&&e.expression.parse.apply(this,[t.stack,n])===!0&&(i=!1,o=e.parse.apply(this,[t.output,n])),{chain:i,output:o}}},{type:e.logic.type.else_,regex:/^else$/,next:[e.logic.type.endif,e.logic.type.endfor],open:!1,parse:function(t,n,i){var o="";return i&&(o=e.parse.apply(this,[t.output,n])),{chain:i,output:o}}},{type:e.logic.type.endif,regex:/^endif$/,next:[],open:!1},{type:e.logic.type.for_,regex:/^for\s+([a-zA-Z0-9_,\s]+)\s+in\s+([^\s].*?)(?:\s+if\s+([^\s].*))?$/,next:[e.logic.type.else_,e.logic.type.endfor],open:!0,compile:function(t){var n=t.match[1],i=t.match[2],o=t.match[3],r=null;if(t.key_var=null,t.value_var=null,n.indexOf(",")>=0){if(r=n.split(","),2!==r.length)throw new e.Error("Invalid expression in for loop: "+n);t.key_var=r[0].trim(),t.value_var=r[1].trim()}else t.value_var=n;return t.expression=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:i}]).stack,o&&(t.conditional=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:o}]).stack),delete t.match,t},parse:function(t,n,i){var o,r,a=e.expression.parse.apply(this,[t.expression,n]),s=[],l=0,c=this,p=t.conditional,u=function(e,t){var i=void 0!==p;return{index:e+1,index0:e,revindex:i?void 0:t-e,revindex0:i?void 0:t-e-1,first:0===e,last:i?void 0:e===t-1,length:i?void 0:t,parent:n}},d=function(i,r){var a=e.ChildContext(n);a[t.value_var]=r,t.key_var&&(a[t.key_var]=i),a.loop=u(l,o),(void 0===p||e.expression.parse.apply(c,[p,a]))&&(s.push(e.parse.apply(c,[t.output,a])),l+=1),delete a.loop,delete a[t.value_var],delete a[t.key_var],e.merge(n,a,!0)};return e.lib.is("Array",a)?(o=a.length,e.forEach(a,function(e){var t=l;d(t,e)})):e.lib.is("Object",a)&&(r=void 0!==a._keys?a._keys:Object.keys(a),o=r.length,e.forEach(r,function(e){"_keys"!==e&&d(e,a[e])})),i=0===s.length,{chain:i,output:e.output.apply(this,[s])}}},{type:e.logic.type.endfor,regex:/^endfor$/,next:[],open:!1},{type:e.logic.type.set,regex:/^set\s+([a-zA-Z0-9_,\s]+)\s*=\s*([\s\S]+)$/,next:[],open:!0,compile:function(t){var n=t.match[1].trim(),i=t.match[2],o=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:i}]).stack;return t.key=n,t.expression=o,delete t.match,t},parse:function(t,n,i){var o=e.expression.parse.apply(this,[t.expression,n]),r=t.key;return n[r]=o,{chain:i,context:n}}},{type:e.logic.type.setcapture,regex:/^set\s+([a-zA-Z0-9_,\s]+)$/,next:[e.logic.type.endset],open:!0,compile:function(e){var t=e.match[1].trim();return e.key=t,delete e.match,e},parse:function(t,n,i){var o=e.parse.apply(this,[t.output,n]),r=t.key;return this.context[r]=o,n[r]=o,{chain:i,context:n}}},{type:e.logic.type.endset,regex:/^endset$/,next:[],open:!1},{type:e.logic.type.filter,regex:/^filter\s+(.+)$/,next:[e.logic.type.endfilter],open:!0,compile:function(t){var n="|"+t.match[1].trim();return t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:n}]).stack,delete t.match,t},parse:function(t,n,i){var o=e.parse.apply(this,[t.output,n]),r=[{type:e.expression.type.string,value:o}].concat(t.stack),a=e.expression.parse.apply(this,[r,n]);return{chain:i,output:a}}},{type:e.logic.type.endfilter,regex:/^endfilter$/,next:[],open:!1},{type:e.logic.type.block,regex:/^block\s+([a-zA-Z0-9_]+)$/,next:[e.logic.type.endblock],open:!0,compile:function(e){return e.block=e.match[1].trim(),delete e.match,e},parse:function(t,n,i){var o,r,a=e.indexOf(this.importedBlocks,t.block)>-1,s=this.blocks[t.block]&&e.indexOf(this.blocks[t.block],e.placeholders.parent)>-1;return(void 0===this.blocks[t.block]||a||s||n.loop||t.overwrite)&&(o=t.expression?e.expression.parse.apply(this,[{type:e.expression.type.string,value:e.expression.parse.apply(this,[t.output,n])},n]):e.expression.parse.apply(this,[{type:e.expression.type.string,value:e.parse.apply(this,[t.output,n])},n]),a&&this.importedBlocks.splice(this.importedBlocks.indexOf(t.block),1),s?this.blocks[t.block]=e.Markup(this.blocks[t.block].replace(e.placeholders.parent,o)):this.blocks[t.block]=o,
this.originalBlockTokens[t.block]={type:t.type,block:t.block,output:t.output,overwrite:!0}),r=this.child.blocks[t.block]?this.child.blocks[t.block]:this.blocks[t.block],{chain:i,output:r}}},{type:e.logic.type.shortblock,regex:/^block\s+([a-zA-Z0-9_]+)\s+(.+)$/,next:[],open:!0,compile:function(t){return t.expression=t.match[2].trim(),t.output=e.expression.compile({type:e.expression.type.expression,value:t.expression}).stack,t.block=t.match[1].trim(),delete t.match,t},parse:function(t,n,i){return e.logic.handler[e.logic.type.block].parse.apply(this,arguments)}},{type:e.logic.type.endblock,regex:/^endblock(?:\s+([a-zA-Z0-9_]+))?$/,next:[],open:!1},{type:e.logic.type.extends_,regex:/^extends\s+(.+)$/,next:[],open:!0,compile:function(t){var n=t.match[1].trim();return delete t.match,t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:n}]).stack,t},parse:function(t,n,i){var o=e.expression.parse.apply(this,[t.stack,n]);return this.extend=o,{chain:i,output:""}}},{type:e.logic.type.use,regex:/^use\s+(.+)$/,next:[],open:!0,compile:function(t){var n=t.match[1].trim();return delete t.match,t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:n}]).stack,t},parse:function(t,n,i){var o=e.expression.parse.apply(this,[t.stack,n]);return this.importBlocks(o),{chain:i,output:""}}},{type:e.logic.type.include,regex:/^include\s+(ignore missing\s+)?(.+?)\s*(?:with\s+([\S\s]+?))?\s*(only)?$/,next:[],open:!0,compile:function(t){var n=t.match,i=void 0!==n[1],o=n[2].trim(),r=n[3],a=void 0!==n[4]&&n[4].length;return delete t.match,t.only=a,t.includeMissing=i,t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:o}]).stack,void 0!==r&&(t.withStack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:r.trim()}]).stack),t},parse:function(t,n,i){var o,r,a,s={};if(t.only||(s=e.ChildContext(n)),void 0!==t.withStack){o=e.expression.parse.apply(this,[t.withStack,n]);for(r in o)o.hasOwnProperty(r)&&(s[r]=o[r])}var l=e.expression.parse.apply(this,[t.stack,s]);return a=l instanceof e.Template?l:this.importFile(l),{chain:i,output:a.render(s)}}},{type:e.logic.type.spaceless,regex:/^spaceless$/,next:[e.logic.type.endspaceless],open:!0,parse:function(t,n,i){var o=e.parse.apply(this,[t.output,n]),r=/>\s+</g,a=o.replace(r,"><").trim();return{chain:i,output:a}}},{type:e.logic.type.endspaceless,regex:/^endspaceless$/,next:[],open:!1},{type:e.logic.type.macro,regex:/^macro\s+([a-zA-Z0-9_]+)\s*\(\s*((?:[a-zA-Z0-9_]+(?:,\s*)?)*)\s*\)$/,next:[e.logic.type.endmacro],open:!0,compile:function(t){for(var n=t.match[1],i=t.match[2].split(/[\s,]+/),o=0;o<i.length;o++)for(var r=0;r<i.length;r++)if(i[o]===i[r]&&o!==r)throw new e.Error("Duplicate arguments for parameter: "+i[o]);return t.macroName=n,t.parameters=i,delete t.match,t},parse:function(t,n,i){var o=this;return this.macros[t.macroName]=function(){for(var n={_self:o.macros},i=0;i<t.parameters.length;i++){var r=t.parameters[i];"undefined"!=typeof arguments[i]?n[r]=arguments[i]:n[r]=void 0}return e.parse.apply(o,[t.output,n])},{chain:i,output:""}}},{type:e.logic.type.endmacro,regex:/^endmacro$/,next:[],open:!1},{type:e.logic.type.import_,regex:/^import\s+(.+)\s+as\s+([a-zA-Z0-9_]+)$/,next:[],open:!0,compile:function(t){var n=t.match[1].trim(),i=t.match[2].trim();return delete t.match,t.expression=n,t.contextName=i,t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:n}]).stack,t},parse:function(t,n,i){if("_self"!==t.expression){var o=e.expression.parse.apply(this,[t.stack,n]),r=this.importFile(o||t.expression);n[t.contextName]=r.render({},{output:"macros"})}else n[t.contextName]=this.macros;return{chain:i,output:""}}},{type:e.logic.type.from,regex:/^from\s+(.+)\s+import\s+([a-zA-Z0-9_, ]+)$/,next:[],open:!0,compile:function(t){for(var n=t.match[1].trim(),i=t.match[2].trim().split(/[ ,]+/),o={},r=0;r<i.length;r++){var a=i[r],s=a.match(/^([a-zA-Z0-9_]+)\s+(.+)\s+as\s+([a-zA-Z0-9_]+)$/);s?o[s[1].trim()]=s[2].trim():a.match(/^([a-zA-Z0-9_]+)$/)&&(o[a]=a)}return delete t.match,t.expression=n,t.macroNames=o,t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:n}]).stack,t},parse:function(t,n,i){var o;if("_self"!==t.expression){var r=e.expression.parse.apply(this,[t.stack,n]),a=this.importFile(r||t.expression);o=a.render({},{output:"macros"})}else o=this.macros;for(var s in t.macroNames)o.hasOwnProperty(s)&&(n[t.macroNames[s]]=o[s]);return{chain:i,output:""}}},{type:e.logic.type.embed,regex:/^embed\s+(ignore missing\s+)?(.+?)\s*(?:with\s+(.+?))?\s*(only)?$/,next:[e.logic.type.endembed],open:!0,compile:function(t){var n=t.match,i=void 0!==n[1],o=n[2].trim(),r=n[3],a=void 0!==n[4]&&n[4].length;return delete t.match,t.only=a,t.includeMissing=i,t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:o}]).stack,void 0!==r&&(t.withStack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:r.trim()}]).stack),t},parse:function(t,n,i){var o,r,a,s={};if(!t.only)for(r in n)n.hasOwnProperty(r)&&(s[r]=n[r]);if(void 0!==t.withStack){o=e.expression.parse.apply(this,[t.withStack,n]);for(r in o)o.hasOwnProperty(r)&&(s[r]=o[r])}var l=e.expression.parse.apply(this,[t.stack,s]);a=l instanceof e.Template?l:this.importFile(l),this.blocks={};e.parse.apply(this,[t.output,s]);return{chain:i,output:a.render(s,{blocks:this.blocks})}}},{type:e.logic.type.endembed,regex:/^endembed$/,next:[],open:!1}],e.logic.handler={},e.logic.extendType=function(t,n){n=n||"Twig.logic.type"+t,e.logic.type[t]=n},e.logic.extend=function(t){if(!t.type)throw new e.Error("Unable to extend logic definition. No type provided for "+t);e.logic.extendType(t.type),e.logic.handler[t.type]=t};e.logic.definitions.length>0;)e.logic.extend(e.logic.definitions.shift());return e.logic.compile=function(t){var n=t.value.trim(),i=e.logic.tokenize.apply(this,[n]),o=e.logic.handler[i.type];return o.compile&&(i=o.compile.apply(this,[i]),e.log.trace("Twig.logic.compile: ","Compiled logic token to ",i)),i},e.logic.tokenize=function(t){var n={},i=null,o=null,r=null,a=null,s=null,l=null;t=t.trim();for(i in e.logic.handler)if(e.logic.handler.hasOwnProperty(i))for(o=e.logic.handler[i].type,r=e.logic.handler[i].regex,a=[],r instanceof Array?a=r:a.push(r);a.length>0;)if(s=a.shift(),l=s.exec(t.trim()),null!==l)return n.type=o,n.match=l,e.log.trace("Twig.logic.tokenize: ","Matched a ",o," regular expression of ",l),n;throw new e.Error("Unable to parse '"+t.trim()+"'")},e.logic.parse=function(t,n,i){var o,r="";return n=n||{},e.log.debug("Twig.logic.parse: ","Parsing logic token ",t),o=e.logic.handler[t.type],o.parse&&(r=o.parse.apply(this,[t,n,i])),r},e}(r||{}),r=function(e){"use strict";e.expression={},e.expression.reservedWords=["true","false","null","TRUE","FALSE","NULL","_context"],e.expression.type={comma:"Twig.expression.type.comma",operator:{unary:"Twig.expression.type.operator.unary",binary:"Twig.expression.type.operator.binary"},string:"Twig.expression.type.string",bool:"Twig.expression.type.bool",array:{start:"Twig.expression.type.array.start",end:"Twig.expression.type.array.end"},object:{start:"Twig.expression.type.object.start",end:"Twig.expression.type.object.end"},parameter:{start:"Twig.expression.type.parameter.start",end:"Twig.expression.type.parameter.end"},key:{period:"Twig.expression.type.key.period",brackets:"Twig.expression.type.key.brackets"},filter:"Twig.expression.type.filter",_function:"Twig.expression.type._function",variable:"Twig.expression.type.variable",number:"Twig.expression.type.number",_null:"Twig.expression.type.null",context:"Twig.expression.type.context",test:"Twig.expression.type.test"},e.expression.set={operations:[e.expression.type.filter,e.expression.type.operator.unary,e.expression.type.operator.binary,e.expression.type.array.end,e.expression.type.object.end,e.expression.type.parameter.end,e.expression.type.comma,e.expression.type.test],expressions:[e.expression.type._function,e.expression.type.bool,e.expression.type.string,e.expression.type.variable,e.expression.type.number,e.expression.type._null,e.expression.type.context,e.expression.type.parameter.start,e.expression.type.array.start,e.expression.type.object.start]},e.expression.set.operations_extended=e.expression.set.operations.concat([e.expression.type.key.period,e.expression.type.key.brackets]),e.expression.fn={compile:{push:function(e,t,n){n.push(e)},push_both:function(e,t,n){n.push(e),t.push(e)}},parse:{push:function(e,t,n){t.push(e)},push_value:function(e,t,n){t.push(e.value)}}},e.expression.definitions=[{type:e.expression.type.test,regex:/^is\s+(not)?\s*([a-zA-Z_][a-zA-Z0-9_]*)/,next:e.expression.set.operations.concat([e.expression.type.parameter.start]),compile:function(e,t,n){e.filter=e.match[2],e.modifier=e.match[1],delete e.match,delete e.value,n.push(e)},parse:function(t,n,i){var o=n.pop(),r=t.params&&e.expression.parse.apply(this,[t.params,i]),a=e.test(t.filter,o,r);"not"==t.modifier?n.push(!a):n.push(a)}},{type:e.expression.type.comma,regex:/^,/,next:e.expression.set.expressions.concat([e.expression.type.array.end,e.expression.type.object.end]),compile:function(t,n,i){var o,r=n.length-1;for(delete t.match,delete t.value;r>=0;r--){if(o=n.pop(),o.type===e.expression.type.object.start||o.type===e.expression.type.parameter.start||o.type===e.expression.type.array.start){n.push(o);break}i.push(o)}i.push(t)}},{type:e.expression.type.operator.binary,regex:/(^[\+\-~%\?\:]|^[!=]==?|^[!<>]=?|^\*\*?|^\/\/?|^and\s+|^or\s+|^in\s+|^not in\s+|^\.\.)/,next:e.expression.set.expressions.concat([e.expression.type.operator.unary]),compile:function(t,n,i){delete t.match,t.value=t.value.trim();var o=t.value,r=e.expression.operator.lookup(o,t);for(e.log.trace("Twig.expression.compile: ","Operator: ",r," from ",o);n.length>0&&(n[n.length-1].type==e.expression.type.operator.unary||n[n.length-1].type==e.expression.type.operator.binary)&&(r.associativity===e.expression.operator.leftToRight&&r.precidence>=n[n.length-1].precidence||r.associativity===e.expression.operator.rightToLeft&&r.precidence>n[n.length-1].precidence);){var a=n.pop();i.push(a)}if(":"===o){if(!n[n.length-1]||"?"!==n[n.length-1].value){var s=i.pop();if(s.type===e.expression.type.string||s.type===e.expression.type.variable)t.key=s.value;else if(s.type===e.expression.type.number)t.key=s.value.toString();else{if(s.type!==e.expression.type.parameter.end||!s.expression)throw new e.Error("Unexpected value before ':' of "+s.type+" = "+s.value);t.params=s.params}return void i.push(t)}}else n.push(r)},parse:function(t,n,i){t.key?n.push(t):t.params?(t.key=e.expression.parse.apply(this,[t.params,i]),n.push(t),delete t.params):e.expression.operator.parse(t.value,n)}},{type:e.expression.type.operator.unary,regex:/(^not\s+)/,next:e.expression.set.expressions,compile:function(t,n,i){delete t.match,t.value=t.value.trim();var o=t.value,r=e.expression.operator.lookup(o,t);for(e.log.trace("Twig.expression.compile: ","Operator: ",r," from ",o);n.length>0&&(n[n.length-1].type==e.expression.type.operator.unary||n[n.length-1].type==e.expression.type.operator.binary)&&(r.associativity===e.expression.operator.leftToRight&&r.precidence>=n[n.length-1].precidence||r.associativity===e.expression.operator.rightToLeft&&r.precidence>n[n.length-1].precidence);){var a=n.pop();i.push(a)}n.push(r)},parse:function(t,n,i){e.expression.operator.parse(t.value,n)}},{type:e.expression.type.string,regex:/^(["'])(?:(?=(\\?))\2[\s\S])*?\1/,next:e.expression.set.operations,compile:function(t,n,i){var o=t.value;delete t.match,o='"'===o.substring(0,1)?o.replace('\\"','"'):o.replace("\\'","'"),t.value=o.substring(1,o.length-1).replace(/\\n/g,"\n").replace(/\\r/g,"\r"),e.log.trace("Twig.expression.compile: ","String value: ",t.value),i.push(t)},parse:e.expression.fn.parse.push_value},{type:e.expression.type.parameter.start,regex:/^\(/,next:e.expression.set.expressions.concat([e.expression.type.parameter.end]),compile:e.expression.fn.compile.push_both,parse:e.expression.fn.parse.push},{type:e.expression.type.parameter.end,regex:/^\)/,next:e.expression.set.operations_extended,compile:function(t,n,i){var o,r=t;for(o=n.pop();n.length>0&&o.type!=e.expression.type.parameter.start;)i.push(o),o=n.pop();for(var a=[];t.type!==e.expression.type.parameter.start;)a.unshift(t),t=i.pop();a.unshift(t);t=i[i.length-1],void 0===t||t.type!==e.expression.type._function&&t.type!==e.expression.type.filter&&t.type!==e.expression.type.test&&t.type!==e.expression.type.key.brackets&&t.type!==e.expression.type.key.period?(r.expression=!0,a.pop(),a.shift(),r.params=a,i.push(r)):(r.expression=!1,t.params=a)},parse:function(t,n,i){var o=[],r=!1,a=null;if(t.expression)a=e.expression.parse.apply(this,[t.params,i]),n.push(a);else{for(;n.length>0;){if(a=n.pop(),a&&a.type&&a.type==e.expression.type.parameter.start){r=!0;break}o.unshift(a)}if(!r)throw new e.Error("Expected end of parameter set.");n.push(o)}}},{type:e.expression.type.array.start,regex:/^\[/,next:e.expression.set.expressions.concat([e.expression.type.array.end]),compile:e.expression.fn.compile.push_both,parse:e.expression.fn.parse.push},{type:e.expression.type.array.end,regex:/^\]/,next:e.expression.set.operations_extended,compile:function(t,n,i){for(var o,r=n.length-1;r>=0&&(o=n.pop(),o.type!==e.expression.type.array.start);r--)i.push(o);i.push(t)},parse:function(t,n,i){for(var o=[],r=!1,a=null;n.length>0;){if(a=n.pop(),a.type&&a.type==e.expression.type.array.start){r=!0;break}o.unshift(a)}if(!r)throw new e.Error("Expected end of array.");n.push(o)}},{type:e.expression.type.object.start,regex:/^\{/,next:e.expression.set.expressions.concat([e.expression.type.object.end]),compile:e.expression.fn.compile.push_both,parse:e.expression.fn.parse.push},{type:e.expression.type.object.end,regex:/^\}/,next:e.expression.set.operations_extended,compile:function(t,n,i){for(var o,r=n.length-1;r>=0&&(o=n.pop(),!o||o.type!==e.expression.type.object.start);r--)i.push(o);i.push(t)},parse:function(t,n,i){for(var o={},r=!1,a=null,s=!1,l=null;n.length>0;){if(a=n.pop(),a&&a.type&&a.type===e.expression.type.object.start){r=!0;break}if(a&&a.type&&(a.type===e.expression.type.operator.binary||a.type===e.expression.type.operator.unary)&&a.key){if(!s)throw new e.Error("Missing value for key '"+a.key+"' in object definition.");o[a.key]=l,void 0===o._keys&&(o._keys=[]),o._keys.unshift(a.key),l=null,s=!1}else s=!0,l=a}if(!r)throw new e.Error("Unexpected end of object.");n.push(o)}},{type:e.expression.type.filter,regex:/^\|\s?([a-zA-Z_][a-zA-Z0-9_\-]*)/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:function(e,t,n){e.value=e.match[1],n.push(e)},parse:function(t,n,i){var o=n.pop(),r=t.params&&e.expression.parse.apply(this,[t.params,i]);n.push(e.filter.apply(this,[t.value,o,r]))}},{type:e.expression.type._function,regex:/^([a-zA-Z_][a-zA-Z0-9_]*)\s*\(/,next:e.expression.type.parameter.start,transform:function(e,t){return"("},compile:function(e,t,n){var i=e.match[1];e.fn=i,delete e.match,delete e.value,n.push(e)},parse:function(t,n,i){var o,r=t.params&&e.expression.parse.apply(this,[t.params,i]),a=t.fn;if(e.functions[a])o=e.functions[a].apply(this,r);else{if("function"!=typeof i[a])throw new e.Error(a+" function does not exist and is not defined in the context");o=i[a].apply(i,r)}n.push(o)}},{type:e.expression.type.variable,regex:/^[a-zA-Z_][a-zA-Z0-9_]*/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:e.expression.fn.compile.push,validate:function(t,n){return e.indexOf(e.expression.reservedWords,t[0])<0},parse:function(t,n,i){var o=e.expression.resolve(i[t.value],i);n.push(o)}},{type:e.expression.type.key.period,regex:/^\.([a-zA-Z0-9_]+)/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:function(e,t,n){e.key=e.match[1],delete e.match,delete e.value,n.push(e)},parse:function(t,n,i){var o,r=t.params&&e.expression.parse.apply(this,[t.params,i]),a=t.key,s=n.pop();if(null===s||void 0===s){if(this.options.strict_variables)throw new e.Error("Can't access a key "+a+" on an null or undefined object.");return null}var l=function(e){return e.substr(0,1).toUpperCase()+e.substr(1)};o="object"==typeof s&&a in s?s[a]:void 0!==s["get"+l(a)]?s["get"+l(a)]:void 0!==s["is"+l(a)]?s["is"+l(a)]:void 0,n.push(e.expression.resolve(o,s,r))}},{type:e.expression.type.key.brackets,regex:/^\[([^\]]*)\]/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:function(t,n,i){var o=t.match[1];delete t.value,delete t.match,t.stack=e.expression.compile({value:o}).stack,i.push(t)},parse:function(t,n,i){var o,r=t.params&&e.expression.parse.apply(this,[t.params,i]),a=e.expression.parse.apply(this,[t.stack,i]),s=n.pop();if(null===s||void 0===s){if(this.options.strict_variables)throw new e.Error("Can't access a key "+a+" on an null or undefined object.");return null}o="object"==typeof s&&a in s?s[a]:null,n.push(e.expression.resolve(o,s,r))}},{type:e.expression.type._null,regex:/^(null|NULL|none|NONE)/,next:e.expression.set.operations,compile:function(e,t,n){delete e.match,e.value=null,n.push(e)},parse:e.expression.fn.parse.push_value},{type:e.expression.type.context,regex:/^_context/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:e.expression.fn.compile.push,parse:function(e,t,n){t.push(n)}},{type:e.expression.type.number,regex:/^\-?\d+(\.\d+)?/,next:e.expression.set.operations,compile:function(e,t,n){e.value=Number(e.value),n.push(e)},parse:e.expression.fn.parse.push_value},{type:e.expression.type.bool,regex:/^(true|TRUE|false|FALSE)/,next:e.expression.set.operations,compile:function(e,t,n){e.value="true"===e.match[0].toLowerCase(),delete e.match,n.push(e)},parse:e.expression.fn.parse.push_value}],e.expression.resolve=function(e,t,n){return"function"==typeof e?e.apply(t,n||[]):e},e.expression.handler={},e.expression.extendType=function(t){e.expression.type[t]="Twig.expression.type."+t},e.expression.extend=function(t){if(!t.type)throw new e.Error("Unable to extend logic definition. No type provided for "+t);e.expression.handler[t.type]=t};for(;e.expression.definitions.length>0;)e.expression.extend(e.expression.definitions.shift());return e.expression.tokenize=function(t){var n,i,o,r,a,s,l=[],c=0,p=null,u=[];for(s=function(){var t=Array.prototype.slice.apply(arguments);t.pop(),t.pop();return e.log.trace("Twig.expression.tokenize","Matched a ",n," regular expression of ",t),p&&e.indexOf(p,n)<0?(u.push(n+" cannot follow a "+l[l.length-1].type+" at template:"+c+" near '"+t[0].substring(0,20)+"...'"),t[0]):e.expression.handler[n].validate&&!e.expression.handler[n].validate(t,l)?t[0]:(u=[],l.push({type:n,value:t[0],match:t}),a=!0,p=r,c+=t[0].length,e.expression.handler[n].transform?e.expression.handler[n].transform(t,l):"")},e.log.debug("Twig.expression.tokenize","Tokenizing expression ",t);t.length>0;){t=t.trim();for(n in e.expression.handler)if(e.expression.handler.hasOwnProperty(n)){for(r=e.expression.handler[n].next,i=e.expression.handler[n].regex,o=i instanceof Array?i:[i],a=!1;o.length>0;)i=o.pop(),t=t.replace(i,s);if(a)break}if(!a)throw u.length>0?new e.Error(u.join(" OR ")):new e.Error("Unable to parse '"+t+"' at template position"+c)}return e.log.trace("Twig.expression.tokenize","Tokenized to ",l),l},e.expression.compile=function(t){var n=t.value,i=e.expression.tokenize(n),o=null,r=[],a=[],s=null;for(e.log.trace("Twig.expression.compile: ","Compiling ",n);i.length>0;)o=i.shift(),s=e.expression.handler[o.type],e.log.trace("Twig.expression.compile: ","Compiling ",o),s.compile&&s.compile(o,a,r),e.log.trace("Twig.expression.compile: ","Stack is",a),e.log.trace("Twig.expression.compile: ","Output is",r);for(;a.length>0;)r.push(a.pop());return e.log.trace("Twig.expression.compile: ","Final output is",r),t.stack=r,delete t.value,t},e.expression.parse=function(t,n){var i=this;t instanceof Array||(t=[t]);var o=[],r=null;return e.forEach(t,function(t){r=e.expression.handler[t.type],r.parse&&r.parse.apply(i,[t,o,n])}),o.pop()},e}(r||{}),r=function(e){"use strict";e.expression.operator={leftToRight:"leftToRight",rightToLeft:"rightToLeft"};var t=function(e,t){if(void 0===t||null===t)return null;if(void 0!==t.indexOf)return e===t||""!==e&&t.indexOf(e)>-1;var n;for(n in t)if(t.hasOwnProperty(n)&&t[n]===e)return!0;return!1};return e.expression.operator.lookup=function(t,n){switch(t){case"..":case"not in":case"in":n.precidence=20,n.associativity=e.expression.operator.leftToRight;break;case",":n.precidence=18,n.associativity=e.expression.operator.leftToRight;break;case"?":case":":n.precidence=16,n.associativity=e.expression.operator.rightToLeft;break;case"or":n.precidence=14,n.associativity=e.expression.operator.leftToRight;break;case"and":n.precidence=13,n.associativity=e.expression.operator.leftToRight;break;case"==":case"!=":n.precidence=9,n.associativity=e.expression.operator.leftToRight;break;case"<":case"<=":case">":case">=":n.precidence=8,n.associativity=e.expression.operator.leftToRight;break;case"~":case"+":case"-":n.precidence=6,n.associativity=e.expression.operator.leftToRight;break;case"//":case"**":case"*":case"/":case"%":n.precidence=5,n.associativity=e.expression.operator.leftToRight;break;case"not":n.precidence=3,n.associativity=e.expression.operator.rightToLeft;break;default:throw new e.Error(t+" is an unknown operator.")}return n.operator=t,n},e.expression.operator.parse=function(n,i){e.log.trace("Twig.expression.operator.parse: ","Handling ",n);var o,r,a;switch(n){case":":break;case"?":a=i.pop(),r=i.pop(),o=i.pop(),o?i.push(r):i.push(a);break;case"+":r=parseFloat(i.pop()),o=parseFloat(i.pop()),i.push(o+r);break;case"-":r=parseFloat(i.pop()),o=parseFloat(i.pop()),i.push(o-r);break;case"*":r=parseFloat(i.pop()),o=parseFloat(i.pop()),i.push(o*r);break;case"/":r=parseFloat(i.pop()),o=parseFloat(i.pop()),i.push(o/r);break;case"//":r=parseFloat(i.pop()),o=parseFloat(i.pop()),i.push(parseInt(o/r));break;case"%":r=parseFloat(i.pop()),o=parseFloat(i.pop()),i.push(o%r);break;case"~":r=i.pop(),o=i.pop(),i.push((null!=o?o.toString():"")+(null!=r?r.toString():""));break;case"not":case"!":i.push(!i.pop());break;case"<":r=i.pop(),o=i.pop(),i.push(o<r);break;case"<=":r=i.pop(),o=i.pop(),i.push(o<=r);break;case">":r=i.pop(),o=i.pop(),i.push(o>r);break;case">=":r=i.pop(),o=i.pop(),i.push(o>=r);break;case"===":r=i.pop(),o=i.pop(),i.push(o===r);break;case"==":r=i.pop(),o=i.pop(),i.push(o==r);break;case"!==":r=i.pop(),o=i.pop(),i.push(o!==r);break;case"!=":r=i.pop(),o=i.pop(),i.push(o!=r);break;case"or":r=i.pop(),o=i.pop(),i.push(o||r);break;case"and":r=i.pop(),o=i.pop(),i.push(o&&r);break;case"**":r=i.pop(),o=i.pop(),i.push(Math.pow(o,r));break;case"not in":r=i.pop(),o=i.pop(),i.push(!t(o,r));break;case"in":r=i.pop(),o=i.pop(),i.push(t(o,r));break;case"..":r=i.pop(),o=i.pop(),i.push(e.functions.range(o,r));break;default:throw new e.Error(n+" is an unknown operator.")}},e}(r||{}),r=function(e){function t(e,t){var n=Object.prototype.toString.call(t).slice(8,-1);return void 0!==t&&null!==t&&n===e}return e.filters={upper:function(e){return"string"!=typeof e?e:e.toUpperCase()},lower:function(e){return"string"!=typeof e?e:e.toLowerCase()},capitalize:function(e){return"string"!=typeof e?e:e.substr(0,1).toUpperCase()+e.toLowerCase().substr(1)},title:function(e){return"string"!=typeof e?e:e.toLowerCase().replace(/(^|\s)([a-z])/g,function(e,t,n){return t+n.toUpperCase()})},length:function(t){return e.lib.is("Array",t)||"string"==typeof t?t.length:e.lib.is("Object",t)?void 0===t._keys?Object.keys(t).length:t._keys.length:0},reverse:function(e){if(t("Array",e))return e.reverse();if(t("String",e))return e.split("").reverse().join("");if(t("Object",e)){var n=e._keys||Object.keys(e).reverse();return e._keys=n,e}},sort:function(e){if(t("Array",e))return e.sort();if(t("Object",e)){delete e._keys;var n=Object.keys(e),i=n.sort(function(t,n){var i;return e[t]>e[n]==!(e[t]<=e[n])?e[t]>e[n]?1:e[t]<e[n]?-1:0:isNaN(i=parseFloat(e[t]))||isNaN(b1=parseFloat(e[n]))?"string"==typeof e[t]?e[t]>e[n].toString()?1:e[t]<e[n].toString()?-1:0:"string"==typeof e[n]?e[t].toString()>e[n]?1:e[t].toString()<e[n]?-1:0:null:i>b1?1:i<b1?-1:0});return e._keys=i,e}},keys:function(t){if(void 0!==t&&null!==t){var n=t._keys||Object.keys(t),i=[];return e.forEach(n,function(e){"_keys"!==e&&t.hasOwnProperty(e)&&i.push(e)}),i}},url_encode:function(e){if(void 0!==e&&null!==e){var t=encodeURIComponent(e);return t=t.replace("'","%27")}},join:function(n,i){if(void 0!==n&&null!==n){var o="",r=[],a=null;return i&&i[0]&&(o=i[0]),t("Array",n)?r=n:(a=n._keys||Object.keys(n),e.forEach(a,function(e){"_keys"!==e&&n.hasOwnProperty(e)&&r.push(n[e])})),r.join(o)}},default:function(t,n){if(void 0!==n&&n.length>1)throw new e.Error("default filter expects one argument");return void 0===t||null===t||""===t?void 0===n?"":n[0]:t},json_encode:function(n){if(void 0===n||null===n)return"null";if("object"==typeof n&&t("Array",n))return o=[],e.forEach(n,function(t){o.push(e.filters.json_encode(t))}),"["+o.join(",")+"]";if("object"==typeof n){var i=n._keys||Object.keys(n),o=[];return e.forEach(i,function(t){o.push(JSON.stringify(t)+":"+e.filters.json_encode(n[t]))}),"{"+o.join(",")+"}"}return JSON.stringify(n)},merge:function(n,i){var o=[],r=0,a=[];if(t("Array",n)?e.forEach(i,function(e){t("Array",e)||(o={})}):o={},t("Array",o)||(o._keys=[]),t("Array",n)?e.forEach(n,function(e){o._keys&&o._keys.push(r),o[r]=e,r++}):(a=n._keys||Object.keys(n),e.forEach(a,function(e){o[e]=n[e],o._keys.push(e);var t=parseInt(e,10);!isNaN(t)&&t>=r&&(r=t+1)})),e.forEach(i,function(n){t("Array",n)?e.forEach(n,function(e){o._keys&&o._keys.push(r),o[r]=e,r++}):(a=n._keys||Object.keys(n),e.forEach(a,function(e){o[e]||o._keys.push(e),o[e]=n[e];var t=parseInt(e,10);!isNaN(t)&&t>=r&&(r=t+1)}))}),0===i.length)throw new e.Error("Filter merge expects at least one parameter");return o},date:function(t,n){var i=e.functions.date(t),o=n&&n.length?n[0]:"F j, Y H:i";return e.lib.formatDate(i,o)},date_modify:function(t,n){if(void 0!==t&&null!==t){if(void 0===n||1!==n.length)throw new e.Error("date_modify filter expects 1 argument");var i,o=n[0];return e.lib.is("Date",t)&&(i=e.lib.strtotime(o,t.getTime()/1e3)),e.lib.is("String",t)&&(i=e.lib.strtotime(o,e.lib.strtotime(t))),e.lib.is("Number",t)&&(i=e.lib.strtotime(o,t)),new Date(1e3*i)}},replace:function(t,n){if(void 0!==t&&null!==t){var i,o=n[0];for(i in o)o.hasOwnProperty(i)&&"_keys"!==i&&(t=e.lib.replaceAll(t,i,o[i]));return t}},format:function(t,n){if(void 0!==t&&null!==t)return e.lib.vsprintf(t,n)},striptags:function(t){if(void 0!==t&&null!==t)return e.lib.strip_tags(t)},escape:function(t,n){if(void 0!==t&&null!==t){var i="html";if(n&&n.length&&n[0]!==!0&&(i=n[0]),"html"==i){var o=t.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");return e.Markup(o,"html")}if("js"==i){for(var o=t.toString(),r="",a=0;a<o.length;a++)if(o[a].match(/^[a-zA-Z0-9,\._]$/))r+=o[a];else{var s=o.charCodeAt(a);r+=s<128?"\\x"+s.toString(16).toUpperCase():e.lib.sprintf("\\u%04s",s.toString(16).toUpperCase())}return e.Markup(r,"js")}if("css"==i){for(var o=t.toString(),r="",a=0;a<o.length;a++)if(o[a].match(/^[a-zA-Z0-9]$/))r+=o[a];else{var s=o.charCodeAt(a);r+="\\"+s.toString(16).toUpperCase()+" "}return e.Markup(r,"css")}if("url"==i){var r=e.filters.url_encode(t);return e.Markup(r,"url")}if("html_attr"==i){for(var o=t.toString(),r="",a=0;a<o.length;a++)if(o[a].match(/^[a-zA-Z0-9,\.\-_]$/))r+=o[a];else if(o[a].match(/^[&<>"]$/))r+=o[a].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");else{var s=o.charCodeAt(a);r+=s<=31&&9!=s&&10!=s&&13!=s?"&#xFFFD;":s<128?e.lib.sprintf("&#x%02s;",s.toString(16).toUpperCase()):e.lib.sprintf("&#x%04s;",s.toString(16).toUpperCase())}return e.Markup(r,"html_attr")}throw new e.Error("escape strategy unsupported")}},e:function(t,n){return e.filters.escape(t,n)},nl2br:function(t){if(void 0!==t&&null!==t){var n="BACKSLASH_n_replace",i="<br />"+n;return t=e.filters.escape(t).replace(/\r\n/g,i).replace(/\r/g,i).replace(/\n/g,i),t=e.lib.replaceAll(t,n,"\n"),e.Markup(t)}},number_format:function(e,t){var n=e,i=t&&t[0]?t[0]:void 0,o=t&&void 0!==t[1]?t[1]:".",r=t&&void 0!==t[2]?t[2]:",";n=(n+"").replace(/[^0-9+\-Ee.]/g,"");var a=isFinite(+n)?+n:0,s=isFinite(+i)?Math.abs(i):0,l="",c=function(e,t){var n=Math.pow(10,t);return""+Math.round(e*n)/n};return l=(s?c(a,s):""+Math.round(a)).split("."),l[0].length>3&&(l[0]=l[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,r)),(l[1]||"").length<s&&(l[1]=l[1]||"",l[1]+=new Array(s-l[1].length+1).join("0")),l.join(o)},trim:function(t,n){if(void 0!==t&&null!==t){var i,o=e.filters.escape(""+t);i=n&&n[0]?""+n[0]:" \n\r\t\f\v            ​\u2028\u2029　";for(var r=0;r<o.length;r++)if(i.indexOf(o.charAt(r))===-1){o=o.substring(r);break}for(r=o.length-1;r>=0;r--)if(i.indexOf(o.charAt(r))===-1){o=o.substring(0,r+1);break}return i.indexOf(o.charAt(0))===-1?o:""}},truncate:function(e,t){var n=30,i=!1,o="...";if(e+="",t&&(t[0]&&(n=t[0]),t[1]&&(i=t[1]),t[2]&&(o=t[2])),e.length>n){if(i&&(n=e.indexOf(" ",n),n===-1))return e;e=e.substr(0,n)+o}return e},slice:function(t,n){if(void 0!==t&&null!==t){if(void 0===n||n.length<1)throw new e.Error("slice filter expects at least 1 argument");var i=n[0]||0,o=n.length>1?n[1]:t.length,r=i>=0?i:Math.max(t.length+i,0);if(e.lib.is("Array",t)){for(var a=[],s=r;s<r+o&&s<t.length;s++)a.push(t[s]);return a}if(e.lib.is("String",t))return t.substr(r,o);throw new e.Error("slice filter expects value to be an array or string")}},abs:function(e){if(void 0!==e&&null!==e)return Math.abs(e)},first:function(e){if(t("Array",e))return e[0];if(t("Object",e)){if("_keys"in e)return e[e._keys[0]]}else if("string"==typeof e)return e.substr(0,1)},split:function(t,n){if(void 0!==t&&null!==t){if(void 0===n||n.length<1||n.length>2)throw new e.Error("split filter expects 1 or 2 argument");if(e.lib.is("String",t)){var i=n[0],o=n[1],r=t.split(i);if(void 0===o)return r;if(o<0)return t.split(i,r.length+o);var a=[];if(""==i)for(;r.length>0;){for(var s="",l=0;l<o&&r.length>0;l++)s+=r.shift();a.push(s)}else{for(var l=0;l<o-1&&r.length>0;l++)a.push(r.shift());r.length>0&&a.push(r.join(i))}return a}throw new e.Error("split filter expects value to be a string")}},last:function(t){if(e.lib.is("Object",t)){var n;return n=void 0===t._keys?Object.keys(t):t._keys,t[n[n.length-1]]}return t[t.length-1]},raw:function(t){return e.Markup(t)},batch:function(t,n){var i,o,r,a=n.shift(),s=n.shift();if(!e.lib.is("Array",t))throw new e.Error("batch filter expects items to be an array");if(!e.lib.is("Number",a))throw new e.Error("batch filter expects size to be a number");if(a=Math.ceil(a),i=e.lib.chunkArray(t,a),s&&t.length%a!=0){for(o=i.pop(),r=a-o.length;r--;)o.push(s);i.push(o)}return i},round:function(t,n){n=n||[];var i=n.length>0?n[0]:0,o=n.length>1?n[1]:"common";if(t=parseFloat(t),i&&!e.lib.is("Number",i))throw new e.Error("round filter expects precision to be a number");if("common"===o)return e.lib.round(t,i);if(!e.lib.is("Function",Math[o]))throw new e.Error("round filter expects method to be 'floor', 'ceil', or 'common'");return Math[o](t*Math.pow(10,i))/Math.pow(10,i)}},e.filter=function(t,n,i){if(!e.filters[t])throw"Unable to find filter "+t;return e.filters[t].apply(this,[n,i])},e.filter.extend=function(t,n){e.filters[t]=n},e}(r||{}),r=function(t){var n='Template "{name}" is not defined.';return t.functions={range:function(e,t,n){var i,o,r,a=[],s=n||1,l=!1;if(isNaN(e)||isNaN(t)?isNaN(e)&&isNaN(t)?(l=!0,i=e.charCodeAt(0),o=t.charCodeAt(0)):(i=isNaN(e)?0:e,o=isNaN(t)?0:t):(i=parseInt(e,10),o=parseInt(t,10)),r=!(i>o))for(;i<=o;)a.push(l?String.fromCharCode(i):i),i+=s;else for(;i>=o;)a.push(l?String.fromCharCode(i):i),i-=s;return a},cycle:function(e,t){var n=t%e.length;return e[n]},dump:function(){var e="\n",n="  ",i=0,o="",r=Array.prototype.slice.call(arguments),a=function(e){
for(var t="";e>0;)e--,t+=n;return t},s=function(t){o+=a(i),"object"==typeof t?l(t):"function"==typeof t?o+="function()"+e:"string"==typeof t?o+="string("+t.length+') "'+t+'"'+e:"number"==typeof t?o+="number("+t+")"+e:"boolean"==typeof t&&(o+="bool("+t+")"+e)},l=function(t){var n;if(null===t)o+="NULL"+e;else if(void 0===t)o+="undefined"+e;else if("object"==typeof t){o+=a(i)+typeof t,i++,o+="("+function(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n}(t)+") {"+e;for(n in t)o+=a(i)+"["+n+"]=> "+e,s(t[n]);i--,o+=a(i)+"}"+e}else s(t)};return 0==r.length&&r.push(this.context),t.forEach(r,function(e){l(e)}),o},date:function(e,n){var i;if(void 0===e)i=new Date;else if(t.lib.is("Date",e))i=e;else if(t.lib.is("String",e))i=e.match(/^[0-9]+$/)?new Date(1e3*e):new Date(1e3*t.lib.strtotime(e));else{if(!t.lib.is("Number",e))throw new t.Error("Unable to parse date "+e);i=new Date(1e3*e)}return i},block:function(e){return this.originalBlockTokens[e]?t.logic.parse.apply(this,[this.originalBlockTokens[e],this.context]).output:this.blocks[e]},parent:function(){return t.placeholders.parent},attribute:function(e,n,i){return t.lib.is("Object",e)&&e.hasOwnProperty(n)?"function"==typeof e[n]?e[n].apply(void 0,i):e[n]:e[n]||void 0},max:function(e){return t.lib.is("Object",e)?(delete e._keys,t.lib.max(e)):t.lib.max.apply(null,arguments)},min:function(e){return t.lib.is("Object",e)?(delete e._keys,t.lib.min(e)):t.lib.min.apply(null,arguments)},template_from_string:function(e){return void 0===e&&(e=""),t.Templates.parsers.twig({options:this.options,data:e})},random:function(e){function n(e){var t=Math.floor(Math.random()*i),n=[0,e],o=Math.min.apply(null,n),r=Math.max.apply(null,n);return o+Math.floor((r-o+1)*t/i)}var i=2147483648;if(t.lib.is("Number",e))return n(e);if(t.lib.is("String",e))return e.charAt(n(e.length-1));if(t.lib.is("Array",e))return e[n(e.length-1)];if(t.lib.is("Object",e)){var o=Object.keys(e);return e[o[n(o.length-1)]]}return n(i-1)},source:function(i,r){var a,s,l,c=!1,p="undefined"!=typeof o&&"undefined"!=typeof o.exports&&"undefined"==typeof window;p?(s="fs",l=e+"/"+i):(s="ajax",l=i);var u={id:i,path:l,method:s,parser:"source",async:!1,fetchTemplateSource:!0};"undefined"==typeof r&&(r=!1);try{a=t.Templates.loadRemote(i,u),"undefined"==typeof a||null===a?a="":c=!0}catch(e){t.log.debug("Twig.functions.source: ","Problem loading template  ",e)}return c||r?a:n.replace("{name}",i)}},t._function=function(e,n,i){if(!t.functions[e])throw"Unable to find function "+e;return t.functions[e](n,i)},t._function.extend=function(e,n){t.functions[e]=n},t}(r||{}),r=function(e){"use strict";return e.path={},e.path.parsePath=function(t,n){var i=null,n=n||"";if("object"==typeof t&&"object"==typeof t.options&&(i=t.options.namespaces),"object"==typeof i&&n.indexOf("::")>0||n.indexOf("@")>=0){for(var o in i)i.hasOwnProperty(o)&&(n=n.replace(o+"::",i[o]),n=n.replace("@"+o,i[o]));return n}return e.path.relativePath(t,n)},e.path.relativePath=function(t,i){var o,r,a,s="/",l=[],i=i||"";if(t.url)o="undefined"!=typeof t.base?t.base+("/"===t.base.charAt(t.base.length-1)?"":"/"):t.url;else if(t.path){var c=n(30),p=c.sep||s,u=new RegExp("^\\.{1,2}"+p.replace("\\","\\\\"));i=i.replace(/\//g,p),void 0!==t.base&&null==i.match(u)?(i=i.replace(t.base,""),o=t.base+p):o=c.normalize(t.path),o=o.replace(p+p,p),s=p}else{if(!t.name&&!t.id||!t.method||"fs"===t.method||"ajax"===t.method)throw new e.Error("Cannot extend an inline template.");o=t.base||t.name||t.id}for(r=o.split(s),r.pop(),r=r.concat(i.split(s));r.length>0;)a=r.shift(),"."==a||(".."==a&&l.length>0&&".."!=l[l.length-1]?l.pop():l.push(a));return l.join(s)},e}(r||{}),r=function(e){"use strict";return e.tests={empty:function(e){if(null===e||void 0===e)return!0;if("number"==typeof e)return!1;if(e.length&&e.length>0)return!1;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},odd:function(e){return e%2===1},even:function(e){return e%2===0},divisibleby:function(e,t){return e%t[0]===0},defined:function(e){return void 0!==e},none:function(e){return null===e},null:function(e){return this.none(e)},sameas:function(e,t){return e===t[0]},iterable:function(t){return t&&(e.lib.is("Array",t)||e.lib.is("Object",t))}},e.test=function(t,n,i){if(!e.tests[t])throw"Test "+t+" is not defined.";return e.tests[t](n,i)},e.test.extend=function(t,n){e.tests[t]=n},e}(r||{}),r=function(e){"use strict";return e.exports={VERSION:e.VERSION},e.exports.twig=function(t){var n=t.id,i={strict_variables:t.strict_variables||!1,autoescape:null!=t.autoescape&&t.autoescape||!1,allowInlineIncludes:t.allowInlineIncludes||!1,rethrow:t.rethrow||!1,namespaces:t.namespaces};if(e.cache&&n&&e.validateId(n),void 0!==t.debug&&(e.debug=t.debug),void 0!==t.trace&&(e.trace=t.trace),void 0!==t.data)return e.Templates.parsers.twig({data:t.data,path:t.hasOwnProperty("path")?t.path:void 0,module:t.module,id:n,options:i});if(void 0!==t.ref){if(void 0!==t.id)throw new e.Error("Both ref and id cannot be set on a twig.js template.");return e.Templates.load(t.ref)}if(void 0!==t.method){if(!e.Templates.isRegisteredLoader(t.method))throw new e.Error('Loader for "'+t.method+'" is not defined.');return e.Templates.loadRemote(t.name||t.href||t.path||n||void 0,{id:n,method:t.method,parser:t.parser||"twig",base:t.base,module:t.module,precompiled:t.precompiled,async:t.async,options:i},t.load,t.error)}return void 0!==t.href?e.Templates.loadRemote(t.href,{id:n,method:"ajax",parser:t.parser||"twig",base:t.base,module:t.module,precompiled:t.precompiled,async:t.async,options:i},t.load,t.error):void 0!==t.path?e.Templates.loadRemote(t.path,{id:n,method:"fs",parser:t.parser||"twig",base:t.base,module:t.module,precompiled:t.precompiled,async:t.async,options:i},t.load,t.error):void 0},e.exports.extendFilter=function(t,n){e.filter.extend(t,n)},e.exports.extendFunction=function(t,n){e._function.extend(t,n)},e.exports.extendTest=function(t,n){e.test.extend(t,n)},e.exports.extendTag=function(t){e.logic.extend(t)},e.exports.extend=function(t){t(e)},e.exports.compile=function(t,n){var i,o=n.filename,r=n.filename;return i=new e.Template({data:t,path:r,id:o,options:n.settings["twig options"]}),function(e){return i.render(e)}},e.exports.renderFile=function(t,n,i){"function"==typeof n&&(i=n,n={}),n=n||{};var o=n.settings||{},r={path:t,base:o.views,load:function(e){i(null,e.render(n))}},a=o["twig options"];if(a)for(var s in a)a.hasOwnProperty(s)&&(r[s]=a[s]);e.exports.twig(r)},e.exports.__express=e.exports.renderFile,e.exports.cache=function(t){e.cache=t},e.exports.path=e.path,e}(r||{}),r=function(e){return e.compiler={module:{}},e.compiler.compile=function(t,n){var i,o=JSON.stringify(t.tokens),r=t.id;if(n.module){if(void 0===e.compiler.module[n.module])throw new e.Error("Unable to find module type "+n.module);i=e.compiler.module[n.module](r,o,n.twig)}else i=e.compiler.wrap(r,o);return i},e.compiler.module={amd:function(t,n,i){return'define(["'+i+'"], function (Twig) {\n\tvar twig, templates;\ntwig = Twig.twig;\ntemplates = '+e.compiler.wrap(t,n)+"\n\treturn templates;\n});"},node:function(t,n){return'var twig = require("twig").twig;\nexports.template = '+e.compiler.wrap(t,n)},cjs2:function(t,n,i){return'module.declare([{ twig: "'+i+'" }], function (require, exports, module) {\n\tvar twig = require("twig").twig;\n\texports.template = '+e.compiler.wrap(t,n)+"\n});"}},e.compiler.wrap=function(e,t){return'twig({id:"'+e.replace('"','\\"')+'", data:'+t+", precompiled: true});\n"},e}(r||{});"undefined"!=typeof o&&o.declare?o.declare([],function(e,t,n){for(key in r.exports)r.exports.hasOwnProperty(key)&&(t[key]=r.exports[key])}):(i=function(){return r.exports}.call(t,n,t,o),!(void 0!==i&&(o.exports=i)))}).call(t,"/",n(28)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){},function(e,t,n){(function(e){function n(e,t){for(var n=0,i=e.length-1;i>=0;i--){var o=e[i];"."===o?e.splice(i,1):".."===o?(e.splice(i,1),n++):n&&(e.splice(i,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function i(e,t){if(e.filter)return e.filter(t);for(var n=[],i=0;i<e.length;i++)t(e[i],i,e)&&n.push(e[i]);return n}var o=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,r=function(e){return o.exec(e).slice(1)};t.resolve=function(){for(var t="",o=!1,r=arguments.length-1;r>=-1&&!o;r--){var a=r>=0?arguments[r]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,o="/"===a.charAt(0))}return t=n(i(t.split("/"),function(e){return!!e}),!o).join("/"),(o?"/":"")+t||"."},t.normalize=function(e){var o=t.isAbsolute(e),r="/"===a(e,-1);return e=n(i(e.split("/"),function(e){return!!e}),!o).join("/"),e||o||(e="."),e&&r&&(e+="/"),(o?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(i(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,n){function i(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var o=i(e.split("/")),r=i(n.split("/")),a=Math.min(o.length,r.length),s=a,l=0;l<a;l++)if(o[l]!==r[l]){s=l;break}for(var c=[],l=s;l<o.length;l++)c.push("..");return c=c.concat(r.slice(s)),c.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=r(e),n=t[0],i=t[1];return n||i?(i&&(i=i.substr(0,i.length-1)),n+i):"."},t.basename=function(e,t){var n=r(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){return r(e)[3]};var a="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(t,n(31))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(p===setTimeout)return setTimeout(e,0);if((p===n||!p)&&setTimeout)return p=setTimeout,setTimeout(e,0);try{return p(e,0)}catch(t){try{return p.call(null,e,0)}catch(t){return p.call(this,e,0)}}}function r(e){if(u===clearTimeout)return clearTimeout(e);if((u===i||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{return u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}function a(){g&&h&&(g=!1,h.length?f=h.concat(f):b=-1,f.length&&s())}function s(){if(!g){var e=o(a);g=!0;for(var t=f.length;t;){for(h=f,f=[];++b<t;)h&&h[b].run();b=-1,t=f.length}h=null,g=!1,r(e)}}function l(e,t){this.fun=e,this.array=t}function c(){}var p,u,d=e.exports={};!function(){try{p="function"==typeof setTimeout?setTimeout:n}catch(e){p=n}try{u="function"==typeof clearTimeout?clearTimeout:i}catch(e){u=i}}();var h,f=[],g=!1,b=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new l(e,t)),1!==f.length||g||o(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){var i=n(33);"string"==typeof i&&(i=[[e.id,i,""]]);n(17)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){t=e.exports=n(16)(),t.push([e.id,'.neo-input.is-static .ni_block .block-checkbox,.neo-input.is-static .ni_block .block-reorder,.neo-input.is-static .ni_block .block-settings,.neo-input.is-static .ni_buttons{display:none}.neo-input.is-static .ni_block:last-child{margin-bottom:0}.neo-input.is-translatable .field>.heading .locale{display:none}.ni_buttons{position:relative;height:30px}.ni_buttons>.btngroup,.ni_buttons>.menubtn{position:absolute;top:0}body.ltr .ni_buttons>.btngroup,body.ltr .ni_buttons>.menubtn{left:0}body.rtl .ni_buttons>.btngroup,body.rtl .ni_buttons>.menubtn{right:0}.ni_blocks>.ni_buttons,.ni_spinner{margin-bottom:10px}.ni_spinner{text-align:center}.ni_block{box-sizing:border-box;width:100%;margin-bottom:10px;border-radius:4px;border:1px solid #e3e5e8;background-color:#f3f7fc;padding:0}.ni_block:focus{outline:0}.ni_block_topbar{position:relative;height:30px;line-height:30px;color:#8f98a3;transition:background-color .5s;padding:0 14px}.ni_block_topbar_left,.ni_block_topbar_right{display:flex;position:absolute;top:0;bottom:0}body.ltr .ni_block_topbar_left{left:14px}body.rtl .ni_block_topbar_left{right:14px}.ni_block_topbar_right{min-width:100px}body.ltr .ni_block_topbar_right{right:14px}body.rtl .ni_block_topbar_right{left:14px}.ni_block_topbar_item{cursor:default;padding:0 8px;-webkit-user-select:none;-moz-user-select:none;user-select:none;white-space:nowrap}.ni_block_topbar_item:first-child,body.ltr .ni_block_topbar_item:not(:first-child),body.rtl .ni_block_topbar_item:not(:last-child){padding-left:0}.ni_block_topbar_item:last-child{padding-right:0}.ni_block_topbar_item.size-full{flex-grow:1}.ni_block_topbar_item.clip-text{overflow:hidden;text-overflow:ellipsis}.ni_block_topbar_item.title .blocktype{padding:8px 0}.ni_block_topbar_item.title .blocktype.has-errors{color:#da5a47}.ni_block_topbar_item.title .preview{pointer-events:none;position:absolute;width:calc(100% - 80px);height:30px;overflow:hidden;color:#b9bfc6;transition:opacity .2s}body.ltr .ni_block_topbar_item.title .preview{margin-left:8px}body.rtl .ni_block_topbar_item.title .preview{margin-right:8px}.ni_block_topbar_item.title .preview:empty{display:none}.ni_block_topbar_item.title .preview_section{display:inline-block;padding:0 8px;height:30px;line-height:30px}body.ltr .ni_block_topbar_item.title .preview_section{border-left:1px solid #e3e5e8}body.rtl .ni_block_topbar_item.title .preview_section{border-right:1px solid #e3e5e8}.ni_block_topbar_item.title .preview_color,.ni_block_topbar_item.title .preview img{vertical-align:top;margin-top:15px;transform:translateY(-50%)}.ni_block_topbar_item.title .preview img{max-width:30px;max-height:30px}.ni_block_topbar_item.title .preview_color{display:inline-block;width:16px;height:16px;border-radius:50%}body.ltr .ni_block_topbar_item.title .preview .status{margin-right:6px}body.rtl .ni_block_topbar_item.title .preview .status{margin-left:6px}.ni_block_topbar_item.tabs{position:relative;transition:opacity .2s}.ni_block_topbar_item.tabs .tabs_inner{white-space:nowrap}body.ltr .ni_block_topbar_item.tabs .tabs_inner{right:0;direction:ltr}body.rtl .ni_block_topbar_item.tabs .tabs_inner{left:0;direction:rtl}.ni_block_topbar_item.tabs .tabs_btn{position:absolute;top:0;display:inline-flex;cursor:pointer;height:30px;padding:0 9px;border:1px solid #e3e5e8;border-top:0;border-bottom-color:#fbfcfd;margin-bottom:-1px;background-color:#fbfcfd;color:#576575}body.ltr .ni_block_topbar_item.tabs .tabs_btn{right:8px}body.rtl .ni_block_topbar_item.tabs .tabs_btn{left:8px}.ni_block_topbar_item.tabs .tabs_btn.has-errors{color:#da5a47}.ni_block_topbar_item.tabs .tab{display:inline-block;height:30px;padding:0 10px;border-bottom-color:#fafafa;color:rgba(41,50,61,.5)}.ni_block_topbar_item.tabs .tab:hover{color:#0d78f2}.ni_block_topbar_item.tabs .tab.is-selected{cursor:default;padding:0 9px;border-left:1px solid #e3e5e8;border-right:1px solid #e3e5e8;border-bottom-width:1px;border-bottom-style:solid;margin-bottom:-1px;background-color:#fbfcfd;color:#576575}.ni_block_topbar_item.tabs .tab.is-selected.is-blank{border-bottom-color:#f1f5f8;background-color:transparent;transition:border-bottom-color .5s}.ni_block_topbar_item.tabs .tab.has-errors{color:#da5a47}.ni_block_topbar_item.block-settings .settings{padding:0 8px;height:20px}.ni_block_topbar_item.block-settings .settings:not(:hover):not(:active){background-color:transparent}.ni_block_topbar_item.block-settings .settings:before{margin-right:0!important}.ni_block_topbar_item.block-settings .menu{line-height:20px}.ni_block_topbar_item .invisible{visibility:hidden;pointer-events:none}.ni_block_topbar_item>.checkbox{position:relative;display:block;height:100%;color:#29323d}.ni_block_topbar_item>.checkbox:before{position:absolute;top:50%;margin-top:-8px}.ni_block_topbar_item>.checkbox:after{display:none}.ni_block_topbar_item>.status{margin:10px 5px 0 0}.ni_block_topbar_item>a{color:rgba(41,50,61,.25)}.ni_block_topbar_item>a:hover{color:#0d78f2}.ni_block_body{padding:0 14px 14px}.ni_block_content{border-top:1px solid #e3e5e8}.ni_block_content:empty{display:none}.ni_block_content_tab{padding:14px 0 0}.ni_block_content_tab.is-blank{padding:0;border-top:0}#content .ni_block_content_tab:not(.is-selected),.element-editor .ni_block_content_tab:not(.is-selected),.lp-editor .ni_block_content_tab:not(.is-selected){display:none}.ni_block_content_tab>.field{margin:15px 0 0}.ni_block_content_tab.flex-fields>.field:before{display:none}.ni_block_content_tab.flex-fields>.field>.status-badge{left:-15px}.ni_block_children{padding:14px 0 7px;border-top:1px solid #e3e5e8;transition:background-color .5s}.ni_block_body>.ni_block_children:not(:first-child){margin-top:14px}.ni_block_collapsed-children{overflow:hidden}.ni_block_collapsed-children_child{height:2px;border-top:1px solid #e3e5e8;background-color:#fbfcfd;margin-top:-3px;transition:margin-top .2s}.ni_block.is-level-odd{background-color:#fbfcfd}.ni_block.is-level-odd>.ni_block_topbar>.ni_block_topbar_right>.ni_block_topbar_item.tabs .tab.is-blank{border-bottom-color:#fff}.ni_block.is-expanded>.ni_block_topbar .title>.preview{opacity:0}.ni_block.is-collapsed{padding-bottom:0}.ni_block.is-collapsed>.ni_block_topbar .ni_block_topbar_left{overflow:hidden}.ni_block.is-collapsed>.ni_block_topbar .ni_block_topbar_left:before{content:"";pointer-events:none;position:absolute;top:0;bottom:0;left:0;right:0;z-index:1}body.ltr .ni_block.is-collapsed>.ni_block_topbar .ni_block_topbar_left:before{background-image:linear-gradient(-90deg,#f3f7fc,rgba(243,247,252,0) 40px,rgba(243,247,252,0))}body.rtl .ni_block.is-collapsed>.ni_block_topbar .ni_block_topbar_left:before{background-image:linear-gradient(90deg,#f3f7fc,rgba(243,247,252,0) 40px,rgba(243,247,252,0))}body.ltr .ni_block.is-collapsed>.ni_block_topbar .ni_block_topbar_left{right:80px}body.rtl .ni_block.is-collapsed>.ni_block_topbar .ni_block_topbar_left{left:80px}.ni_block.is-collapsed>.ni_block_topbar .ni_block_topbar_right{pointer-events:none}.ni_block.is-collapsed>.ni_block_topbar .ni_block_topbar_right>.tabs{opacity:0}.ni_block.is-collapsed>.ni_block_topbar .ni_block_topbar_right>:not(.tabs){pointer-events:auto}.ni_block.is-collapsed>.ni_block_collapsed-children .ni_block_collapsed-children_child{margin-top:0}.ni_block.is-disabled .ni_block_topbar_item.title .preview{opacity:0}.ni_block.is-disabled .ni_block_content_tab .field{pointer-events:none;opacity:.5;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ni_block.is-empty{padding:6px 0}.ni_block.is-empty.is-level-odd{background-color:#fff}.neo_block_tabs-menu a.is-selected{cursor:default;pointer-events:none;opacity:.25}.neo_block_tabs-menu a.has-errors{color:#da5a47}.neo-matrixblock,.ni_block .matrixblock{border-color:#ccc;background-color:#fff;box-shadow:0 1px 5px -1px rgba(0,0,0,.1)}.neo-matrixblock>.titlebar,.ni_block .matrixblock>.titlebar{border-bottom-color:#eee;background-color:#fbfcfd}',""])}]);