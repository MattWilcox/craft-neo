!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(18),a=i(o),l="undefined"!=typeof window?window:void 0,r=[];l.Neo={Input:a.default,inputs:r,createInput:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=new a.default(t);return r.push(e),e}}},,function(t,e){t.exports=jQuery},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(2),a=i(o);a.default.fn.insertAt=function(t,e){return this.each(function(){0===t?e.prepend(this):e.children().eq(t-1).after(this)})}},function(t,e){t.exports=Garnish},function(t,e){t.exports=Craft},function(t,e){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default={_stack:[[]],enter:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("string"==typeof t&&(t=this.fromFieldName(t)),e){var i=this.getNamespace();i.push.apply(i,n(t)),t=i}this._stack.push(t)},enterByFieldName:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.enter(this.fromFieldName(t),e)},leave:function(){return this._stack.length>1?this._stack.pop():this.getNamespace()},getNamespace:function(){return Array.from(this._stack[this._stack.length-1])},parse:function(t){return"string"==typeof t?t.indexOf("[")>-1?this.fromFieldName(t):t.indexOf("-")>-1?t.split("-"):t.indexOf(".")>-1?t.split("."):t:Array.from(t)},value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n=this.getNamespace();return n.push(t),n.join(e)},fieldName:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=this.toFieldName();return e?e+t.replace(/([^'"[\]]+)([^'"]*)/,"[$1]$2"):t},toString:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"-";return this.getNamespace().join(t)},toFieldName:function(){var t=this.getNamespace();switch(t.length){case 0:return"";case 1:return t[0]}return t[0]+"["+t.slice(1).join("][")+"]"},fromFieldName:function(t){return t.match(/[^[\]\s]+/g)||[]}}},,,,,,,,,,function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},o=0;o<this.length;o++){var a=this[o][0];"number"==typeof a&&(i[a]=!0)}for(o=0;o<e.length;o++){var l=e[o];"number"==typeof l[0]&&i[l[0]]||(n&&!l[2]?l[2]=n:n&&(l[2]="("+l[2]+") and ("+n+")"),t.push(l))}},t}},function(t,e,n){function i(t,e){for(var n=0;n<t.length;n++){var i=t[n],o=f[i.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](i.parts[a]);for(;a<i.parts.length;a++)o.parts.push(d(i.parts[a],e))}else{for(var l=[],a=0;a<i.parts.length;a++)l.push(d(i.parts[a],e));f[i.id]={id:i.id,refs:1,parts:l}}}}function o(t){for(var e=[],n={},i=0;i<t.length;i++){var o=t[i],a=o[0],l=o[1],r=o[2],s=o[3],d={css:l,media:r,sourceMap:s};n[a]?n[a].parts.push(d):e.push(n[a]={id:a,parts:[d]})}return e}function a(t,e){var n=g(),i=k[k.length-1];if("top"===t.insertAt)i?i.nextSibling?n.insertBefore(e,i.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),k.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function l(t){t.parentNode.removeChild(t);var e=k.indexOf(t);e>=0&&k.splice(e,1)}function r(t){var e=document.createElement("style");return e.type="text/css",a(t,e),e}function s(t){var e=document.createElement("link");return e.rel="stylesheet",a(t,e),e}function d(t,e){var n,i,o;if(e.singleton){var a=v++;n=_||(_=r(e)),i=c.bind(null,n,a,!1),o=c.bind(null,n,a,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=s(e),i=h.bind(null,n),o=function(){l(n),n.href&&URL.revokeObjectURL(n.href)}):(n=r(e),i=u.bind(null,n),o=function(){l(n)});return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else o()}}function c(t,e,n,i){var o=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=m(e,o);else{var a=document.createTextNode(o),l=t.childNodes;l[e]&&t.removeChild(l[e]),l.length?t.insertBefore(a,l[e]):t.appendChild(a)}}function u(t,e){var n=e.css,i=e.media;if(i&&t.setAttribute("media",i),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function h(t,e){var n=e.css,i=e.sourceMap;i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var o=new Blob([n],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(o),a&&URL.revokeObjectURL(a)}var f={},p=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},b=p(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),g=p(function(){return document.head||document.getElementsByTagName("head")[0]}),_=null,v=0,k=[];t.exports=function(t,e){e=e||{},"undefined"==typeof e.singleton&&(e.singleton=b()),"undefined"==typeof e.insertAt&&(e.insertAt="bottom");var n=o(t);return i(n,e),function(t){for(var a=[],l=0;l<n.length;l++){var r=n[l],s=f[r.id];s.refs--,a.push(s)}if(t){var d=o(t);i(d,e)}for(var l=0;l<a.length;l++){var s=a[l];if(0===s.refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete f[s.id]}}}};var m=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(2),l=i(a);n(3);var r=n(4),s=i(r),d=n(5),c=i(d),u=n(6),h=i(u),f=n(19),p=i(f),b=n(20),g=i(b),_=n(22),v=i(_),k=n(23),m=i(k),y=n(25),B=i(y);n(26);var x={name:null,namespace:[],blockTypes:[],groups:[],blocks:[],inputId:null,maxBlocks:0,maxTopBlocks:0,maxLevels:0};e.default=s.default.Base.extend({_templateNs:[],_name:null,_locale:null,init:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Object.assign({},x,e),this._templateNs=h.default.parse(e.namespace),this._blockTypes=[],this._groups=e.groups.map(function(t){return new v.default(t)}),this._blocks=[],this._name=e.name,this._maxBlocks=e.maxBlocks,this._maxTopBlocks=e.maxTopBlocks,this._maxLevels=e.maxLevels,this._ownerId=null;var n=(0,l.default)('[name="setId"], [name="entryId"], [name="categoryId"]');n.length&&(this._ownerId=n.val()),this.$container=(0,l.default)("#"+e.inputId);var i={};this._groups.forEach(function(t){i[t.getId()]=!0});var a={},r=!0,d=!1,c=void 0;try{for(var u,f=e.blockTypes[Symbol.iterator]();!(r=(u=f.next()).done);r=!0){var b=u.value;if(null===b.groupId||"undefined"!=typeof i[b.groupId]){var _=new g.default(b);this._blockTypes.push(_),a[_.getHandle()]=_}}}catch(t){d=!0,c=t}finally{try{!r&&f.return&&f.return()}finally{if(d)throw c}}var k=this.$container.closest("form");this._locale=k.find('input[name="siteId"]').val();var y=this.$container.find("[data-neo]");this.$blocksContainer=y.filter('[data-neo="container.blocks"]'),this.$buttonsContainer=y.filter('[data-neo="container.buttons"]'),this._buttons=new B.default({blockTypes:this.getBlockTypes(!0),groups:this.getGroups(),maxBlocks:this.getMaxBlocks(),maxTopBlocks:this.getMaxTopBlocks()}),this.$buttonsContainer.append(this._buttons.$container),this._buttons.on("newBlock",function(e){return t["@newBlock"](e)}),this._buttons.initUi(),this._blockSort=new p.default({container:this.$blocksContainer,handle:'[data-neo-b$=".button.move"]',maxTopBlocks:this.getMaxTopBlocks(),filter:function(){return t._blockSort.$targetItem.hasClass("is-selected")?t._blockSelect.getSelectedItems():t._blockSort.$targetItem},collapseDraggees:!0,magnetStrength:4,helperLagBase:1.5,helperOpacity:.9,onDragStop:function(){t._updateBlockOrder(),t._updateButtons()}}),this._blockSelect=new s.default.Select(this.$blocksContainer,null,{multi:!0,vertical:!0,handle:'[data-neo-b$=".select"]',checkboxMode:!0,selectedClass:"is-selected sel"}),this.$blocksContainer.find(".ni_block").each(function(e,n){var i=(0,l.default)(n),r={};r.id=i.attr("data-neo-b-id"),r.sortOrder=e,r.collapsed=i.hasClass("is-collapsed"),r.enabled=!!i.find('[data-neo-b="'+r.id+'.input.enabled"]').val(),r.level=parseInt(i.find('[data-neo-b="'+r.id+'.input.level"]').val()),r.field=t,r.namespace=[].concat(o(t._templateNs),[r.id]);var s=i.find('[data-neo-b="'+r.id+'.input.type"]').val(),d=a[s];r.blockType=new g.default({id:d.getId(),fieldLayoutId:d.getFieldLayoutId(),fieldTypes:d.getFieldTypes(),name:d.getName(),handle:d.getHandle(),maxBlocks:d.getMaxBlocks(),maxSiblingBlocks:d.getMaxSiblingBlocks(),maxChildBlocks:d.getMaxChildBlocks(),childBlocks:d.getChildBlocks(),topLevel:d.getTopLevel()}),r.buttons=new B.default({items:d.getChildBlockItems(t.getItems()),maxBlocks:t.getMaxBlocks()}),r.showButtons=!t.atMaxLevels(r.level);var c=new m.default(r);c.initUi(!1),t._setBlockEvents(c),t._blocks.push(c),t._blockSort.addBlock(c),t._blockSelect.addItems(c.$container)}),this._updateBlockOrder(),this._updateBlockChildren(),this._updateButtons(),this.addListener(this.$container,"resize",function(){return t.updateResponsiveness()});var C="function"==typeof k.data("serializer")?k.data("serializer")():k.serialize();k.data("initialSerializedValue",C),this._setMatrixClassErrors(),this._setBlockTypeClassErrors(),this._blocks.filter(function(t){return!t.isExpanded()}).forEach(function(t){return t.updatePreview()}),this.trigger("afterInit")},updateResponsiveness:function(){var t=!0,e=!1,n=void 0;try{for(var i,o=this._blocks[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;a.updateResponsiveness();var l=a.getButtons();l&&l.updateResponsiveness()}}catch(t){e=!0,n=t}finally{try{!t&&o.return&&o.return()}finally{if(e)throw n}}this._buttons.updateResponsiveness(),this._tempButtons&&this._tempButtons.updateResponsiveness()},addBlock:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=this._blocks.length;e=e>=0?Math.max(0,Math.min(e,o)):o,i="boolean"!=typeof i||i;var a=e>0&&this._blocks[e-1],l=e<o&&this._blocks[e];if(a){var r=l?l.getLevel():0,d=a.getLevel()+(a.getBlockType().isParent()?1:0);n=Math.max(r,Math.min(n,d));var c=this._findPrevBlockOnLevel(e,n);c?c.$container.after(t.$container):a.$blocksContainer.prepend(t.$container)}else this.$blocksContainer.prepend(t.$container);t.setLevel(n),this._blocks.push(t),this._blockSort.addBlock(t),this._blockSelect.addItems(t.$container),t.initUi(),this._setBlockEvents(t),this._destroyTempButtons(),this._updateBlockOrder(),this._updateBlockChildren(),this._updateButtons(),i&&t.$container.css({opacity:0,marginBottom:-t.$container.outerHeight()}).velocity({opacity:1,marginBottom:10},"fast",function(e){return s.default.requestAnimationFrame(function(){return s.default.scrollContainerToElement(t.$container)})}),this.trigger("addBlock",{block:t,index:e})},removeBlock:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;window.draftEditor&&window.draftEditor.pause(),n="boolean"!=typeof n||n,i="boolean"==typeof i&&i;var o=this._findChildBlocks(this._blocks.indexOf(t)),a=!0,l=!1,r=void 0;try{for(var s,d=o[Symbol.iterator]();!(a=(s=d.next()).done);a=!0){var c=s.value;this.removeBlock(c,!0,!0)}}catch(t){l=!0,r=t}finally{try{!a&&d.return&&d.return()}finally{if(l)throw r}}t.off(".input"),this._blocks=this._blocks.filter(function(e){return e!==t}),this._blockSort.removeItems(t.$container),this._blockSelect.removeItems(t.$container),this._destroyTempButtons(),this._updateButtons();var u=function(){t.$container.remove(),e._updateBlockChildren(),window.draftEditor&&window.draftEditor.resume()};n?t.$container.css({opacity:1,marginBottom:10}).velocity({opacity:0,marginBottom:i?10:-t.$container.outerHeight()},"fast",function(t){return u()}):u(),t.destroy(),this.trigger("removeBlock",{block:t})},_setBlockEvents:function(t){var e=this;t.on("removeBlock.input",function(n){e.getSelectedBlocks().length>1?window.confirm(c.default.t("neo","Are you sure you want to delete the selected blocks?"))&&e._blockBatch(t,function(t){return e.removeBlock(t)}):e.removeBlock(t)}),t.on("toggleEnabled.input",function(n){return e._blockBatch(t,function(t){return t.toggleEnabled(n.enabled)})}),t.on("toggleExpansion.input",function(n){return e._blockBatch(t,function(t){return t.toggleExpansion(n.expanded)})}),t.on("moveUpBlock.input",function(n){return e._moveBlock(t,"up")}),t.on("moveDownBlock.input",function(n){return e._moveBlock(t,"down")}),t.on("newBlock.input",function(n){return e["@newBlock"](Object.assign(n,{index:e._getNextBlockIndex(t)}))}),t.on("addBlockAbove.input",function(t){return e["@addBlockAbove"](t)}),t.on("copyBlock.input",function(t){return e["@copyBlock"](t)}),t.on("pasteBlock.input",function(t){return e["@pasteBlock"](t)}),t.on("duplicateBlock.input",function(t){return e["@duplicateBlock"](t)})},_moveBlock:function(t,e){var n=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(["up","down"].includes(e)){window.draftEditor&&window.draftEditor.pause();var o=t.getSiblings(this.getBlocks()),a=o.indexOf(t),l=a>0&&"up"===e,r=a<o.length-1&&"down"===e;if(a!==-1&&l!==r){var d="boolean"!=typeof i||i,c=t.$container,u=function(){c.detach(),l?o[a-1].$container.before(c):o[a+1].$container.after(c)},h=function(){n._updateBlockOrder(),n._updateButtons(),window.draftEditor&&window.draftEditor.resume()};d?c.css({opacity:1,marginBottom:10}).velocity({opacity:0,marginBottom:-c.outerHeight()},"fast",function(t){u(),c.css({opacity:0,marginBottom:-c.outerHeight()}).velocity({opacity:1,marginBottom:10},"fast",function(t){h(),s.default.requestAnimationFrame(function(){return s.default.scrollContainerToElement(c)})})}):(u(),h())}}},getBlockByElement:function(t){return this._blocks.find(function(e){return e.$container.is(t)})},getBlocks:function(){return Array.from(this._blocks)},getBlockTypeById:function(t){return this._blockTypes.find(function(e){return e.getId()===t})},getBlockTypeByHandle:function(t){return this._blockTypes.find(function(e){return e.getHandle()===t})},getBlockTypes:function(t){return t="boolean"==typeof t&&t,t?this._blockTypes.filter(function(t){return t.getTopLevel()}):Array.from(this._blockTypes)},getGroups:function(){return Array.from(this._groups)},getItems:function(){return[].concat(o(this.getBlockTypes()),o(this.getGroups())).sort(function(t,e){return t.getSortOrder()-e.getSortOrder()})},getMaxBlocks:function(){return this._maxBlocks},getMaxTopBlocks:function(){return this._maxTopBlocks},getMaxLevels:function(){return this._maxLevels},atMaxLevels:function(t){return this._maxLevels>0&&t+1>=this._maxLevels},getSelectedBlocks:function(){var t=this._blockSelect.getSelectedItems();return this._blocks.filter(function(e){return e.$container.closest(t).length>0})},_setMatrixClassErrors:function(){var t=(0,l.default)(".ni_block_body .matrix-field .input.errors");t.length&&t.each(function(){var t=(0,l.default)(this),e=t.closest(".ni_block_content_tab"),n=e.data("neo-b-info"),i=t.closest(".ni_block"),o=i.find('.tabs .tab[data-neo-b-info="'+n+'"]');o.length&&o.addClass("has-errors")})},_setBlockTypeClassErrors:function(){var t=(0,l.default)(".ni_block .tab.has-errors");t.length&&t.each(function(){var e=t.parents(".ni_block.is-collapsed");e.each(function(){var t=(0,l.default)(this);t.find("> .ni_block_topbar .title .blocktype").addClass("has-errors")})})},_updateBlockOrder:function(){var t=this,e=[];this.$blocksContainer.find(".ni_block").each(function(n,i){var o=t.getBlockByElement(i);e.push(o)}),this._blocks=e},_updateBlockChildren:function(){var t=!0,e=!1,n=void 0;try{for(var i,o=this._blocks[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){for(var a=i.value,l=a.$blocksContainer.children(".ni_block"),r=Math.min(l.length,8),s=[],d=0;d<r;d++)s.push('<div class="ni_block_collapsed-children_child"></div>');a.$collapsedChildrenContainer.html(s.join(""))}}catch(t){e=!0,n=t}finally{try{!t&&o.return&&o.return()}finally{if(e)throw n}}},_checkMaxChildren:function(t){if(!t)return!0;var e=t.getBlockType(),n=e.getMaxChildBlocks();if(n>0){var i=this._findChildBlocks(t);return i.length<n}return!0},_updateButtons:function(){var t=this,e=this.getBlocks();this._buttons.updateButtonStates(e),this._tempButtons&&this._tempButtons.updateButtonStates(e,this._checkMaxChildren(this._tempButtonsBlock));var n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var r=a.value,s=this._findParentBlock(r),d=s?s.getBlockType():null,c=r.getButtons(),u=r.getLevel(),h=d?d.getChildBlocks():this.getBlockTypes(!0);h===!0||"*"===h?h=this.getBlockTypes(!1):Array.isArray(h)&&(h=h.map(function(e){return"string"==typeof e?t.getBlockTypeByHandle(e):e})),r.updateMenuStates(this._name,e,this.getMaxBlocks(),this._checkMaxChildren(s),h,0===u?this.getMaxTopBlocks():0),c&&c.updateButtonStates(e,this._checkMaxChildren(r),r),r.toggleShowButtons(!this.atMaxLevels(u))}}catch(t){i=!0,o=t}finally{try{!n&&l.return&&l.return()}finally{if(i)throw o}}},_blockBatch:function(t,e){var n=t.isSelected()?this.getSelectedBlocks():[t],i=!0,o=!1,a=void 0;try{for(var l,r=n[Symbol.iterator]();!(i=(l=r.next()).done);i=!0){var s=l.value;e(s)}}catch(t){o=!0,a=t}finally{try{!i&&r.return&&r.return()}finally{if(o)throw a}}},_destroyTempButtons:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(t="boolean"!=typeof t||t,this._tempButtons){var e=this._tempButtons;e.off("newBlock"),t?e.$container.css({opacity:1,marginBottom:10}).velocity({opacity:0,marginBottom:-e.$container.outerHeight()},"fast",function(t){return e.$container.remove()}):e.$container.remove(),this._tempButtons=null,this._tempButtonsBlock=null}},_findPrevBlockOnLevel:function(t,e){t instanceof m.default&&(t=this._blocks.indexOf(t));for(var n=this._blocks,i=n[--t],o=Number.MAX_VALUE;i;){var a=i.getLevel();if(a<o){if(a===e)return i;o=a}i=this._blocks[--t]}return!1},_findChildBlocks:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t instanceof m.default&&(t=this._blocks.indexOf(t)),e="boolean"==typeof e&&e;var n=this._blocks[t];return n?n.getChildren(this._blocks,e):[]},_findParentBlock:function(t){t instanceof m.default&&(t=this._blocks.indexOf(t));var e=this._blocks,n=e[t];if(n){var i=n.getLevel();if(i>0){for(var o=t,a=n;a&&a.getLevel()>=i;)a=e[--o];return a}}return null},_getNextBlockIndex:function(t){t instanceof m.default&&(t=this._blocks.indexOf(t));var e=this._findChildBlocks(t,!0),n=e[e.length-1];return(n?this._blocks.indexOf(n):t)+1},_duplicate:function(t,e){var n=this;window.draftEditor&&window.draftEditor.pause();var i=(0,l.default)('<div class="ni_spinner"><div class="spinner"></div></div>');e.$container.after(i);var a=!1,r=function(){};i.css({opacity:0,marginBottom:-i.outerHeight()}).velocity({opacity:1,marginBottom:10},"fast",function(){a=!0,r()}),c.default.postActionRequest("neo/input/render-blocks",t,function(t){if(t.success&&t.blocks.length>0){var l=[],d=!0,c=!1,u=void 0;try{for(var h,f=t.blocks[Symbol.iterator]();!(d=(h=f.next()).done);d=!0){var p=h.value,b=m.default.getNewId(),_=n.getBlockTypeById(p.type),v=new g.default({id:_.getId(),fieldLayoutId:_.getFieldLayoutId(),fieldTypes:_.getFieldTypes(),name:_.getName(),handle:_.getHandle(),maxBlocks:_.getMaxBlocks(),maxSiblingBlocks:_.getMaxSiblingBlocks(),maxChildBlocks:_.getMaxChildBlocks(),childBlocks:_.getChildBlocks(),topLevel:_.getTopLevel(),tabs:p.tabs}),k=new B.default({items:v.getChildBlockItems(n.getItems()),maxBlocks:n.getMaxBlocks()}),y=new m.default({namespace:[].concat(o(n._templateNs),[b]),field:n,blockType:v,id:b,level:0|p.level,buttons:k,enabled:!!p.enabled,collapsed:!!p.collapsed,showButtons:!n.atMaxLevels(0|p.level),renderOldChildBlocksContainer:!v.hasChildBlocksUiElement()},!0);l.push(y)}}catch(t){c=!0,u=t}finally{try{!d&&f.return&&f.return()}finally{if(c)throw u}}r=function(){var t=n._getNextBlockIndex(e),o=!0,a=!1,r=void 0;try{for(var d,c=l[Symbol.iterator]();!(o=(d=c.next()).done);o=!0){var u=d.value;n.addBlock(u,t++,u.getLevel(),!1)}}catch(t){a=!0,r=t}finally{try{!o&&c.return&&c.return()}finally{if(a)throw r}}var h=l[0];h.$container.css({opacity:0,marginBottom:i.outerHeight()-h.$container.outerHeight()+10}).velocity({opacity:1,marginBottom:10},"fast",function(t){return s.default.requestAnimationFrame(function(){return s.default.scrollContainerToElement(h.$container)})}),i.remove(),window.draftEditor&&window.draftEditor.resume()},a&&r()}})},"@newBlock":function(t){var e=m.default.getNewId(),n=new m.default({namespace:[].concat(o(this._templateNs),[e]),field:this,blockType:t.blockType,id:e,buttons:new B.default({items:t.blockType.getChildBlockItems(this.getItems()),maxBlocks:this.getMaxBlocks()}),showButtons:!this.atMaxLevels(t.level),renderOldChildBlocksContainer:!t.blockType.hasChildBlocksUiElement()},!0);this.addBlock(n,t.index,t.level)},"@addBlockAbove":function(t){var e=this;this._destroyTempButtons();var n=t.block,i=this._blocks.indexOf(n),o=this._findParentBlock(i),a=this.getBlocks(),l=new B.default({blockTypes:o?[]:this.getBlockTypes(!0),blocks:a,groups:o?[]:this.getGroups(),items:o?o.getBlockType().getChildBlockItems(this.getItems()):null,maxBlocks:this.getMaxBlocks()});n.$container.before(l.$container),l.on("newBlock",function(t){return e["@newBlock"]({blockType:t.blockType,index:i,level:n.getLevel()})}),l.initUi(),t.animate!==!1&&l.$container.css({opacity:0,marginBottom:-l.$container.outerHeight()}).velocity({opacity:1,marginBottom:10},"fast",function(t){return s.default.requestAnimationFrame(function(){return s.default.scrollContainerToElement(l.$container)})}),this._tempButtons=l,this._tempButtonsBlock=this._findParentBlock(n),this._tempButtons.updateButtonStates(a,this._checkMaxChildren(this._tempButtonsBlock),this._tempButtonsBlock)},"@copyBlock":function(t){var e=this,n=[],i=0,a=this._ownerId;this._blockBatch(t.block,function(t){var a=i>0&&n[n.length-1].indexOf(t)!==-1;if(!a){var l=[];l.push.apply(l,[t].concat(o(e._findChildBlocks(t,!0)))),n.push(l),i+=l.length}});var l={field:this._name,blocks:[]},r=!0,s=!1,d=void 0;try{for(var u,h=n[Symbol.iterator]();!(r=(u=h.next()).done);r=!0){var f=u.value,p=f[0].getLevel(),b=!0,g=!1,_=void 0;try{for(var v,k=f[Symbol.iterator]();!(b=(v=k.next()).done);b=!0){var m=v.value,y={type:m.getBlockType().getId(),level:m.getLevel()-p,content:m.getContent(),ownerId:a};m.isEnabled()&&(y.enabled=1),m.isExpanded()||(y.collapsed=1),l.blocks.push(y)}}catch(t){g=!0,_=t}finally{try{!b&&k.return&&k.return()}finally{if(g)throw _}}}}catch(t){s=!0,d=t}finally{try{!r&&h.return&&h.return()}finally{if(s)throw d}}window.localStorage.setItem("neo:copy",JSON.stringify(l)),this._updateButtons();var B=1===i?"1 block copied":"{n} blocks copied";c.default.cp.displayNotice(c.default.t("neo",B,{n:i}))},"@pasteBlock":function t(e){var n=e.block,i=n.getLevel(),o=window.localStorage.getItem("neo:copy");if(o){var a=JSON.parse(o),l=a.blocks,r=!0,s=!1,d=void 0;try{for(var c,u=l[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){var t=c.value;t.level+=i}}catch(t){s=!0,d=t}finally{try{!r&&u.return&&u.return()}finally{if(s)throw d}}h.default.enter(this._templateNs);var f={namespace:h.default.toFieldName(),locale:this._locale,blocks:l};h.default.leave(),this._duplicate(f,n)}},"@duplicateBlock":function(t){var e=t.block,n=this._blocks.indexOf(e),i=this._findChildBlocks(n,!0),a=this._ownerId,l=function(t){return{collapsed:0|!t.isExpanded(),content:t.getContent(),enabled:0|t.isEnabled(),level:t.getLevel(),ownerId:a,type:t.getBlockType().getId()}};h.default.enter(this._templateNs);var r={namespace:h.default.toFieldName(),locale:this._locale,blocks:[l(e)].concat(o(i.map(l)))};h.default.leave(),this._duplicate(r,e)}})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=n(2),r=i(l),s=n(4),d=i(s),c=d.default.Drag.extend({$container:null,blocks:null,maxTopBlocks:0,_draggeeBlocks:null,init:function(t,e){"undefined"==typeof e&&r.default.isPlainObject(t)&&(e=t,t=null),e=r.default.extend({},c.defaults,e),e.axis=d.default.Y_AXIS,this.base(t,e),this.$container=e.container,this.blocks=[],this.maxTopBlocks=e.maxTopBlocks},getHelperTargetX:function(){return this.$draggee.offset().left},getHelperTargetY:function(){var t=this.settings.magnetStrength;if(1!==t){var e=this.$draggee.offset().top;return e+(this.mouseY-this.mouseOffsetY-e)/t}return this.base()},getBlockByElement:function(t){return this.blocks.find(function(e){return e.$container.is(t)})},getParentBlock:function(t){var e=t.$container.parent().closest(".ni_block");return e.length>0&&this.getBlockByElement(e)},onDragStart:function(){var t=this;this._draggeeBlocks=[],this.$draggee.each(function(){t._draggeeBlocks.push(t.getBlockByElement(this))}),this.base(),this._calculateMidpoints()},onDrag:function(){var t=this._getClosestMidpoint();t&&this._moveDraggeeToBlock(t.block,t.type,t.direction),this.base()},onDragStop:function(){var t=this;this.$draggee.each(function(){var e=(0,r.default)(this),n=t.getBlockByElement(e),i=e.parent().is(t.$container);if(i)n.setLevel(0);else{var o=t.getParentBlock(n);n.setLevel(o.getLevel()+1)}e.find(".ni_block").each(function(){var e=(0,r.default)(this),n=t.getBlockByElement(e),i=t.getParentBlock(n);n.setLevel(i.getLevel()+1)})}),this.returnHelpersToDraggees(),this.base()},addBlock:function(t){this.blocks.push(t),this.addItems(t.$container)},removeBlock:function(t){this.blocks=this.blocks.filter(function(e){return e!==t}),this.removeItems(t.$container)},_getClosestMidpoint:function(){var t=Number.MAX_VALUE,e=Number.MIN_VALUE,n=null,i=!0,o=!1,a=void 0;try{for(var l,r=this._currentMidpoints[Symbol.iterator]();!(i=(l=r.next()).done);i=!0){var s=l.value;if(s.direction===c.DIRECTION_UP){var d=this.mouseY-this.mouseOffsetY;d<s.position&&s.position<t&&(t=s.position,n=s)}else{var u=this.mouseY-this.mouseOffsetY+this._draggeeBlockHeight;u>s.position&&s.position>e&&(e=s.position,n=s)}}}catch(t){o=!0,a=t}finally{try{!i&&r.return&&r.return()}finally{if(o)throw a}}return n},_calculateMidpoints:function(){var t=10;this._draggeeBlockY=this.$draggee.offset().top,this._draggeeBlockHeight=this.$draggee.height()+t,this._currentMidpoints=[];var e=!0,n=!1,i=void 0;try{for(var o,a=this.blocks[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var l=o.value;if(0===l.$container.closest(this.$draggee).length){var r=this._getBlockMidpoints(l),s=!0,d=!1,u=void 0;try{for(var h,f=Object.keys(r)[Symbol.iterator]();!(s=(h=f.next()).done);s=!0){var p=h.value,b=r[p],g=this._draggeeBlockY>b?c.DIRECTION_UP:c.DIRECTION_DOWN;this._currentMidpoints.push({block:l,position:b,type:p,direction:g})}}catch(t){d=!0,u=t}finally{try{!s&&f.return&&f.return()}finally{if(d)throw u}}}}}catch(t){n=!0,i=t}finally{try{!e&&a.return&&a.return()}finally{if(n)throw i}}var _=this.$container.offset().top+this.$container.height()+t/2;this._currentMidpoints.push({block:null,position:_,type:c.TYPE_END,direction:c.DIRECTION_DOWN})},_getBlockMidpoints:function(t){var e={},n=1,i=10,o=14,a=t.$container.parent().closest(".ni_block.is-collapsed").length>0;if(!a){var l=t.$container.offset().top,r=t.isExpanded(),s=t.$container.height(),d=t.$topbarContainer.height(),u=r?t.$childrenContainer.height():0,h=r&&t.$contentContainer.length>0?t.$childrenContainer.length>0?t.$childrenContainer.offset().top-t.$contentContainer.offset().top:t.$contentContainer.height():0,f=this.getParentBlock(t);if(f&&!this._validateDraggeeChildren(f)||(e[c.TYPE_CONTENT]=l+(d+h)/2),u>0&&t.isExpanded()&&this._validateDraggeeChildren(t)){var p=t.getButtons().$container.height();e[c.TYPE_CHILDREN]=l+s-n-(o+p+i)/2}}return e},_moveDraggeeToBlock:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.TYPE_CONTENT,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.DIRECTION_DOWN,i=t?this.getParentBlock(t):null,o=this._validateDraggeeChildren(i);switch(e){case c.TYPE_CHILDREN:0===this.$draggee.closest(t.$container).length?t.$blocksContainer.append(this.$draggee):o&&t.$container.after(this.$draggee);break;case c.TYPE_END:o&&this.$container.append(this.$draggee);break;default:n===c.DIRECTION_UP?o&&t.$container.before(this.$draggee):t.getBlockType().isParent()&&t.isExpanded()&&this._validateDraggeeChildren(t)?t.$blocksContainer.prepend(this.$draggee):o&&t.$container.after(this.$draggee)}this._updateHelperAppearance(),this._calculateMidpoints()},_validateDraggeeChildren:function(t){var e=this,n=t?t.getField():this._draggeeBlocks[0].getField(),i=n.getMaxLevels();if(i>0){var l=t?t.getLevel():-1,r=this._draggeeBlocks[0].getLevel(),s=function(t){return t.getLevel()-r+l+1>=i},d=function t(e){var i=e.getChildren(n.getBlocks(),!0);return s(e)||i.some(t)};if(this._draggeeBlocks.filter(d).length>0)return!1}if(!t){var c=this,u=this.$container.children(".ni_block:not(.is-disabled)"),h=u.length,f=!0,p=!1,b=void 0;try{for(var g,_=this._draggeeBlocks[Symbol.iterator]();!(f=(g=_.next()).done);f=!0){var v=g.value;if(!v.getBlockType().getTopLevel())return!1}}catch(t){p=!0,b=t}finally{try{!f&&_.return&&_.return()}finally{if(p)throw b}}return u.each(function(){c._draggeeBlocks.includes(c.getBlockByElement(this))&&h--}),!(this.maxTopBlocks>0&&h>=this.maxTopBlocks)}var k=t.getBlockType(),m=k.getMaxChildBlocks(),y=t.$childrenContainer.children(".ni_blocks").children(".ni_block"),B=y.length,x=[],C=this;if(y.each(function(){var t=C.getBlockByElement(this);C._draggeeBlocks.includes(t)?B--:x.push(t)}),m>0&&B>=m)return!1;var w=[],$=!0,T=!1,E=void 0;try{for(var L,M=function(){var t=L.value;if(!k.isValidChildBlock(t))return{v:!1};if(w.includes(t))return"continue";var n=t.getBlockType(),i=n.getMaxSiblingBlocks();if(0===i)return"continue";var a=e._draggeeBlocks.filter(function(t){return t.getBlockType().getHandle()===n.getHandle()}),l=x.filter(function(t){return t.getBlockType().getHandle()===n.getHandle()});return l.length+a.length>i?{v:!1}:void w.push.apply(w,o(a))},S=this._draggeeBlocks[Symbol.iterator]();!($=(L=S.next()).done);$=!0){var O=M();switch(O){case"continue":continue;default:if("object"===("undefined"==typeof O?"undefined":a(O)))return O.v}}}catch(t){T=!0,E=t}finally{try{!$&&S.return&&S.return()}finally{if(T)throw E}}return!0},_updateHelperAppearance:function(){var t=this,e=!0,n=!1,i=void 0;try{for(var o,a=function(){var e=o.value,n=e.data("neo-b-id"),i=t.blocks.find(function(t){return t.$container.data("neo-b-id")===n});e.css({width:i.$container.width()+1,height:i.$container.height()})},l=this.helpers[Symbol.iterator]();!(e=(o=l.next()).done);e=!0)a()}catch(t){n=!0,i=t}finally{try{!e&&l.return&&l.return()}finally{if(n)throw i}}}},{TYPE_CONTENT:"content",TYPE_CHILDREN:"children",TYPE_END:"end",DIRECTION_UP:"up",DIRECTION_DOWN:"down",defaults:{container:null,magnetStrength:1}});e.default=c},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),a=i(o),l=n(21),r=i(l),s={id:-1,fieldLayoutId:-1,fieldTypes:{},sortOrder:0,name:"",handle:"",maxBlocks:0,maxSiblingBlocks:0,maxChildBlocks:0,
childBlocks:!1,topLevel:!0,tabs:[]};e.default=a.default.Base.extend({init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=Object.assign({},s,t),this._id=0|t.id,this._fieldLayoutId=0|t.fieldLayoutId,this._fieldTypes=t.fieldTypes,this._sortOrder=0|t.sortOrder,this._name=t.name,this._handle=t.handle,this._maxBlocks=0|t.maxBlocks,this._maxSiblingBlocks=0|t.maxSiblingBlocks,this._maxChildBlocks=0|t.maxChildBlocks,this._childBlocks=t.childBlocks,this._topLevel=t.topLevel,this._tabs=t.tabs.map(function(t){return t instanceof r.default?t:new r.default(t)})},getType:function(){return"blockType"},getId:function(){return this._id},getFieldLayoutId:function(){return this._fieldLayoutId},getFieldTypes:function(){return this._fieldTypes},getSortOrder:function(){return this._sortOrder},getName:function(){return this._name},getHandle:function(){return this._handle},getMaxBlocks:function(){return this._maxBlocks},getMaxSiblingBlocks:function(){return this._maxSiblingBlocks},getMaxChildBlocks:function(){return this._maxChildBlocks},getChildBlocks:function(){return this._childBlocks},getTopLevel:function(){return this._topLevel},getTabs:function(){return Array.from(this._tabs)},getFieldType:function(t){return this._fieldTypes[t]},getChildBlockItems:function(t){var e=this,n=t.filter(function(t){return"group"===t.getType()||e.hasChildBlock(t.getHandle())});return n.filter(function(t,e){if("group"===t.getType()){var i=n[e+1];return i&&"group"!==i.getType()}return!0})},isParent:function(){var t=this.getChildBlocks();return t===!0||"*"===t||Array.isArray(t)&&t.length>0},hasChildBlock:function(t){var e=this.getChildBlocks();return e===!0||"*"===e||Array.isArray(e)&&e.includes(t)},isValidChildBlock:function(t){return this.hasChildBlock(t.getBlockType().getHandle())},hasChildBlocksUiElement:function(){return this.getTabs().some(function(t){return t.getBodyHtml().match(/data-neo-b="container.children"/)})}})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),a=i(o),l={name:"",bodyHtml:"",footHtml:"",errors:[]};e.default=a.default.Base.extend({init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=Object.assign({},l,t),this._name=t.name,this._bodyHtml=t.bodyHtml||"",this._footHtml=t.footHtml||"",this._errors=t.errors},getErrors:function(){return Array.from(this._errors)},getName:function(){return this._name},getBodyHtml:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this._getHtml(this._bodyHtml,t)},getFootHtml:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this._getHtml(this._footHtml,t)},isBlank:function(){return!this._bodyHtml.trim()},_getHtml:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null!==e?t.replace(/__NEOBLOCK__/g,e):t}})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),a=i(o),l={id:-1,sortOrder:0,name:""};e.default=a.default.Base.extend({init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=Object.assign({},l,t),this._id=0|t.id,this._sortOrder=0|t.sortOrder,this._name=t.name},getType:function(){return"group"},getId:function(){return this._id},getSortOrder:function(){return this._sortOrder},getName:function(){return this._name},isBlank:function(){return!this._name}})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(){var t=this.href||this.src;if(t){var e=t.indexOf("?");t=e<0?t:t.substr(0,e);var n=!Object.prototype.hasOwnProperty.call(_,t);return _[t]=1,n}return!0}function a(t){return t?t.replace(/[&<>"'/]/g,function(t){return v[t]}):""}function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40;return t=t||"",t.length>e?t.slice(0,e-3)+"...":t}Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),s=i(r);n(3);var d=n(4),c=i(d),u=n(5),h=i(u),f=n(6),p=i(f),b=n(24),g={namespace:[],blockType:null,id:null,level:0,buttons:null,enabled:!0,collapsed:!1,modified:!0,showButtons:!0,hasOldChildBlocksContainer:!0},_={},v={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};e.default=c.default.Base.extend({_templateNs:[],_field:null,_blockType:null,_initialised:!1,_expanded:!0,_enabled:!0,_modified:!0,_initialState:null,_forceModified:!1,init:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e=Object.assign({},g,e),this._templateNs=p.default.parse(e.namespace),this._field=e.field,this._blockType=e.blockType,this._id=e.id,this._buttons=e.buttons,this._modified=e.modified,this._showButtons=e.showButtons,this._hasOldChildBlocksContainer=e.hasOldChildBlocksContainer,this.$container=n?this._generateElement():(0,s.default)("[data-neo-b-id="+this._id+"]");var i=this.$container.find("[data-neo-b]");this.$bodyContainer=i.filter('[data-neo-b="'+this._id+'.container.body"]'),this.$contentContainer=i.filter('[data-neo-b="'+this._id+'.container.content"]'),this.$childrenContainer=i.filter('[data-neo-b="'+this._id+'.container.children"]'),this.$childrenWarningsContainer=i.filter('[data-neo-b="'+this._id+'.container.childrenWarnings"]'),this.$collapsedChildrenContainer=i.filter('[data-neo-b="'+this._id+'.container.collapsedChildren"]'),this.$blocksContainer=i.filter('[data-neo-b="'+this._id+'.container.blocks"]'),this.$buttonsContainer=i.filter('[data-neo-b="'+this._id+'.container.buttons"]'),this.$topbarContainer=i.filter('[data-neo-b="'+this._id+'.container.topbar"]'),this.$topbarLeftContainer=i.filter('[data-neo-b="'+this._id+'.container.topbarLeft"]'),this.$topbarRightContainer=i.filter('[data-neo-b="'+this._id+'.container.topbarRight"]'),this.$tabsContainer=i.filter('[data-neo-b="'+this._id+'.container.tabs"]'),this.$tabContainer=i.filter('[data-neo-b="'+this._id+'.container.tab"]'),this.$menuContainer=i.filter('[data-neo-b="'+this._id+'.container.menu"]'),this.$previewContainer=i.filter('[data-neo-b="'+this._id+'.container.preview"]'),this.$tabButton=i.filter('[data-neo-b="'+this._id+'.button.tab"]'),this.$settingsButton=i.filter('[data-neo-b="'+this._id+'.button.actions"]'),this.$togglerButton=i.filter('[data-neo-b="'+this._id+'.button.toggler"]'),this.$tabsButton=i.filter('[data-neo-b="'+this._id+'.button.tabs"]'),this.$enabledInput=i.filter('[data-neo-b="'+this._id+'.input.enabled"]'),this.$levelInput=i.filter('[data-neo-b="'+this._id+'.input.level"]'),this.$status=i.filter('[data-neo-b="'+this._id+'.status"]'),this.$sortOrder=i.filter('[data-neo-b="'+this._id+'.sortOrder"]'),this._buttons&&(this._buttons.on("newBlock",function(e){return t.trigger("newBlock",Object.assign(e,{level:t.getLevel()+1}))}),this.$buttonsContainer.append(this._buttons.$container));var o=!1;if(this._blockType){var a=!0,l=!1,r=void 0;try{for(var d,c=this._blockType.getTabs()[Symbol.iterator]();!(a=(d=c.next()).done);a=!0){var u=d.value,h='[data-neo-b-info="'+u.getName()+'"]';this.$tabContainer.filter(h).find("ul.errors").length>0&&(o=!0,this.$tabButton.filter(h).addClass("error"))}}catch(t){l=!0,r=t}finally{try{!a&&c.return&&c.return()}finally{if(l)throw r}}}this.setLevel(e.level),this.toggleEnabled(e.enabled),this.toggleExpansion(!!o||!e.collapsed,!1,!1),this.toggleShowButtons(this._showButtons),this.addListener(this.$topbarContainer,"dblclick","@doubleClickTitle"),this.addListener(this.$tabButton,"click","@setTab")},_generateElement:function(){p.default.enter(this._templateNs);var t=p.default.toFieldName();p.default.leave();var e=this._blockType,n=e.getTabs(),i=n.length>0,o=e.isParent(),a=e.getName()+" "+h.default.t("neo","Actions"),l="neoblock-action-menu-"+this._id,r=[];if(r.push('\n      <div class="ni_block ni_block--'+e.getHandle()+" is-"+(this._collapsed?"collapsed":"expanded")+" "+(i||o?"":"is-empty")+" "+(o?"is-parent":"")+'" data-neo-b-id="'+this._id+'">\n        <input type="hidden" name="'+t+'[type]" value="'+e.getHandle()+'">\n        <input type="hidden" name="'+t+'[enabled]" value="'+(this._enabled?"1":"0")+'" data-neo-b="'+this._id+'.input.enabled">\n        <input type="hidden" name="'+t+'[level]" value="'+this._level+'" data-neo-b="'+this._id+'.input.level">\n        <input type="hidden" name="'+this._templateNs[0]+"["+this._templateNs[1]+'][sortOrder][]" value="'+this._id+'" data-neo-b="'+this._id+'.input.sortOrder">\n\n        <div class="ni_block_topbar" data-neo-b="'+this._id+'.container.topbar">\n          <div class="ni_block_topbar_left" data-neo-b="'+this._id+'.container.topbarLeft">\n            <div class="ni_block_topbar_item" data-neo-b="'+this._id+'.select">\n              <div class="checkbox block-checkbox" title="'+h.default.t("neo","Select")+' aria-label="'+h.default.t("neo","Select")+'"></div>\n            </div>\n            <div class="ni_block_topbar_item title clip-text">\n              <span class="blocktype" data-neo-b="'+this._id+'.select">'+e.getName()+'</span><span class="preview" data-neo-b="'+this._id+'.container.preview">&nbsp;</span>\n            </div>\n          </div>\n          <div class="ni_block_topbar_right" data-neo-b="'+this._id+'.container.topbarRight">\n            <div class="ni_block_topbar_item size-full tabs">'),(i||o)&&r.push('\n              <div class="tabs_trigger" data-neo-b="'+this._id+'.button.toggler"></div>'),n.length>1){r.push('\n              <div class="tabs_inner" data-neo-b="'+this._id+'.container.tabs">');for(var d=0;d<n.length;d++){var u=n[d].getName();r.push('\n                <a class="tab'+(d?"":"is-selected")+'" data-neo-b="'+this._id+'.button.tab" data-neo-b-info="'+u+'">'+u+"</a>")}r.push('\n              </div>\n              <div class="tabs_btn menubtn" data-neo-b="'+this._id+'.button.tabs">\n                '+n[0].getName()+'\n              </div>\n              <div class="neo_block_tabs-menu menu">\n                <ul>');for(var f=0;f<n.length;f++){var b=n[f].getName();r.push("\n                  <li>\n                    <a"+(f?"":' class="is-selected"')+' data-neo-b="'+this._id+'.button.tab" data-neo-b-info="'+b+'">'+b+"</a>\n                  </li>")}r.push("\n                </ul>\n              </div>")}if(r.push('\n            </div>\n            <div class="ni_block_topbar_item hidden" data-neo-b="'+this._id+'.status">\n              <div class="status off" title="'+h.default.t("neo","Disabled")+'"></div>\n            </div>\n            <div class="ni_block_topbar_item block-settings">\n              <div data-wrapper>\n                <button class="btn settings icon menubtn" type="button" role="button" title="'+h.default.t("neo","Actions")+'" aria-controls="'+l+'" aria-label="'+a+'" data-disclosure-trigger data-neo-b="'+this._id+'.button.actions"></button>\n                <div id="'+l+'" class="menu menu--disclosure" data-neo-b="'+this._id+'.container.menu">\n                  <ul class="padded">'),(i||o)&&r.push('\n                    <li><a data-icon="collapse" data-action="collapse" href="#" type="button" role="button" aria-label="'+h.default.t("neo","Collapse")+'">'+h.default.t("neo","Collapse")+'</a></li>\n                    <li class="hidden"><a data-icon="expand" data-action="expand" href="#" type="button" role="button" aria-label="'+h.default.t("neo","Expand")+'">'+h.default.t("neo","Expand")+"</a></li>"),r.push('\n                    <li><a data-icon="disabled" data-action="disable" href="#" type="button" role="button" aria-label="'+h.default.t("neo","Disable")+'">'+h.default.t("neo","Disable")+'</a></li>\n                    <li class="hidden"><a data-icon="enabled" data-action="enable" href="#" type="button" role="button" aria-label="'+h.default.t("neo","Enable")+'">'+h.default.t("neo","Enable")+'</a></li>\n                    <li class="hidden"><a data-icon="uarr" data-action="moveUp" href="#" type="button" role="button" aria-label="'+h.default.t("neo","Move up")+'">'+h.default.t("neo","Move up")+'</a></li>\n                    <li class="hidden"><a data-icon="darr" data-action="moveDown" href="#" type="button" role="button" aria-label="'+h.default.t("neo","Move down")+'">'+h.default.t("neo","Move down")+'</a></li>\n                  </ul>\n                  <hr>\n                  <ul class="padded">\n                    <li><a data-icon="plus" data-action="add" href="#" type="button" role="button" aria-label="'+h.default.t("neo","Add block above")+'">'+h.default.t("neo","Add block above")+'</a></li>\n                    <li><a data-icon="field" data-action="copy" href="#" type="button" role="button" aria-label="'+h.default.t("neo","Copy")+'">'+h.default.t("neo","Copy")+'</a></li>\n                    <li><a data-icon="brush" data-action="paste" href="#" type="button" role="button" aria-label="'+h.default.t("neo","Paste")+'">'+h.default.t("neo","Paste")+'</a></li>\n                    <li><a data-icon="share" data-action="duplicate" href="#" type="button" role="button" aria-label="'+h.default.t("neo","Clone")+'">'+h.default.t("neo","Clone")+'</a></li>\n                  </ul>\n                  <hr>\n                  <ul class="padded">\n                    <li><a class="error" data-icon="remove" data-action="delete" href="#" type="button" role="button" aria-label="'+h.default.t("neo","Delete")+'">'+h.default.t("neo","Delete")+'</a></li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n            <div class="ni_block_topbar_item block-reorder">\n              <a class="move icon" title="'+h.default.t("neo","Reorder")+'" aria-label="'+h.default.t("neo","Reorder")+'" role="button" data-neo-b="'+this._id+'.button.move"></a>\n            </div>\n          </div>\n        </div>'),i||o){if(r.push('\n        <div class="ni_block_body" data-neo-b="'+this._id+'.container.body">'),i){r.push('\n          <div class="ni_block_content" data-neo-b="'+this._id+'.container.content">');for(var g=0;g<n.length;g++){var _=n[g].getName();r.push('\n            <div class="ni_block_content_tab flex-fields'+(g?"":" is-selected")+'" data-neo-b="'+this._id+'.container.tab" data-neo-b-info="'+_+'">\n              '+n[g].getBodyHtml(this._id)+"\n            </div>"),c.default.$bod.append(n[g].getFootHtml(this._id))}r.push("\n          </div>")}o&&this._hasOldChildBlocksContainer&&r.push('\n          <div class="ni_block_children" data-neo-b="'+this._id+'.container.children">\n            <div class="ni_blocks" data-neo-b="'+this._id+'.container.blocks">\n            </div>\n            <div data-neo-b="'+this._id+'.container.buttons" class="hidden"></div>\n            <div data-neo-b="'+this._id+'.container.childrenWarnings" class="hidden">\n              <p class="first warning with-icon">'+h.default.t("neo","This Neo field's maximum number of levels has been reached, so no child blocks can be added here.")+"</p>\n            </div>\n          </div>"),r.push("\n        </div>")}return o&&r.push('\n        <div class="ni_block_collapsed-children" data-neo-b="'+this._id+'.container.collapsedChildren"></div>'),r.push('\n      <div data-neo="container.buttons"></div>'),(0,s.default)(r.join(""))},initUi:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this._initialised){var n=this._blockType.getTabs(),i=n.map(function(e){return e.getFootHtml(t._id)});if(this.$foot=(0,s.default)(i.join("")).filter(o),c.default.$bod.append(this.$foot),e&&h.default.initUiElements(this.$contentContainer),this.$tabsButton.menubtn(),this._settingsMenu=new c.default.DisclosureMenu(this.$settingsButton),this._settingsMenu.on("show",function(){return t.$container.addClass("active")}),this._settingsMenu.on("hide",function(){return t.$container.removeClass("active")}),this.addListener(this.$menuContainer.find("[data-action]"),"click",this._handleActionClick),this.addListener(this.$menuContainer.find("[data-action]"),"keydown",this._handleActionKeydown),this._initialised=!0,this._buttons&&this._buttons.initUi(),c.default.requestAnimationFrame(function(){return t.updateResponsiveness()}),this.$container.on("mousedown",".matrixblock",function(t){(0,s.default)(this).addClass("neo-matrixblock")}),!this._modified&&!this.isNew()){this._initialState={enabled:this._enabled,level:this._level,content:c.default.getPostData(this.$contentContainer)};var a=function(){return t._detectChange()},l=new window.MutationObserver(function(){return setTimeout(a,200)});if(l.observe(this.$container[0],{attributes:!0,childList:!0,characterData:!0,subtree:!0}),this.$contentContainer.on("propertychange change click","input, textarea, select, div.redactor-in",a),this.$contentContainer.on("paste input keyup",'input:not([type="hidden"]), textarea, div.redactor-in',a),this._detectChangeObserver=l,this.$contentContainer.length>0&&this.$contentContainer.html().match(/\[blocks\]\[new/)){this._forceModified=!0,this.setModified(!0);var r=this._templateNs[0]+"["+this._templateNs[1]+"]";h.default.modifiedDeltaNames.includes(r)||h.default.modifiedDeltaNames.push(r)}}(0,b.addFieldLinks)(this.$contentContainer),this.trigger("initUi")}},destroy:function(){this._initialised&&(this.$foot.remove(),clearInterval(this._detectChangeInterval),this._detectChangeObserver&&this._detectChangeObserver.disconnect(),this.trigger("destroy"))},getBlockType:function(){return this._blockType},getId:function(){return this._id},getLevel:function(){return this._level},setLevel:function(t){this._level=0|t,this.$levelInput.val("0"+this._level),this.$container.toggleClass("is-level-odd",!!(this._level%2)),this.$container.toggleClass("is-level-even",!(this._level%2))},setModified:function(t){this._modified=t},getButtons:function(){return this._buttons},getLocale:function(){if(!this._locale){var t=this.$container.closest("form"),e=t.find('input[name="siteId"]');this._locale=e.val()}return this._locale},getContent:function(){var t=c.default.getPostData(this.$contentContainer),e={},n=function(t,n){for(var i=e,o=0;o<t.length-1;o++){var a=t[o];s.default.isPlainObject(i[a])||s.default.isArray(i[a])||(i[a]={}),i=i[a]}var l=t[t.length-1];i[l]=n},i=!0,o=!1,a=void 0;try{for(var l,r=Object.keys(t)[Symbol.iterator]();!(i=(l=r.next()).done);i=!0){var d=l.value,u=p.default.parse(d),h=u.slice(this._templateNs.length+1);if(h.length){var f=t[d];n(h,f)}}}catch(t){o=!0,a=t}finally{try{!i&&r.return&&r.return()}finally{if(o)throw a}}return e},getParent:function(t){var e=this.getLevel(),n=t.indexOf(this),i=null;if(n>=0&&e>0)for(;null===i&&n>0;){var o=t[--n],a=o.getLevel();a===e-1&&(i=o)}return i},getChildren:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.getLevel(),i=t.indexOf(this),o=[];if(i>=0)for(var a=t[++i];a&&a.getLevel()>n;){var l=a.getLevel();(e?l>n:l===n+1)&&o.push(a),a=t[++i]}return o},getSiblings:function(t){return 0===this._level?t.filter(function(t){return 0===t.getLevel()}):this.getParent(t).getChildren(t)},getField:function(){return this._field},updatePreview:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t="boolean"==typeof t&&t;var e=this.$childrenContainer.find(".field"),n=this.$contentContainer.find(".field").add(e),i=[];n.each(function(){var e=(0,s.default)(this),n=e.children(".input"),o=e.data("type"),r=e.children(".heading").children("label").text();if(null!==o){var d=!1;switch(o){case"craft\\fields\\Assets":var u=[],f=n.find(".element");f.each(function(){var e=(0,s.default)(this),n=e.find(".elementthumb"),i=n.children("img"),o=i.prop("srcset");if(o||(o=n.data("srcset")),u.push('<img sizes="30px" srcset="'+o+'">'),!t&&1===f.length){var r=e.find(".title").text();u.push(a(l(r)))}}),d=u.join(" ");break;case"craft\\fields\\Categories":case"craft\\fields\\Entries":case"craft\\fields\\Tags":case"craft\\fields\\Users":var p=[],b=n.find(".element");b.each(function(){var t=(0,s.default)(this),e=t.find(".title, .label").eq(0).text();p.push(a(l(e)))}),d=p.join(", ");break;case"craft\\fields\\Checkboxes":var g=[],_=n.find('input[type="checkbox"]');_.each(function(){if(this.checked){var t=(0,s.default)(this),e=t.prop("id"),i=n.find('label[for="'+e+'"]'),o=i.text();g.push(a(l(o)))}}),d=g.join(", ");break;case"craft\\fields\\Color":var v=n.find('input[type="color"]').val(),k=n.find('input[type="text"]').val(),m=n.find("div.colorhex").text(),y=null;y=v&&k?"background-color: "+v:!v&&k?"background-color: "+k:m?"background-color: "+m:"background-image: repeating-linear-gradient(-45deg, transparent, transparent 2px, #777 2px, #777 3px)",d='<div class="preview_color" style="'+y+'"></div>';break;case"craft\\fields\\Date":var B=a(n.find(".datewrapper input").val()),x=a(n.find(".timewrapper input").val());d=B&&x?B+" "+x:B||x;break;case"craft\\fields\\Dropdown":var C=n.find("select").children(":selected");d=a(l(C.text()));break;case"craft\\fields\\Email":d=a(l(n.children('input[type="email"]').val()));break;case"craft\\fields\\Lightswitch":var w=!!n.find("input").val();d='<span class="status'+(w?" live":"")+'"></span>'+a(l(r));break;case"craft\\fields\\MultiSelect":case"ttempleton\\categorygroupsfield\\fields\\CategoryGroupsField":var $=[],T=n.find("select").children(":selected");T.each(function(){$.push((0,s.default)(this).text())}),d=a(l($.join(", ")));break;case"craft\\fields\\Number":case"craft\\fields\\PlainText":d=a(l(n.children('input[type="text"]').val()));break;case"craft\\fields\\RadioButtons":var E=n.find('input[type="radio"]:checked'),L=E.closest("label"),M=L.text();d=a(l(M));break;case"craft\\redactor\\Field":d=a(l(h.default.getText(n.find("textarea").val())));break;case"craft\\ckeditor\\Field":d=a(l(h.default.getText(n.find('[role="textbox"]').html())));break;case"craft\\fields\\Url":d=a(l(n.children('input[type="url"]').val()));break;case"craft\\fields\\Matrix":case"verbb\\supertable\\fields\\SuperTableField":var S=e.find(".field"),O=S.find('input[type!="hidden"], select, textarea, .label'),I=[];O.each(function(){var t=(0,s.default)(this),e=null;t.is("input, textarea")?e=h.default.getText(c.default.getInputPostVal(t)):t.is("select")?e=t.find("option:selected").text():t.hasClass("label")&&(e=t.text()),e&&I.push(l(e))}),d=a(I.join(", "));break;case"typedlinkfield\\fields\\LinkField":case"fruitstudios\\linkit\\fields\\LinkitField":var N=[],A=n.find("select").children(":selected").first(),H=n.find('.linkfield--typeOption:not(.hidden), [class^="linkit--"]:not(.hidden)'),P=H.find('input[type!="hidden"]').val(),D=H.find(".element"),j=n.find('.field[id*="customText"] input, .linkit--customText input').val();if(N.push(l(A.text())),P&&N.push(l(P)),D.length>0){var R=D.find(".title, .label").eq(0).text();N.push(l(R))}j&&N.push(l(j)),d=a(N.join(", "));break;case"luwes\\codemirror\\fields\\CodeMirrorField":var F=[];e.find(".CodeMirror-line > span").each(function(){F.push((0,s.default)(this).text())}),d=a(F.join(" "));break;case"rias\\positionfieldtype\\fields\\Position":var U=n.find(".btn.active");d=a(U.prop("title"));break;case"wrav\\oembed\\fields\\OembedField":d=a(l(n.children("input").val()))}d&&i.length<10&&i.push('<span class="preview_section">',d,"</span>")}}),this.$previewContainer.html(i.join(""))},isNew:function(){return/^new/.test(this.getId())},isSelected:function(){return this.$container.hasClass("is-selected")},collapse:function(t,e){this.toggleExpansion(!1,t,e)},expand:function(t,e){this.toggleExpansion(!0,t,e)},toggleExpansion:function(t,e,n){var i=this;if(t="boolean"==typeof t?t:!this._expanded,e="boolean"!=typeof e||e,n="boolean"!=typeof n||n,t!==this._expanded){this._expanded=t;var o=this.$menuContainer.find('[data-action="expand"]').parent(),a=this.$menuContainer.find('[data-action="collapse"]').parent();this.$container.toggleClass("is-expanded",this._expanded).toggleClass("is-collapsed",!this._expanded),o.toggleClass("hidden",this._expanded),a.toggleClass("hidden",!this._expanded),this._expanded||this.updatePreview();var l=0|this.$contentContainer.outerHeight(),r=0|this.$childrenContainer.outerHeight(),s={opacity:1,height:l+r},d={opacity:0,height:0},c={opacity:"",height:""};n?this.$bodyContainer.css(this._expanded?d:s).velocity(this._expanded?s:d,"fast",function(t){i._expanded&&i.$bodyContainer.css(c)}):this.$bodyContainer.css(this._expanded?c:d),e&&this.saveExpansion(),this.trigger("toggleExpansion",{expanded:this._expanded})}},isExpanded:function(){return this._expanded},saveExpansion:function(){if(!this.isNew()){var t=this.getId(),e=(0,s.default)("#main-form").data("elementEditor"),n=e.duplicatedElements[t],i=e.settings.isProvisionalDraft&&"undefined"!=typeof n?n:t,o={expanded:this.isExpanded()?1:0,blockId:i,locale:this.getLocale()};h.default.queueActionRequest(function(){return h.default.postActionRequest("neo/input/save-expansion",o)})}},disable:function(){this.toggleEnabled(!1)},enable:function(){this.toggleEnabled(!0)},toggleEnabled:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this._enabled;if(t!==this._enabled){this._enabled=t;var e=this.$menuContainer.find('[data-action="enable"]').parent(),n=this.$menuContainer.find('[data-action="disable"]').parent();this.$container.toggleClass("is-enabled",this._enabled).toggleClass("is-disabled",!this._enabled),this.$status.toggleClass("hidden",this._enabled),e.toggleClass("hidden",this._enabled),n.toggleClass("hidden",!this._enabled),this.$enabledInput.val(this._enabled?1:0),this.trigger("toggleEnabled",{enabled:this._enabled})}},isEnabled:function(){return this._enabled},toggleShowButtons:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this._showButtons;this.$buttonsContainer.toggleClass("hidden",!t),this.$childrenWarningsContainer.toggleClass("hidden",t)},selectTab:function(t){var e=(0,s.default)().add(this.$tabButton).add(this.$tabContainer);e.removeClass("is-selected");var n=e.filter('[data-neo-b-info="'+t+'"]').addClass("is-selected");this.$tabsButton.text(t),h.default.ElementThumbLoader.retryAll(),this.trigger("selectTab",{tabName:t,$tabButton:n.filter('[data-neo-b="button.tab"]'),$tabContainer:n.filter('[data-neo-b="container.tab"]')})},updateResponsiveness:function(){if("undefined"==typeof this._topbarLeftWidth){var t=this._expanded?0:this.$previewContainer.width();this._topbarLeftWidth=this.$topbarLeftContainer.width()-t}this._topbarRightWidth=this._topbarRightWidth||this.$topbarRightContainer.width();var e=this.$topbarContainer.width()<this._topbarLeftWidth+this._topbarRightWidth;this.$tabsContainer.toggleClass("invisible",e),this.$tabsButton.toggleClass("invisible",!e)},updateMenuStates:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=this,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;i="boolean"!=typeof i||i;var r=this.getBlockType(),s=e.filter(function(t){return t.getBlockType().getHandle()===r.getHandle()}),d=r.getMaxBlocks(),c=this.getSiblings(e),u=e.filter(function(t){return 0===t.getLevel()}).length,h=n>0&&e.length>=n,f=l>0&&u>=l,p=h||f||!i,b=d>0&&s.length>=d,g=p||b,_=JSON.parse(window.localStorage.getItem("neo:copy")||"{}"),v=p||!_.blocks||!_.field||_.field!==t,k=this.getParent(e);if(!v&&k){var m=k.getBlockType().getMaxChildBlocks();if(m>0){var y=k.getChildren(e).length,B=_.blocks.length;v=v||y+B>m}}if(!v||!g){var x=this.getBlockType().getMaxSiblingBlocks();if(x>0){var C=function(t){return Object.prototype.hasOwnProperty.call(t,"type")?t.type===o.getBlockType().getId():"function"==typeof t.getBlockType&&t.getBlockType().getHandle()===o.getBlockType().getHandle()},w=c.filter(C,this).length,$=_.blocks?_.blocks.filter(C,this).length:0;v=v||w+$>x,g=g||w>=x}}if(!v){var T=e.reduce(function(t,e){var n=e.getBlockType(),i=n.getId(),o=t[i]||{blockType:n,count:0};return o.count++,t[i]=o,t}),E=!0,L=!1,M=void 0;try{for(var S,O=function(){var t=S.value,e=T[t.type];if(e){var n=e.blockType,i=e.count,o=n.getMaxBlocks(),l=o>0&&i>=o;v=v||l}if(0===t.level){var r=a.find(function(e){return e.getId()===t.type});v=v||!r}},I=_.blocks[Symbol.iterator]();!(E=(S=I.next()).done);E=!0)O()}catch(t){L=!0,M=t}finally{try{!E&&I.return&&I.return()}finally{if(L)throw M}}}var N=c.indexOf(this),A=N<=0,H=[-1,c.length-1].includes(N);this.$menuContainer.find('[data-action="moveUp"]').parent().toggleClass("hidden",A),this.$menuContainer.find('[data-action="moveDown"]').parent().toggleClass("hidden",H),this.$menuContainer.find('[data-action="add"]').toggleClass("disabled",p),this.$menuContainer.find('[data-action="duplicate"]').toggleClass("disabled",g),this.$menuContainer.find('[data-action="paste"]').toggleClass("disabled",v)},_handleActionClick:function(t){t.preventDefault(),this["@settingSelect"](t)},_handleActionKeydown:function(t){t.keyCode===c.default.SPACE_KEY&&(t.preventDefault(),this["@settingSelect"](t))},_detectChange:function(){if(window.draftEditor&&window.draftEditor.enableAutosave&&window.draftEditor.settings.draftId&&(this.setModified(!0),this._forceModified=!0),!this._forceModified){var t=this._initialState,e=c.default.getPostData(this.$contentContainer),n=!h.default.compare(e,t.content,!1)||t.enabled!==this._enabled||t.level!==this._level;n!==this._modified&&this.setModified(n)}},"@settingSelect":function(t){this._settingsMenu.hide();var e=(0,s.default)(t.target);if(!e.hasClass("disabled"))switch(e.attr("data-action")){case"collapse":this.collapse();break;case"expand":this.expand();break;case"disable":this.disable(),this.collapse();break;case"enable":this.enable(),this.expand();break;case"moveUp":this.trigger("moveUpBlock",{block:this});break;case"moveDown":this.trigger("moveDownBlock",{block:this});break;case"delete":this.trigger("removeBlock",{block:this});break;case"add":this.trigger("addBlockAbove",{block:this});break;case"copy":this.trigger("copyBlock",{block:this});break;case"paste":this.trigger("pasteBlock",{block:this});break;case"duplicate":this.trigger("duplicateBlock",{block:this})}},"@doubleClickTitle":function(t){t.preventDefault();var e=(0,s.default)(t.target),n=e.parent(),i=n.closest(this.$topbarLeftContainer).length>0,o=n.closest(this.$topbarRightContainer).length>0;i||o||(window.draftEditor&&window.draftEditor.pause(),this.toggleExpansion(),window.draftEditor&&window.draftEditor.resume())},"@setTab":function(t){t.preventDefault();var e=(0,s.default)(t.currentTarget),n=e.attr("data-neo-b-info");this.selectTab(n)}},{_totalNewBlocks:0,getNewId:function(){return"new"+this._totalNewBlocks++}})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){l.default.CpFieldInspectPlugin&&l.default.CpFieldInspectPlugin.addFieldLinks()}Object.defineProperty(e,"__esModule",{value:!0}),e.addFieldLinks=o;var a=n(5),l=i(a)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(2),l=i(a);n(3);var r=n(5),s=i(r),d=n(4),c=i(d),u={blockTypes:[],groups:[],items:null,maxBlocks:0,maxTopBlocks:0,blocks:null};e.default=c.default.Base.extend({_blockTypes:[],_groups:[],_maxBlocks:0,_maxTopBlocks:0,init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=Object.assign({},u,t),t.items?(this._items=Array.from(t.items),this._blockTypes=this._items.filter(function(t){return"blockType"===t.getType()}),this._groups=this._items.filter(function(t){return"group"===t.getType()})):(this._blockTypes=Array.from(t.blockTypes),this._groups=Array.from(t.groups),this._items=[].concat(o(this._blockTypes),o(this._groups)).sort(function(t,e){return t.getSortOrder()-e.getSortOrder()})),this._maxBlocks=0|t.maxBlocks,this._maxTopBlocks=0|t.maxTopBlocks,this.$container=this._generateButtons();var e=this.$container.find("[data-neo-bn]");this.$buttonsContainer=e.filter('[data-neo-bn="container.buttons"]'),this.$menuContainer=e.filter('[data-neo-bn="container.menu"]'),
this.$blockButtons=e.filter('[data-neo-bn="button.addBlock"]'),this.$groupButtons=e.filter('[data-neo-bn="button.group"]'),t.blocks&&this.updateButtonStates(t.blocks),this.addListener(this.$blockButtons,"activate","@newBlock")},_generateButtons:function(){var t=[],e=null,n=!0;t.push('\n      <div class="ni_buttons">\n        <div class="btngroup" data-neo-bn="container.buttons">');for(var i=0;i<this._items.length;i++){var o=this._items[i],a=o.getType();"blockType"===a?null!==e?t.push('\n            <li>\n              <a data-neo-bn="button.addBlock" data-neo-bn-info="'+o.getHandle()+'">'+o.getName()+"</a>\n            </li>"):(t.push('\n          <div class="btn dashed'+(n?" add icon":"")+'" data-neo-bn="button.addBlock" data-neo-bn-info="'+o.getHandle()+'">\n            '+o.getName()+"\n          </div>"),n=!1):"group"===a&&(null!==e&&t.push("\n          </ul>\n        </div>"),e=o.isBlank()||i+2>this._items.length||"group"===this._items[i+1].getType()?null:o,null!==e&&(t.push('\n        <div class="btn dashed'+(n?" add icon":"")+' menubtn" data-neo-bn="button.group">\n          '+o.getName()+'\n        </div>\n        <div class="menu">\n          <ul>'),n=!1))}null!==e&&t.push("\n            </ul>\n          </div>"),t.push('\n        </div>\n        <div class="btn dashed add icon menubtn hidden" data-neo-bn="container.menu">\n          '+s.default.t("neo","Add a block")+"\n        </div>"),e=null;var r=!1;t.push('\n        <div class="menu">\n          <ul>');var d=!0,c=!1,u=void 0;try{for(var h,f=this._items[Symbol.iterator]();!(d=(h=f.next()).done);d=!0){var p=h.value,b=p.getType();"blockType"===b?(null===e||r||(r=!0,t.push("\n              <h6>"+e.getName()+'</h6>\n              <ul class="padded">')),t.push('\n            <li>\n              <a data-neo-bn="button.addBlock" data-neo-bn-info="'+p.getHandle()+'">\n                '+p.getName()+"\n              </a>\n            </li>")):"group"===b&&((null===e||r)&&t.push("\n              </ul>"),r=!1,e=p.isBlank()?null:p,null===e&&t.push("\n              <ul>"))}}catch(t){c=!0,u=t}finally{try{!d&&f.return&&f.return()}finally{if(c)throw u}}return t.push("\n          </ul>\n        </div>\n      </div>"),(0,l.default)(t.join(""))},initUi:function(){(0,l.default)(".menubtn",this.$container).menubtn(),this.updateResponsiveness()},getBlockTypes:function(){return Array.from(this._blockTypes)},getGroups:function(){return Array.from(this._groups)},getMaxBlocks:function(){return this._maxBlocks},updateButtonStates:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e="boolean"!=typeof e||e;var i=this,o=t.filter(function(t){return 0===t.getLevel()}).length,a=this._maxBlocks>0&&t.length>=this._maxBlocks,r=this._maxTopBlocks>0&&o>=this._maxTopBlocks,s=a||r||!e;this.$blockButtons.each(function(){var e=(0,l.default)(this),o=s;if(!o){var a=function(t){return t.getBlockType().getHandle()===r.getHandle()},r=i.getBlockTypeByButton(e),d=t.filter(a),c=r.getMaxBlocks(),u=r.getMaxSiblingBlocks(),h=null!==n?n.getChildren(t).filter(a):t.filter(function(t){return 0===t.getLevel()&&t.getBlockType().getHandle()===r.getHandle()});o=o||c>0&&d.length>=c||u>0&&h.length>=u}e.toggleClass("disabled",o)}),this.$groupButtons.each(function(){var t=(0,l.default)(this),e=t.data("menubtn"),n=s;if(!n&&e){var i=e.menu.$options;n=i.length===i.filter(".disabled").length}t.toggleClass("disabled",n)})},updateResponsiveness:function(){this._buttonsContainerWidth||(this._buttonsContainerWidth=this.$buttonsContainer.width());var t=this.$container.width()<this._buttonsContainerWidth;this.$buttonsContainer.toggleClass("hidden",t),this.$menuContainer.toggleClass("hidden",!t)},getBlockTypeByButton:function(t){var e=t.attr("data-neo-bn-info");return this._blockTypes.find(function(t){return t.getHandle()===e})},"@newBlock":function(t){var e=(0,l.default)(t.currentTarget),n=e.attr("data-neo-bn-info"),i=this._blockTypes.find(function(t){return t.getHandle()===n});this.trigger("newBlock",{blockType:i})}})},function(t,e,n){var i=n(27);"string"==typeof i&&(i=[[t.id,i,""]]);n(17)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(16)(),e.push([t.id,'.neo-input.is-static .ni_block .block-checkbox,.neo-input.is-static .ni_block .block-reorder,.neo-input.is-static .ni_block .block-settings,.neo-input.is-static .ni_buttons{display:none}.neo-input.is-static .ni_block:last-child{margin-bottom:0}.neo-input.is-translatable .field>.heading .locale{display:none}.ni_buttons{position:relative;height:30px}.ni_buttons>.btngroup,.ni_buttons>.menubtn{position:absolute;top:0}body.ltr .ni_buttons>.btngroup,body.ltr .ni_buttons>.menubtn{left:0}body.rtl .ni_buttons>.btngroup,body.rtl .ni_buttons>.menubtn{right:0}.ni_blocks>.ni_buttons,.ni_spinner{margin-bottom:10px}.ni_spinner{text-align:center}.ni_block{box-sizing:border-box;width:100%;margin-bottom:10px;border-radius:4px;border:1px solid #e3e5e8;background-color:#f3f7fc;padding:0}.ni_block:focus{outline:0}.ni_block_topbar{position:relative;height:30px;line-height:30px;color:#8f98a3;transition:background-color .5s;padding:0 14px}.ni_block_topbar_left,.ni_block_topbar_right{display:flex;position:absolute;top:0;bottom:0}body.ltr .ni_block_topbar_left{left:14px}body.rtl .ni_block_topbar_left{right:14px}.ni_block_topbar_right{min-width:100px}body.ltr .ni_block_topbar_right{right:14px}body.rtl .ni_block_topbar_right{left:14px}.ni_block_topbar_item{cursor:default;padding:0 8px;-webkit-user-select:none;-moz-user-select:none;user-select:none;white-space:nowrap}.ni_block_topbar_item:first-child,body.ltr .ni_block_topbar_item:not(:first-child),body.rtl .ni_block_topbar_item:not(:last-child){padding-left:0}.ni_block_topbar_item:last-child{padding-right:0}.ni_block_topbar_item.size-full{flex-grow:1}.ni_block_topbar_item.clip-text{overflow:hidden;text-overflow:ellipsis}.ni_block_topbar_item.title .blocktype{padding:8px 0}.ni_block_topbar_item.title .blocktype.has-errors{color:#da5a47}.ni_block_topbar_item.title .preview{pointer-events:none;position:absolute;width:calc(100% - 80px);height:30px;overflow:hidden;color:#b9bfc6;transition:opacity .2s}body.ltr .ni_block_topbar_item.title .preview{margin-left:8px}body.rtl .ni_block_topbar_item.title .preview{margin-right:8px}.ni_block_topbar_item.title .preview:empty{display:none}.ni_block_topbar_item.title .preview_section{display:inline-block;padding:0 8px;height:30px;line-height:30px}body.ltr .ni_block_topbar_item.title .preview_section{border-left:1px solid #e3e5e8}body.rtl .ni_block_topbar_item.title .preview_section{border-right:1px solid #e3e5e8}.ni_block_topbar_item.title .preview_color,.ni_block_topbar_item.title .preview img{vertical-align:top;margin-top:15px;transform:translateY(-50%)}.ni_block_topbar_item.title .preview img{max-width:30px;max-height:30px}.ni_block_topbar_item.title .preview_color{display:inline-block;width:16px;height:16px;border-radius:50%}body.ltr .ni_block_topbar_item.title .preview .status{margin-right:6px}body.rtl .ni_block_topbar_item.title .preview .status{margin-left:6px}.ni_block_topbar_item.tabs{position:relative;transition:opacity .2s}.ni_block_topbar_item.tabs .tabs_inner{white-space:nowrap}body.ltr .ni_block_topbar_item.tabs .tabs_inner{right:0;direction:ltr}body.rtl .ni_block_topbar_item.tabs .tabs_inner{left:0;direction:rtl}.ni_block_topbar_item.tabs .tabs_btn{position:absolute;top:0;display:inline-flex;cursor:pointer;height:30px;padding:0 9px;border:1px solid #e3e5e8;border-top:0;border-bottom-color:#fbfcfd;margin-bottom:-1px;background-color:#fbfcfd;color:#576575}body.ltr .ni_block_topbar_item.tabs .tabs_btn{right:8px}body.rtl .ni_block_topbar_item.tabs .tabs_btn{left:8px}.ni_block_topbar_item.tabs .tabs_btn.has-errors{color:#da5a47}.ni_block_topbar_item.tabs .tab{display:inline-block;height:30px;padding:0 10px;border-bottom-color:#fafafa;color:rgba(41,50,61,.5)}.ni_block_topbar_item.tabs .tab:hover{color:#0d78f2}.ni_block_topbar_item.tabs .tab.is-selected{cursor:default;padding:0 9px;border-left:1px solid #e3e5e8;border-right:1px solid #e3e5e8;border-bottom-width:1px;border-bottom-style:solid;margin-bottom:-1px;background-color:#fbfcfd;color:#576575}.ni_block_topbar_item.tabs .tab.is-selected.is-blank{border-bottom-color:#f1f5f8;background-color:transparent;transition:border-bottom-color .5s}.ni_block_topbar_item.tabs .tab.has-errors{color:#da5a47}.ni_block_topbar_item.block-settings .settings{padding:0 8px;height:20px}.ni_block_topbar_item.block-settings .settings:not(:hover):not(:active){background-color:transparent}.ni_block_topbar_item.block-settings .settings:before{margin-right:0!important}.ni_block_topbar_item.block-settings .menu{line-height:20px}.ni_block_topbar_item .invisible{visibility:hidden;pointer-events:none}.ni_block_topbar_item>.checkbox{position:relative;display:block;height:100%;color:#29323d}.ni_block_topbar_item>.checkbox:before{position:absolute;top:50%;margin-top:-8px}.ni_block_topbar_item>.checkbox:after{display:none}.ni_block_topbar_item>.status{margin:10px 5px 0 0}.ni_block_topbar_item>a{color:rgba(41,50,61,.25)}.ni_block_topbar_item>a:hover{color:#0d78f2}.ni_block_body{padding:0 14px 14px}.ni_block_content{border-top:1px solid #e3e5e8}.ni_block_content:empty{display:none}.ni_block_content_tab{padding:14px 0 0}.ni_block_content_tab.is-blank{padding:0;border-top:0}#content .ni_block_content_tab:not(.is-selected),.element-editor .ni_block_content_tab:not(.is-selected),.lp-editor .ni_block_content_tab:not(.is-selected){display:none}.ni_block_content_tab>.field{margin:15px 0 0}.ni_block_content_tab.flex-fields>.field:before{display:none}.ni_block_content_tab.flex-fields>.field>.status-badge{left:-15px}.ni_block_children{padding:14px 0 7px;border-top:1px solid #e3e5e8;transition:background-color .5s}.ni_block_body>.ni_block_children:not(:first-child){margin-top:14px}.ni_block_collapsed-children{overflow:hidden}.ni_block_collapsed-children_child{height:2px;border-top:1px solid #e3e5e8;background-color:#fbfcfd;margin-top:-3px;transition:margin-top .2s}.ni_block.is-level-odd{background-color:#fbfcfd}.ni_block.is-level-odd>.ni_block_topbar>.ni_block_topbar_right>.ni_block_topbar_item.tabs .tab.is-blank{border-bottom-color:#fff}.ni_block.is-expanded>.ni_block_topbar .title>.preview{opacity:0}.ni_block.is-collapsed{padding-bottom:0}.ni_block.is-collapsed>.ni_block_topbar .ni_block_topbar_left{overflow:hidden}.ni_block.is-collapsed>.ni_block_topbar .ni_block_topbar_left:before{content:"";pointer-events:none;position:absolute;top:0;bottom:0;left:0;right:0;z-index:1}body.ltr .ni_block.is-collapsed>.ni_block_topbar .ni_block_topbar_left:before{background-image:linear-gradient(-90deg,#f3f7fc,rgba(243,247,252,0) 40px,rgba(243,247,252,0))}body.rtl .ni_block.is-collapsed>.ni_block_topbar .ni_block_topbar_left:before{background-image:linear-gradient(90deg,#f3f7fc,rgba(243,247,252,0) 40px,rgba(243,247,252,0))}body.ltr .ni_block.is-collapsed>.ni_block_topbar .ni_block_topbar_left{right:80px}body.rtl .ni_block.is-collapsed>.ni_block_topbar .ni_block_topbar_left{left:80px}.ni_block.is-collapsed>.ni_block_topbar .ni_block_topbar_right{pointer-events:none}.ni_block.is-collapsed>.ni_block_topbar .ni_block_topbar_right>.tabs{opacity:0}.ni_block.is-collapsed>.ni_block_topbar .ni_block_topbar_right>:not(.tabs){pointer-events:auto}.ni_block.is-collapsed>.ni_block_collapsed-children .ni_block_collapsed-children_child{margin-top:0}.ni_block.is-disabled .ni_block_topbar_item.title .preview{opacity:0}.ni_block.is-disabled .ni_block_content_tab .field{pointer-events:none;opacity:.5;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ni_block.is-empty{padding:6px 0}.ni_block.is-empty.is-level-odd{background-color:#fff}.neo_block_tabs-menu a.is-selected{cursor:default;pointer-events:none;opacity:.25}.neo_block_tabs-menu a.has-errors{color:#da5a47}.neo-matrixblock,.ni_block .matrixblock{border-color:#ccc;background-color:#fff;box-shadow:0 1px 5px -1px rgba(0,0,0,.1)}.neo-matrixblock>.titlebar,.ni_block .matrixblock>.titlebar{border-bottom-color:#eee;background-color:#fbfcfd}',""])}]);